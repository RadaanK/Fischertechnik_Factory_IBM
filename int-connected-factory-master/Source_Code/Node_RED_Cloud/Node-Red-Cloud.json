[{"id":"347bd197.17ccbe","type":"tab","label":"Plant","disabled":false,"info":""},{"id":"523571ab.a711b","type":"tab","label":"Warehouse_1_Display","disabled":false,"info":""},{"id":"fab27939.ff21e8","type":"tab","label":"Warehouse 1 Control","disabled":false,"info":""},{"id":"5c83a1e8.ad766","type":"tab","label":"Vacuumgripper_1","disabled":false,"info":""},{"id":"d5f5f57.d049b08","type":"tab","label":"Pro_Station_Display","disabled":false,"info":""},{"id":"373140ce.a3fbf","type":"tab","label":"Pro_Station_Control","disabled":false,"info":""},{"id":"545b40dd.1629b","type":"tab","label":"Visual Recognition","disabled":false,"info":""},{"id":"f04e2126.57d3","type":"tab","label":"Sorting_Line","disabled":false,"info":""},{"id":"b017d628.55b3e8","type":"tab","label":"Vacuumgripper 2","disabled":false,"info":""},{"id":"c8561b10.574218","type":"tab","label":"Warehouse 2 Display","disabled":false,"info":""},{"id":"ffdb110f.35e53","type":"tab","label":"Warehouse 2 Control","disabled":false,"info":""},{"id":"366e66a.d48829a","type":"mqtt-broker","z":"","name":"","broker":"9.236.65.160","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"cc9e8c60.796c2","type":"mqtt-broker","z":"","name":"","broker":"9.236.65.160","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"449e95bf.1677ac","type":"ui_base","theme":{"name":"theme-dark","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#097479","value":"#097479","edited":false},"page-titlebar-backgroundColor":{"value":"#097479","edited":false},"page-backgroundColor":{"value":"#111111","edited":false},"page-sidebar-backgroundColor":{"value":"#000000","edited":false},"group-textColor":{"value":"#0eb8c0","edited":false},"group-borderColor":{"value":"#555555","edited":false},"group-backgroundColor":{"value":"#333333","edited":false},"widget-textColor":{"value":"#eeeeee","edited":false},"widget-backgroundColor":{"value":"#097479","edited":false},"widget-borderColor":{"value":"#333333","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"ef4fd9fa.09e598","type":"ui_group","name":"Group 1","tab":"","order":1,"disp":true,"width":6},{"id":"af2d560a.4971d8","type":"ui_group","z":"","name":"Location","tab":"","order":1,"disp":true,"width":"9","collapse":false},{"id":"17d7eab0.52b295","type":"ui_group","z":"","name":"Current Weather","tab":"","order":3,"disp":true,"width":"6","collapse":false},{"id":"a37ffd50.6a4d6","type":"ui_group","z":"","name":"Weather Forecast","tab":"","order":4,"disp":true,"width":"6","collapse":false},{"id":"c30b3ac2.60a878","type":"ui_group","z":"","name":"Reset the Plant","tab":"","order":5,"disp":true,"width":"6","collapse":false},{"id":"a57f898a.717c98","type":"ui_group","z":"","name":"Current Sensor Values","tab":"","order":2,"disp":true,"width":"6","collapse":false},{"id":"5136006f.33ca6","type":"mqtt-broker","z":"","name":"","broker":"9.236.65.160","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"8fd7b8f7.acbe88","type":"mqtt-broker","z":"","name":"","broker":"9.236.65.160","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"6b68196b.a83528","type":"ibmiot","z":"","name":"IoT_Munich","keepalive":"60","serverName":"","cleansession":true,"appId":"","shared":false},{"id":"7c4b2332.6d96ac","type":"ui_group","z":0,"name":"High-Bay Warehouse","tab":"9d61e6b8.34d398","order":3,"disp":true,"width":"4","collapse":false},{"id":"64aedee7.b72f8","type":"ui_group","z":0,"name":"Production Data","tab":"9d61e6b8.34d398","order":4,"disp":true,"width":"12","collapse":false},{"id":"61e15af2.a77534","type":"ui_group","z":0,"name":"Plant State","tab":"9d61e6b8.34d398","order":5,"disp":true,"width":"6","collapse":false},{"id":"942b4323.355fd","type":"ui_group","z":0,"name":"event log","tab":"5a00cf4f.13607","order":3,"disp":true,"width":"11","collapse":false},{"id":"334fa18d.d8358e","type":"ui_group","z":0,"name":"event log","tab":"9d61e6b8.34d398","order":6,"disp":true,"width":"11","collapse":false},{"id":"94f54667.8ef998","type":"ui_group","z":0,"name":"event log","tab":"ecb9b254.6b014","order":3,"disp":true,"width":"11","collapse":false},{"id":"74c42da7.886f34","type":"ui_group","z":0,"name":"Processing Station","tab":"ecb9b254.6b014","order":2,"disp":true,"width":"8","collapse":false},{"id":"354501ab.b2efce","type":"ui_group","z":0,"name":"Image","tab":"ecb9b254.6b014","order":1,"disp":true,"width":"8","collapse":false},{"id":"ee965f5e.4010d","type":"ui_group","z":0,"name":"Sensors","tab":"1c33708.255e99","order":2,"disp":true,"width":"4","collapse":false},{"id":"9aad3883.616a08","type":"ui_group","z":0,"name":"Workpiece detected","tab":"1c33708.255e99","order":4,"disp":true,"width":"4","collapse":false},{"id":"e8eb9b39.b8a218","type":"ui_group","z":0,"name":"Image","tab":"1c33708.255e99","order":1,"disp":true,"width":"8","collapse":false},{"id":"68b40c36.7c7914","type":"ui_group","z":0,"name":"Image","tab":"5a00cf4f.13607","order":1,"disp":true,"width":"8","collapse":false},{"id":"cb5b8896.3d63c8","type":"ui_group","z":0,"name":"Image","tab":"9d61e6b8.34d398","order":1,"disp":true,"width":"8","collapse":false},{"id":"dffd34f8.45c5f8","type":"ui_group","z":0,"name":"Tables","tab":"d7ecdb76.671598","order":8,"disp":true,"width":"6"},{"id":"17f9ac07.a63a64","type":"ui_group","z":0,"name":"Test Messages","tab":"591daca.2af2f54","disp":true,"width":"9","collapse":false},{"id":"9eff4cae.58615","type":"ui_group","z":0,"name":"event log","tab":"1c33708.255e99","order":5,"disp":true,"width":"11","collapse":false},{"id":"9cf6642c.4489d8","type":"ui_group","z":0,"name":"NFC","tab":"ecb9b254.6b014","order":4,"disp":true,"width":"6","collapse":false},{"id":"1dc97c40.62e1b4","type":"ui_group","z":0,"name":"Command","tab":"ecb9b254.6b014","order":5,"disp":true,"width":"6","collapse":false},{"id":"4c43819b.ad6ea","type":"ui_group","z":0,"name":"Location","tab":"baf595a5.f653f8","order":1,"disp":true,"width":"9","collapse":false},{"id":"d7f0350d.1dd0b8","type":"ui_group","z":0,"name":"Group 2","tab":"","order":2,"disp":true,"width":6},{"id":"833a9831.8f87f8","type":"ui_group","z":0,"name":"Group 3","tab":"","order":3,"disp":true,"width":6},{"id":"fcd9cb50.29be88","type":"ui_group","z":0,"name":"Group 4","tab":"","order":4,"disp":true,"width":6},{"id":"da1d934c.23e23","type":"ui_group","z":0,"name":"Group 5","tab":"","order":5,"disp":true,"width":6},{"id":"bcf15934.ad3398","type":"ui_group","z":0,"name":"Current Data","tab":"baf595a5.f653f8","order":2,"disp":true,"width":"6","collapse":false},{"id":"738f362b.540ed8","type":"ui_group","z":0,"name":"Current Weather","tab":"baf595a5.f653f8","order":3,"disp":true,"width":"4","collapse":false},{"id":"e1b3dc5d.b9f5e","type":"ui_group","z":0,"name":"Weather in 24h","tab":"baf595a5.f653f8","order":4,"disp":true,"width":"4","collapse":false},{"id":"2518176f.245058","type":"ui_group","z":0,"name":"Warehouse occupancy","tab":"e51729bf.a25488","order":2,"disp":true,"width":"6","collapse":false},{"id":"821d908d.ea563","type":"ui_group","z":0,"name":"Vaccum Gripper","tab":"e5f9b791.155e78","order":2,"disp":true,"width":"5","collapse":false},{"id":"48fefbe0.ad6034","type":"ui_group","z":0,"name":"High-Bay Warehouse","tab":"e51729bf.a25488","order":3,"disp":true,"width":"4","collapse":false},{"id":"75954b7f.76f544","type":"ui_group","z":0,"name":"Command Window","tab":"baf595a5.f653f8","order":5,"disp":true,"width":"7","collapse":false},{"id":"d3f96fdd.518a3","type":"ui_group","z":0,"name":"Production Data","tab":"e51729bf.a25488","order":4,"disp":true,"width":"12","collapse":false},{"id":"e709b682.e47888","type":"ui_group","z":0,"name":"Plant State","tab":"e51729bf.a25488","order":5,"disp":true,"width":"6","collapse":false},{"id":"61e3f2aa.c47f6c","type":"ui_group","z":0,"name":"event log","tab":"e5f9b791.155e78","order":3,"disp":true,"width":"11","collapse":false},{"id":"f78298e2.d9bca8","type":"ui_group","z":0,"name":"event log","tab":"e51729bf.a25488","order":6,"disp":true,"width":"11","collapse":false},{"id":"3f28d2c.236642e","type":"ui_group","z":0,"name":"event log","tab":"5df41072.264bb","order":3,"disp":true,"width":"11","collapse":false},{"id":"1d08f1d3.d4334e","type":"ui_group","z":0,"name":"Processing Station","tab":"5df41072.264bb","order":2,"disp":true,"width":"8","collapse":false},{"id":"9106bf20.68927","type":"ui_group","z":0,"name":"Image","tab":"5df41072.264bb","order":1,"disp":true,"width":"8","collapse":false},{"id":"9cb4b621.d8c8d8","type":"ui_group","z":0,"name":"Sensors","tab":"6c14ab00.0ddc64","order":2,"disp":true,"width":"4","collapse":false},{"id":"b2855b7e.bc2418","type":"ui_group","z":0,"name":"Workpiece detected","tab":"6c14ab00.0ddc64","order":4,"disp":true,"width":"4","collapse":false},{"id":"fc7a61a4.9abd3","type":"ui_group","z":0,"name":"Image","tab":"6c14ab00.0ddc64","order":1,"disp":true,"width":"8","collapse":false},{"id":"6c37f846.2593b8","type":"ui_group","z":0,"name":"Image","tab":"e5f9b791.155e78","order":1,"disp":true,"width":"8","collapse":false},{"id":"6e0ce7fd.145f58","type":"ui_group","z":0,"name":"Image","tab":"e51729bf.a25488","order":1,"disp":true,"width":"8","collapse":false},{"id":"3e483e79.a7f942","type":"ui_group","z":0,"name":"Tables","tab":"59cc7e35.52d9a","order":8,"disp":true,"width":"6"},{"id":"211f0ae3.96d786","type":"ui_group","z":0,"name":"Test Messages","tab":"e796db4c.e8c098","disp":true,"width":"9","collapse":false},{"id":"daa4cf8c.0d449","type":"ui_group","z":0,"name":"event log","tab":"6c14ab00.0ddc64","order":5,"disp":true,"width":"11","collapse":false},{"id":"fa104e03.5ddcb","type":"ui_group","z":0,"name":"NFC","tab":"5df41072.264bb","order":4,"disp":true,"width":"6","collapse":false},{"id":"a0ace100.9034f","type":"ui_group","z":0,"name":"Command","tab":"5df41072.264bb","order":5,"disp":true,"width":"6","collapse":false},{"id":"e707857b.8f0688","type":"ui_group","z":0,"name":"Plant State","tab":"4c648d4e.b6ff54","order":5,"disp":true,"width":"6","collapse":false},{"id":"ce0d6513.7e3798","type":"ui_group","z":0,"name":"High-Bay Warehouse","tab":"4c648d4e.b6ff54","order":3,"disp":true,"width":"4","collapse":false},{"id":"a39ca47.5c43658","type":"ui_group","z":0,"name":"Warehouse occupancy","tab":"4c648d4e.b6ff54","order":2,"disp":true,"width":"6","collapse":false},{"id":"7088bb6a.086384","type":"ui_group","z":0,"name":"Image","tab":"4c648d4e.b6ff54","order":1,"disp":true,"width":"8","collapse":false},{"id":"d4b5495c.335518","type":"ui_group","z":0,"name":"event log","tab":"4c648d4e.b6ff54","order":6,"disp":true,"width":"11","collapse":false},{"id":"6698fd85.e42234","type":"ui_group","z":0,"name":"Vaccum Gripper","tab":"f4f0be0.be2954","order":2,"disp":true,"width":"5","collapse":false},{"id":"15161f4f.62cf11","type":"ui_group","z":0,"name":"Image","tab":"f4f0be0.be2954","order":1,"disp":true,"width":"8","collapse":false},{"id":"a099f5a6.8dc358","type":"ui_group","z":0,"name":"event log","tab":"f4f0be0.be2954","order":3,"disp":true,"width":"11","collapse":false},{"id":"369136e.c9ddbca","type":"ui_group","z":0,"name":"Command Window","tab":"5204d2d2.4744bc","order":5,"disp":true,"width":"7","collapse":false},{"id":"826d1443.b8d9c8","type":"ui_group","z":0,"name":"Plant State","tab":"51d6c90d.26a8e8","order":5,"disp":true,"width":"6","collapse":false},{"id":"87d9460e.3229b8","type":"ui_group","z":0,"name":"Vaccum Gripper","tab":"","order":2,"disp":true,"width":"5","collapse":false},{"id":"b8488005.65fe4","type":"ui_group","z":0,"name":"Image","tab":"","order":1,"disp":true,"width":"8","collapse":false},{"id":"5da70b4c.ea8194","type":"ui_group","z":0,"name":"event log","tab":"","order":3,"disp":true,"width":"11","collapse":false},{"id":"27d10585.56274a","type":"ui_group","z":0,"name":"High-Bay Warehouse","tab":"e394e71.5d64818","order":3,"disp":true,"width":"4","collapse":false},{"id":"ba8cc582.3b6028","type":"ui_group","z":0,"name":"Warehouse occupancy","tab":"e394e71.5d64818","order":2,"disp":true,"width":"6","collapse":false},{"id":"1171bd19.46f573","type":"ui_group","z":0,"name":"Image","tab":"e394e71.5d64818","order":1,"disp":true,"width":"8","collapse":false},{"id":"546d47ff.cc67e8","type":"ui_group","z":0,"name":"event log","tab":"e394e71.5d64818","order":6,"disp":true,"width":"11","collapse":false},{"id":"5eb7682.e972798","type":"ui_group","z":0,"name":"Current Weather","tab":"db94f376.e83bf","order":3,"disp":true,"width":"4","collapse":false},{"id":"4026dc24.016454","type":"ui_group","z":0,"name":"Weather in 24h","tab":"db94f376.e83bf","order":4,"disp":true,"width":"4","collapse":false},{"id":"90ad2dab.309ec","type":"ui_group","z":0,"name":"Current Data","tab":"db94f376.e83bf","order":2,"disp":true,"width":"6","collapse":false},{"id":"c256e625.f8a8a8","type":"ui_group","z":0,"name":"Location","tab":"db94f376.e83bf","order":1,"disp":true,"width":"9","collapse":false},{"id":"bfd94b3.00ef4b8","type":"ui_group","z":0,"name":"Processing Station","tab":"89aa16b8.85d898","order":4,"disp":true,"width":"8","collapse":false},{"id":"64473d5c.740ef4","type":"ui_group","z":0,"name":"Image","tab":"89aa16b8.85d898","order":1,"disp":true,"width":"8","collapse":false},{"id":"a80aaf8f.b8589","type":"ui_group","z":0,"name":"event log","tab":"89aa16b8.85d898","order":2,"disp":true,"width":"11","collapse":false},{"id":"c7dcd81.53f4e28","type":"ui_group","z":"","name":"Current Workpiece","tab":"89aa16b8.85d898","order":5,"disp":true,"width":"6","collapse":false},{"id":"ea38cc9c.b5c08","type":"ui_group","z":0,"name":"Command","tab":"89aa16b8.85d898","order":6,"disp":true,"width":"6","collapse":false},{"id":"4d63af57.0056f","type":"ui_group","z":0,"name":"Sensors","tab":"ae475bf9.44e6b8","order":2,"disp":true,"width":"4","collapse":false},{"id":"16aa3964.cb67e7","type":"ui_group","z":"","name":"Current Workpiece","tab":"ae475bf9.44e6b8","order":4,"disp":true,"width":"4","collapse":false},{"id":"9e389d8c.44141","type":"ui_group","z":0,"name":"Image","tab":"ae475bf9.44e6b8","order":1,"disp":true,"width":"8","collapse":false},{"id":"68f1bdc1.5dc8c4","type":"ui_group","z":0,"name":"event log","tab":"ae475bf9.44e6b8","order":5,"disp":true,"width":"11","collapse":false},{"id":"8a3edafa.64c4b8","type":"ui_group","z":0,"name":"Vaccum Gripper","tab":"440884c8.87ac2c","order":2,"disp":true,"width":"5","collapse":false},{"id":"b3d00ea2.8a61a","type":"ui_group","z":0,"name":"Image","tab":"440884c8.87ac2c","order":1,"disp":true,"width":"8","collapse":false},{"id":"12e73057.010a7","type":"ui_group","z":0,"name":"event log","tab":"440884c8.87ac2c","order":4,"disp":true,"width":"11","collapse":false},{"id":"f18032a1.7d396","type":"ui_group","z":0,"name":"Plant State","tab":"e394e71.5d64818","order":5,"disp":true,"width":"6","collapse":false},{"id":"6fb34f1a.38c57","type":"ui_group","z":0,"name":"Current Workpiece","tab":"e394e71.5d64818","order":7,"disp":true,"width":"6","collapse":false},{"id":"3139555e.e3966a","type":"ui_group","z":0,"name":"Visual Recognition","tab":"89aa16b8.85d898","order":3,"disp":true,"width":"7","collapse":false},{"id":"93c6479b.051ed8","type":"ui_group","z":0,"name":"Image","tab":"37ae35bc.8b912a","order":1,"disp":true,"width":"8","collapse":false},{"id":"575df9eb.ee16e8","type":"ui_group","z":0,"name":"Vacuum Gripper","tab":"37ae35bc.8b912a","order":2,"disp":true,"width":"5","collapse":false},{"id":"236618e.5944de8","type":"ui_group","z":0,"name":"Event Log","tab":"37ae35bc.8b912a","order":4,"disp":true,"width":"11","collapse":false},{"id":"a557cde0.d3a69","type":"ui_group","z":0,"name":"Warehouse occupancy","tab":"d9b16354.56268","order":2,"disp":true,"width":"6","collapse":false},{"id":"59d5f9fe.0e3618","type":"ui_group","z":0,"name":"High-Bay Warehouse","tab":"d9b16354.56268","order":3,"disp":true,"width":"4","collapse":false},{"id":"93085edf.8120c","type":"ui_group","z":0,"name":"Plant State","tab":"d9b16354.56268","order":5,"disp":true,"width":"6","collapse":false},{"id":"56b94139.724d6","type":"ui_group","z":0,"name":"Warehouse State","tab":"d9b16354.56268","order":4,"disp":true,"width":"6","collapse":false},{"id":"f807087b.74e398","type":"ui_group","z":0,"name":"event log","tab":"d9b16354.56268","order":6,"disp":true,"width":"11","collapse":false},{"id":"6da10186.d09e4","type":"ui_group","z":0,"name":"Image","tab":"d9b16354.56268","order":1,"disp":true,"width":"8","collapse":false},{"id":"ceb3c4b6.5c5b38","type":"ui_group","z":0,"name":"Current Workpiece","tab":"d9b16354.56268","order":7,"disp":true,"width":"6","collapse":false},{"id":"e0abd687.91d838","type":"ui_group","z":0,"name":"Pressure in hPa","tab":"440884c8.87ac2c","disp":true,"width":"8","collapse":false},{"id":"adb0fb07.a44b08","type":"ui_group","z":0,"name":"Buttons","tab":"d9b16354.56268","order":8,"disp":true,"width":"6","collapse":false},{"id":"b08161fb.84545","type":"ui_group","z":0,"name":"Buttons_2","tab":"d9b16354.56268","order":9,"disp":true,"width":"6","collapse":false},{"id":"58c0fe8c.8a148","type":"ui_group","z":0,"name":"Buttons","tab":"e394e71.5d64818","order":8,"disp":true,"width":"6","collapse":false},{"id":"6ecc650d.ac502c","type":"ui_group","z":0,"name":"Buttons","tab":"89aa16b8.85d898","order":8,"disp":true,"width":"6","collapse":false},{"id":"e394e71.5d64818","type":"ui_tab","z":"","name":"High-Bay Warehouse 1","icon":"dashboard","order":4,"disabled":false,"hidden":false},{"id":"db94f376.e83bf","type":"ui_tab","z":0,"name":"Plant","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"89aa16b8.85d898","type":"ui_tab","z":0,"name":"Processing Station","icon":"dashboard","order":6,"disabled":false,"hidden":false},{"id":"ae475bf9.44e6b8","type":"ui_tab","z":0,"name":"Sorting Line","icon":"dashboard","order":7,"disabled":false,"hidden":false},{"id":"440884c8.87ac2c","type":"ui_tab","z":"","name":"Vacuum Gripper 1","icon":"dashboard","order":2,"disabled":false,"hidden":false},{"id":"37ae35bc.8b912a","type":"ui_tab","z":0,"name":"Vacuum Gripper 2","icon":"dashboard","order":3,"disabled":false,"hidden":false},{"id":"d9b16354.56268","type":"ui_tab","z":0,"name":"High-Bay Warehouse 2","icon":"dashboard","order":5,"disabled":false,"hidden":false},{"id":"d00c8c7c.574ec","type":"ui_spacer","z":0,"name":"spacer","group":"","order":3,"width":"1","height":1},{"id":"5e968cae.f83844","type":"ui_spacer","z":0,"name":"spacer","group":"","order":6,"width":1,"height":1},{"id":"fdb57ee6.60bd5","type":"ui_spacer","z":0,"name":"spacer","group":"","order":9,"width":1,"height":1},{"id":"699eeb96.10f1f4","type":"ui_spacer","z":0,"name":"spacer","group":"","order":12,"width":1,"height":1},{"id":"88056c38.d5611","type":"ui_spacer","z":0,"name":"spacer","group":"48762baa.0b58b4","order":14,"width":1,"height":1},{"id":"434eb146.673d5","type":"ui_spacer","z":0,"name":"spacer","group":"821d908d.ea563","order":3,"width":"1","height":1},{"id":"5aa699e.bdf8368","type":"ui_spacer","z":0,"name":"spacer","group":"821d908d.ea563","order":6,"width":1,"height":1},{"id":"cc6dcb15.45f3a8","type":"ui_spacer","z":0,"name":"spacer","group":"821d908d.ea563","order":9,"width":1,"height":1},{"id":"a41a48dc.1702b8","type":"ui_spacer","z":0,"name":"spacer","group":"821d908d.ea563","order":12,"width":1,"height":1},{"id":"9b8977e8.61f6f8","type":"ui_spacer","z":0,"name":"spacer","group":"48762baa.0b58b4","order":14,"width":1,"height":1},{"id":"12ee345b.e73adc","type":"ui_spacer","z":0,"name":"spacer","group":"8a3edafa.64c4b8","order":6,"width":1,"height":1},{"id":"5700d7bd.78a088","type":"ui_spacer","z":0,"name":"spacer","group":"8a3edafa.64c4b8","order":9,"width":1,"height":1},{"id":"31501eea.4c6fb2","type":"ui_spacer","z":0,"name":"spacer","group":"8a3edafa.64c4b8","order":12,"width":1,"height":1},{"id":"2ee2ea92.353ed6","type":"ui_spacer","z":0,"name":"spacer","group":"8a3edafa.64c4b8","order":15,"width":1,"height":1},{"id":"bedf0343.1d12d","type":"ui_spacer","z":0,"name":"spacer","group":"575df9eb.ee16e8","order":6,"width":1,"height":1},{"id":"a1c5135.39c54f","type":"ui_spacer","z":0,"name":"spacer","group":"575df9eb.ee16e8","order":9,"width":1,"height":1},{"id":"1654f6c.4b29a09","type":"ui_spacer","z":0,"name":"spacer","group":"575df9eb.ee16e8","order":12,"width":1,"height":1},{"id":"ad3a1832.611358","type":"ui_spacer","z":0,"name":"spacer","group":"575df9eb.ee16e8","order":15,"width":1,"height":1},{"id":"dd27cb6b.915088","type":"ui_group","z":"","name":"Current Workpiece","tab":"440884c8.87ac2c","order":5,"disp":true,"width":"6","collapse":false},{"id":"26c790ae.8e3","type":"ui_group","z":"","name":"Slide occupancy","tab":"ae475bf9.44e6b8","order":5,"disp":true,"width":"6","collapse":false},{"id":"f0e11c16.11933","type":"ui_group","z":"","name":"Buttons","tab":"37ae35bc.8b912a","order":4,"disp":true,"width":"6","collapse":false},{"id":"b090e0cd.bb7dd","type":"ui_group","z":"","name":"Current Workpiece","tab":"37ae35bc.8b912a","order":5,"disp":true,"width":"6","collapse":false},{"id":"67840e50.8420f","type":"ui_group","z":"","name":"Camera Live stream","tab":"db94f376.e83bf","order":6,"disp":true,"width":"8","collapse":false},{"id":"73135548.9c8d5c","type":"ui_group","z":"347bd197.17ccbe","name":"WORLD MAP","tab":"","order":2,"disp":true,"width":"15","collapse":true},{"id":"95eead03.5e09f","type":"ui_group","z":"","name":"Default","tab":"","disp":true,"width":"6","collapse":false},{"id":"9394f6eb.3f66f8","type":"ui_group","z":"","name":"Default","tab":"","disp":true,"width":"6","collapse":false},{"id":"f9de3bff.4ee7d8","type":"ui_group","z":"","name":"Default","tab":"","disp":true,"width":"6","collapse":false},{"id":"7a582220.ab5c2c","type":"ui_group","z":"","name":"List of Commands","tab":"e394e71.5d64818","order":9,"disp":true,"width":"6","collapse":false},{"id":"6a0aa5d3.aff0fc","type":"ui_group","z":"","name":"List of Commands","tab":"89aa16b8.85d898","order":7,"disp":true,"width":"7","collapse":false},{"id":"4d820cbc.5384e4","type":"ui_group","z":"","name":"List of Commands","tab":"37ae35bc.8b912a","order":6,"disp":true,"width":"7","collapse":false},{"id":"161f6a64.198246","type":"ui_group","z":"","name":"Reset Plant","tab":"db94f376.e83bf","order":6,"disp":true,"width":"6","collapse":false},{"id":"d21e3113.34d5d","type":"ui_spacer","name":"spacer","group":"8a3edafa.64c4b8","order":3,"width":1,"height":1},{"id":"9f6744b7.2d9498","type":"ui_spacer","name":"spacer","group":"575df9eb.ee16e8","order":3,"width":1,"height":1},{"id":"1da3254.2d47fdb","type":"ui_group","z":"","name":"Default","tab":"e24adaa9.923608","disp":true,"width":"6","collapse":false},{"id":"e24adaa9.923608","type":"ui_tab","z":"","name":"Home","icon":"dashboard"},{"id":"2abb5193.2cd5de","type":"ui_group","z":"","name":"Default","tab":"2d2f1fcc.90b1e","disp":true,"width":"6","collapse":false},{"id":"2d2f1fcc.90b1e","type":"ui_tab","z":"","name":"Home","icon":"dashboard"},{"id":"8ba6113b.3d807","type":"cloudant","z":"","host":"https://e21c54a4-4228-49d2-8f74-7e9422ae4f18-bluemix:86fa5e7388e52dab849ef5517f1ee986b8e048ae8781e44ea303fb6861c13759@e21c54a4-4228-49d2-8f74-7e9422ae4f18-bluemix.cloudantnosqldb.appdomain.cloud","name":"Cloudant-5n"},{"id":"2a89b05b.1171d","type":"template","z":"523571ab.a711b","name":"Movement start","field":"payload.active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/green-dot.png","x":460,"y":336,"wires":[["66fe0989.115d08"]]},{"id":"884bc520.5286d8","type":"template","z":"523571ab.a711b","name":"Movement stop","field":"payload.active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/grey-dot.png","x":460,"y":416,"wires":[["68d6cb0d.5e0ae4"]]},{"id":"66fe0989.115d08","type":"switch","z":"523571ab.a711b","name":"determine axis","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"13","vt":"str"},{"t":"eq","v":"15","vt":"str"},{"t":"eq","v":"17","vt":"str"},{"t":"eq","v":"19","vt":"str"},{"t":"eq","v":"43","vt":"str"},{"t":"eq","v":"41","vt":"str"}],"checkall":"true","repair":false,"outputs":6,"x":680,"y":336,"wires":[["1dcb7887.cf0517"],["b09cd461.fff6d8"],["ee21ebdf.576e28"],["ee21ebdf.576e28"],["208926a8.d566fa"],["32112f04.6e876"]]},{"id":"68d6cb0d.5e0ae4","type":"switch","z":"523571ab.a711b","name":"determine axis","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"14","vt":"str"},{"t":"eq","v":"16","vt":"str"},{"t":"eq","v":"18","vt":"str"},{"t":"eq","v":"20","vt":"str"},{"t":"eq","v":"44","vt":"str"},{"t":"eq","v":"42","vt":"str"}],"checkall":"true","repair":false,"outputs":6,"x":679.0000076293945,"y":431.9999542236328,"wires":[["1dcb7887.cf0517"],["b09cd461.fff6d8"],["ee21ebdf.576e28"],["ee21ebdf.576e28"],["208926a8.d566fa"],["32112f04.6e876"]]},{"id":"8de62308.0fe6f","type":"inject","z":"523571ab.a711b","name":"Initialize","topic":"","payload":"{\"data\":16}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":220,"y":336,"wires":[["884bc520.5286d8"]]},{"id":"aa38249e.674428","type":"inject","z":"523571ab.a711b","name":"Initialize","topic":"","payload":"{\"data\":14}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":220,"y":296,"wires":[["884bc520.5286d8"]]},{"id":"90acdf6f.54e98","type":"inject","z":"523571ab.a711b","name":"Initialize","topic":"","payload":"{\"data\":18}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":220,"y":376,"wires":[["884bc520.5286d8"]]},{"id":"d8f76fc4.ee1b4","type":"comment","z":"523571ab.a711b","name":"----------- Display Sensor Values ----------","info":"The next nodes display some sensor values of the warehouse. E.g. when the crane is moving in one direction, this should be shown with a green dot.\n\nThe display is always initialised as NOT active","x":250,"y":180,"wires":[]},{"id":"e21ed754.a868e8","type":"switch","z":"523571ab.a711b","name":"Decode Command","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"},{"t":"eq","v":"54","vt":"str"},{"t":"eq","v":"51","vt":"str"},{"t":"eq","v":"52","vt":"str"},{"t":"eq","v":"53","vt":"str"},{"t":"eq","v":"59","vt":"str"},{"t":"eq","v":"56","vt":"str"},{"t":"eq","v":"57","vt":"str"},{"t":"eq","v":"58","vt":"str"},{"t":"eq","v":"21","vt":"str"},{"t":"eq","v":"22","vt":"str"},{"t":"eq","v":"25","vt":"str"},{"t":"eq","v":"26","vt":"str"},{"t":"eq","v":"23","vt":"str"},{"t":"eq","v":"24","vt":"str"},{"t":"eq","v":"27","vt":"str"},{"t":"eq","v":"28","vt":"str"}],"checkall":"true","repair":false,"outputs":18,"x":450,"y":920,"wires":[["2b9ea91b.630796"],["5605f11a.cf191"],["7d2e8290.11201c"],["4ac5b9ac.a08228"],["f668a383.109de"],["840b2071.c8bd4"],["efde413b.8c197"],["ad30658e.1d31b8"],["d705b92c.0073c8"],["e24cb931.1064b8"],["3ed44817.fbd0d8"],["7d4b4544.2a68fc"],["8573ed8e.540e2"],["a75d0ebf.24578"],["da938bf1.a06068"],["1c528ec4.1c1821"],["ec792e55.8416d"],["f08eee01.59de8"]]},{"id":"7d2e8290.11201c","type":"function","z":"523571ab.a711b","name":"Move to conveyor (x-direction)","func":"msg.payload=\n{\n    \"msg\": \"Move to conveyor (x-direction)\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":660,"wires":[["7e651845.da6378"]]},{"id":"4ac5b9ac.a08228","type":"function","z":"523571ab.a711b","name":"Move to first row","func":"msg.payload=\n{\n    \"msg\": \"Move to first row\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":740,"y":700,"wires":[["7e651845.da6378"]]},{"id":"f668a383.109de","type":"function","z":"523571ab.a711b","name":"Move to second row","func":"msg.payload=\n{\n    \"msg\": \"Move to second row\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":760,"y":740,"wires":[["7e651845.da6378"]]},{"id":"840b2071.c8bd4","type":"function","z":"523571ab.a711b","name":"Move to third row","func":"msg.payload=\n{\n    \"msg\": \"Move to third row\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":780,"wires":[["7e651845.da6378"]]},{"id":"efde413b.8c197","type":"function","z":"523571ab.a711b","name":"Move to conveyor (y-direction)","func":"msg.payload=\n{\n    \"msg\": \"Move to conveyor (y-direction)\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":820,"wires":[["7e651845.da6378"]]},{"id":"ad30658e.1d31b8","type":"function","z":"523571ab.a711b","name":"Move to first level (white)","func":"msg.payload=\n{\n    \"msg\": \"Move to first level (white)\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":770,"y":860,"wires":[["7e651845.da6378"]]},{"id":"d705b92c.0073c8","type":"function","z":"523571ab.a711b","name":"Move to second level (red)","func":"msg.payload=\n{\n    \"msg\": \"Move to second level (red)\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":780,"y":900,"wires":[["7e651845.da6378"]]},{"id":"e24cb931.1064b8","type":"function","z":"523571ab.a711b","name":"Move to third level (blue)","func":"msg.payload=\n{\n    \"msg\": \"Move to third level (blue)\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":770,"y":940,"wires":[["7e651845.da6378"]]},{"id":"3ed44817.fbd0d8","type":"function","z":"523571ab.a711b","name":"Start picking up","func":"msg.payload=\n{\n    \"msg\": \"Start picking up\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":740,"y":1000,"wires":[["7e651845.da6378"]]},{"id":"7d4b4544.2a68fc","type":"function","z":"523571ab.a711b","name":"Picking up finished","func":"msg.payload=\n{\n    \"msg\": \"Picking up finished\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":1040,"wires":[["7e651845.da6378"]]},{"id":"8573ed8e.540e2","type":"function","z":"523571ab.a711b","name":"Start dropping ","func":"msg.payload=\n{\n    \"msg\": \"Start dropping \",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":740,"y":1080,"wires":[["7e651845.da6378"]]},{"id":"a75d0ebf.24578","type":"function","z":"523571ab.a711b","name":"Stop dropping","func":"msg.payload=\n{\n    \"msg\": \"Stop dropping\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":740,"y":1120,"wires":[["7e651845.da6378"]]},{"id":"da938bf1.a06068","type":"function","z":"523571ab.a711b","name":"Start picking up at conveyor","func":"msg.payload=\n{\n    \"msg\": \"Start picking up at conveyor\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":780,"y":1160,"wires":[["7e651845.da6378"]]},{"id":"1c528ec4.1c1821","type":"function","z":"523571ab.a711b","name":"Picking up at conveyor finished","func":"msg.payload=\n{\n    \"msg\": \"Picking up at conveyor finished\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":1200,"wires":[["7e651845.da6378"]]},{"id":"ec792e55.8416d","type":"function","z":"523571ab.a711b","name":"Start dropping at conveyor","func":"msg.payload=\n{\n    \"msg\": \"Start dropping at conveyor\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":780,"y":1240,"wires":[["7e651845.da6378"]]},{"id":"f08eee01.59de8","type":"function","z":"523571ab.a711b","name":"Dropping at conveyor finished","func":"msg.payload=\n{\n    \"msg\": \"Dropping at conveyor finished\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":1280,"wires":[["7e651845.da6378"]]},{"id":"d6672995.4b67d8","type":"inject","z":"523571ab.a711b","name":"Initialize","topic":"","payload":"{\"data\":44}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":220,"y":448.9999542236328,"wires":[["884bc520.5286d8"]]},{"id":"e9a0159e.a9e278","type":"inject","z":"523571ab.a711b","name":"Initialize","topic":"","payload":"{\"data\":42}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":220,"y":487.9999542236328,"wires":[["884bc520.5286d8"]]},{"id":"a0d5f33e.84cbe","type":"ibmiot in","z":"523571ab.a711b","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"WarehouseMunich_1","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"WarehouseMunich_1","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":200,"y":236,"wires":[["2a89b05b.1171d","884bc520.5286d8"]]},{"id":"fc1ca16a.d6aa1","type":"ibmiot in","z":"523571ab.a711b","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"WarehouseMunich_1","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"WarehouseMunich_1","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":240,"y":920,"wires":[["e21ed754.a868e8"]]},{"id":"7e651845.da6378","type":"function","z":"523571ab.a711b","name":"add time","func":"js_obj      = msg.payload;\n\nif ( !msg.timestamp ) msg.timestamp = Math.round(+new Date());\n\n//Define strings \nvar year_string= \"0\"; var month_string= \"0\"; var day_string= \"0\";\nvar hours_string= \"0\"; var mins_string= \"0\"; var secs_string= \"0\";\n\nvar dt = new Date(msg.timestamp);\n\nvar\tmonth =\t    dt.getMonth() + 1;\nvar day=        dt.getDate();\nvar year=\t\tdt.getFullYear();\nvar hours=      dt.getHours()+2;\nvar mins=       dt.getMinutes();\nvar secs=       dt.getSeconds();\nvar msecs=      dt.getMilliseconds();\nvar jstime=     dt.getTime();\n\n//The values should always have 2 digits. So check if they are greater than 10 and if not ad a 0 in front \nif (month<10) {\n  month_string= \"0\" + month.toString(10);\n} else { \n  month_string= month.toString(10);\n}\n\nif (day<10) {\n  day_string= \"0\" + day.toString(10);\n} else { \n  day_string= day.toString(10);\n}\n\nif (hours<10) {\n  hours_string= \"0\" + hours.toString(10);\n} else { \n  hours_string= hours.toString(10);\n}\n\nif (mins<10) {\n  mins_string= \"0\" + mins.toString(10);\n} else { \n  mins_string= mins.toString(10);\n}\n\nif (secs<10) {\n  secs_string= \"0\" + secs.toString(10);\n} else { \n  secs_string= secs.toString(10);\n}\n\nyear_string= year.toString(10);\n\njs_obj.time =day_string + \".\" + month_string+ \".\" + year_string + \"  \" +hours_string + \":\" + mins_string + \":\" + secs_string;\njs_obj.timestamp = jstime;\n\nmsg.payload = js_obj ;\n\nreturn msg;","outputs":1,"noerr":0,"x":1080,"y":860,"wires":[["d31dd973.60b8d8"]]},{"id":"14e11f2e.1ced21","type":"template","z":"523571ab.a711b","name":"html","field":"payload","fieldType":"msg","format":"html","syntax":"mustache","template":"<table border=\"1\">\n    \n    \n    <thead>\n        <tr>\n            <th colspan=\"4\">{{topic}}</th>\n        </tr>\n    </thead>\n    \n    \n    <tr> \n        <th>.............................Message...............................</th>\n        <th>Command</th>\n        <th>...timestamp...</th>\n\n    </tr>\n    {{#payload}}\n        <tr class=\"\">\n            <td>{{msg}}</td>            \n            <td>{{command}}</td>\n            <td>{{time}}</td>\n        </tr>\n    {{/payload}}\n</table>\n","output":"str","x":1070,"y":1000,"wires":[["fa3cc04c.507f2"]]},{"id":"d31dd973.60b8d8","type":"function","z":"523571ab.a711b","name":"Cr/Upd msg_events","func":"var msg_obj       = msg.payload ;\nvar arr_msgs = flow.get(\"msg_events\", 'memoryOnly');\n\nif (arr_msgs===undefined ) {\n    // Create an empty array if it does not exist yet\n    arr_msgs = [];\n    //arr_msgs.push(msg_obj) ; \n        if (msg_obj !== \"1\") {\n            arr_msgs.push(msg_obj);\n            flow.set(\"msg_events\",arr_msgs, 'memoryOnly');\n        }\n    \n//    return msg ;\n\n} else {\n        // This is a new user, save and return in the first port\n        if (msg_obj !== \"1\") {\n            arr_msgs.push(msg_obj);\n            flow.set(\"msg_events\",arr_msgs, 'memoryOnly');\n        }\n} \nmsg.payload = flow.get(\"msg_events\", 'memoryOnly');\nreturn msg;\n","outputs":1,"noerr":0,"x":1260,"y":860,"wires":[["56417b68.a70cc4"]]},{"id":"36a277e3.870268","type":"function","z":"523571ab.a711b","name":"topic & 10","func":"var arr = msg.payload ;\nvar i   = 10;\nif(typeof arr === undefined) {\n    return msg;\n} else {\n    msg.payload = arr.slice(0, 10);    \n    msg.topic = 'The Last Ten Messages :';\n    return msg;\n}","outputs":1,"noerr":0,"x":1260,"y":940,"wires":[["14e11f2e.1ced21"]]},{"id":"56417b68.a70cc4","type":"change","z":"523571ab.a711b","name":"sort","rules":[{"t":"set","p":"payload","pt":"msg","to":"($sort(payload,function($l , $r){$l.timestamp < $r.timestamp }) )","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1090,"y":940,"wires":[["36a277e3.870268"]]},{"id":"26ecde8c.f8d7f2","type":"debug","z":"347bd197.17ccbe","name":"ESP_32","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":360,"y":240,"wires":[]},{"id":"74796e0a.356e","type":"change","z":"347bd197.17ccbe","name":"Temperature","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.State.Temperature","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":280,"wires":[["e710e47c.692f98"]]},{"id":"ff98915a.1a788","type":"change","z":"347bd197.17ccbe","name":"Humidity","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.State.Humidity","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":320,"wires":[["3960b383.382f5c"]]},{"id":"a5eb3903.e2b278","type":"comment","z":"347bd197.17ccbe","name":"------------ Current Location ------------","info":"This flow calls the URL to get the image of the location shown in the first page of the dashboard","x":200,"y":80,"wires":[]},{"id":"4aa23c6a.b2fb54","type":"comment","z":"347bd197.17ccbe","name":"--------------- Current Temp/Humidity --------------","info":"here the information of the temperature and humidity sensor are colleted and displayed in the dashboard. ","x":230,"y":200,"wires":[]},{"id":"c1a1c25e.0fbf4","type":"debug","z":"347bd197.17ccbe","name":"Current Weather","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":320,"y":480,"wires":[]},{"id":"f90c1ce4.2642a","type":"comment","z":"347bd197.17ccbe","name":"-------------- Current Weather ---------------","info":"The current weather is called via an API (openweathermap). Next to the real values for temperature and humidity a ictogram shows the current weather situation","x":230,"y":440,"wires":[]},{"id":"43cbe2f7.88745c","type":"change","z":"347bd197.17ccbe","name":"Temperature","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.main.temp","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":620,"wires":[["bf57773f.2edc98"]]},{"id":"16015e48.2db472","type":"change","z":"347bd197.17ccbe","name":"Humidity","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.main.humidity","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":660,"wires":[["e0a35ce6.6b816"]]},{"id":"f30dc8e0.035538","type":"change","z":"347bd197.17ccbe","name":"Weather","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.weather[0].main","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":540,"wires":[["119dee96.5dbd51"]]},{"id":"8feafed6.3c4ae","type":"change","z":"347bd197.17ccbe","name":"Weather_Detail","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.weather[0].description","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":580,"wires":[["a939bdc7.55a7e"]]},{"id":"4fe4aa66.b75fc4","type":"debug","z":"347bd197.17ccbe","name":"Weather Forecast","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":330,"y":760,"wires":[]},{"id":"b53ef0ea.ac49a","type":"comment","z":"347bd197.17ccbe","name":"------------- Weather Forecast --------------","info":"Same procedure as with the current weather flow above. However not the current values are calles via the URL but the values in 24 hours","x":210,"y":720,"wires":[]},{"id":"adb6acaf.2b601","type":"change","z":"347bd197.17ccbe","name":"Temperature","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.list[8].main.temp","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":900,"wires":[["8af7e966.bfb6c8"]]},{"id":"2fea406f.94364","type":"change","z":"347bd197.17ccbe","name":"Humidity","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.list[8].main.humidity","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":940,"wires":[["4250f46b.a9554c"]]},{"id":"53af87a4.92a4f8","type":"change","z":"347bd197.17ccbe","name":"Weather","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.list[8].weather[0].main","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":820,"wires":[["1ae54f4e.798541"]]},{"id":"9cfb0dc1.e0ed6","type":"change","z":"347bd197.17ccbe","name":"Weather_Detail","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.list[8].weather[0].description","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":860,"wires":[["ebcf6eef.1b1bc"]]},{"id":"20d429df.e0b436","type":"ibmiot in","z":"347bd197.17ccbe","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"ESP32","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"ESP32","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":110,"y":260,"wires":[["26ecde8c.f8d7f2","a6a5a8c6.a45c28"]]},{"id":"1ae54f4e.798541","type":"switch","z":"347bd197.17ccbe","name":"","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"Clouds","vt":"str"},{"t":"cont","v":"Drizzle","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":520,"y":820,"wires":[["24d7403e.a7a02"],["ff8bb660.ff11e8"],["9f7e8307.5e6e1"]]},{"id":"24d7403e.a7a02","type":"function","z":"347bd197.17ccbe","name":"cloudy","func":"msg.payload=\"cloudy\";\nreturn msg;","outputs":1,"noerr":0,"x":687.9999961853027,"y":767.0000038146973,"wires":[["711299ec.c367b8"]]},{"id":"7ffd2e84.1e809","type":"function","z":"347bd197.17ccbe","name":"cloudy","func":"msg.payload=\"cloudy\";\nreturn msg;","outputs":1,"noerr":0,"x":694.9999961853027,"y":484.00000381469727,"wires":[["d9fa3dae.a748b"]]},{"id":"119dee96.5dbd51","type":"switch","z":"347bd197.17ccbe","name":"","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"Clouds","vt":"str"},{"t":"cont","v":"Drizzle","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":3,"x":530,"y":540,"wires":[["7ffd2e84.1e809"],["d08e80e5.b4146"],["255d44c2.8f632c"]]},{"id":"eaf55109.4057","type":"template","z":"d5f5f57.d049b08","name":"Movement start","field":"payload.active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/green-dot.png","x":340,"y":340,"wires":[["15ee8718.568dd9"]]},{"id":"74ada720.161c68","type":"template","z":"d5f5f57.d049b08","name":"Movement stop","field":"payload.active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/grey-dot.png","x":340,"y":520,"wires":[["5a433076.a5fe8"]]},{"id":"15ee8718.568dd9","type":"switch","z":"d5f5f57.d049b08","name":"determine Sensor","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"21","vt":"str"},{"t":"eq","v":"23","vt":"str"},{"t":"eq","v":"25","vt":"str"},{"t":"eq","v":"27","vt":"str"},{"t":"eq","v":"29","vt":"str"},{"t":"eq","v":"31","vt":"str"},{"t":"eq","v":"33","vt":"str"},{"t":"eq","v":"35","vt":"str"},{"t":"eq","v":"37","vt":"str"},{"t":"eq","v":"39","vt":"str"},{"t":"eq","v":"41","vt":"str"},{"t":"eq","v":"43","vt":"str"}],"checkall":"true","repair":false,"outputs":12,"x":550,"y":340,"wires":[["e714c84.dce8a38"],["12ef1236.918bce"],["792fb2ae.269cec"],["21c8815c.fa283e"],["30f8422d.0b9e4e"],["cb526f3d.69ec2"],["885d1911.251488"],["52fa8248.a002ac"],["5e36171f.70e8e8"],["e8e4cb70.28faa8"],["b0916090.5ccb2"],["fafe6221.ed79f"]]},{"id":"5a433076.a5fe8","type":"switch","z":"d5f5f57.d049b08","name":"determine Sensor","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"22","vt":"str"},{"t":"eq","v":"24","vt":"str"},{"t":"eq","v":"26","vt":"str"},{"t":"eq","v":"28","vt":"str"},{"t":"eq","v":"30","vt":"str"},{"t":"eq","v":"32","vt":"str"},{"t":"eq","v":"34","vt":"str"},{"t":"eq","v":"36","vt":"str"},{"t":"eq","v":"38","vt":"str"},{"t":"eq","v":"40","vt":"str"},{"t":"eq","v":"42","vt":"str"},{"t":"eq","v":"44","vt":"str"}],"checkall":"true","repair":false,"outputs":12,"x":550,"y":560,"wires":[["e714c84.dce8a38"],["12ef1236.918bce"],["792fb2ae.269cec"],["21c8815c.fa283e"],["30f8422d.0b9e4e"],["cb526f3d.69ec2"],["885d1911.251488"],["52fa8248.a002ac"],["5e36171f.70e8e8"],["e8e4cb70.28faa8"],["b0916090.5ccb2"],["fafe6221.ed79f"]]},{"id":"4b944009.280d1","type":"inject","z":"d5f5f57.d049b08","name":"Initialise","topic":"","payload":"{\"data\":22}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":140,"y":280,"wires":[["74ada720.161c68"]]},{"id":"8e3a6140.4bf91","type":"inject","z":"d5f5f57.d049b08","name":"Initialise","topic":"","payload":"{\"data\":24}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":140,"y":320,"wires":[["74ada720.161c68"]]},{"id":"dfd63635.1115a8","type":"switch","z":"d5f5f57.d049b08","name":"Decode Command","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"},{"t":"eq","v":"3","vt":"str"},{"t":"eq","v":"4","vt":"str"},{"t":"eq","v":"5","vt":"str"},{"t":"eq","v":"6","vt":"str"},{"t":"eq","v":"7","vt":"str"},{"t":"eq","v":"8","vt":"str"},{"t":"eq","v":"9","vt":"str"},{"t":"eq","v":"10","vt":"str"},{"t":"eq","v":"11","vt":"str"},{"t":"eq","v":"12","vt":"str"},{"t":"eq","v":"13","vt":"str"},{"t":"eq","v":"14","vt":"str"},{"t":"eq","v":"15","vt":"str"},{"t":"eq","v":"16","vt":"str"},{"t":"eq","v":"17","vt":"str"},{"t":"eq","v":"18","vt":"str"},{"t":"eq","v":"19","vt":"str"},{"t":"eq","v":"20","vt":"str"},{"t":"eq","v":"46","vt":"str"},{"t":"eq","v":"47","vt":"str"},{"t":"eq","v":"49","vt":"str"}],"checkall":"true","repair":false,"outputs":23,"x":470,"y":1200,"wires":[["ac4667fb.a7e9f8"],["696e4236.92e5ec"],["4871ed1b.6ae2c4"],["59e9aef2.9238d"],["ca9789b6.54ed78"],["c334fea0.d1ebd"],["916c8332.0e75"],["54c3020d.e1ea1c"],["fe509a78.00a278"],["92037271.8f7b8"],["4295f45e.49beac"],["d4cfd808.dd9d18"],["37bd32b.3fecece"],["96b62682.6dd6c8"],["207f136c.44d8ec"],["469407e1.743eb8"],["a0aa198c.e1d2a8"],["34f8efa6.580d"],["8bb41e40.41904"],["ea818aab.afc7d8"],["fa629b9f.62dcf8"],["78d75bb7.54f374"],["346b4ca4.ae1564"]]},{"id":"ac4667fb.a7e9f8","type":"function","z":"d5f5f57.d049b08","name":"Start reference run","func":"msg.payload=\n{\n    \"msg\": \"Start reference run\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":800,"wires":[["8ce7be8b.fd3a6"]]},{"id":"696e4236.92e5ec","type":"function","z":"d5f5f57.d049b08","name":"Reference run completed","func":"msg.payload=\n{\n    \"msg\": \"Reference run completed\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":840,"wires":[["8ce7be8b.fd3a6"]]},{"id":"4871ed1b.6ae2c4","type":"function","z":"d5f5f57.d049b08","name":"Start oven","func":"msg.payload=\n{\n    \"msg\": \"Start oven\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":770,"y":880,"wires":[["8ce7be8b.fd3a6"]]},{"id":"59e9aef2.9238d","type":"function","z":"d5f5f57.d049b08","name":"Stop oven","func":"msg.payload=\n{\n    \"msg\": \"Stop oven\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":760,"y":920,"wires":[["8ce7be8b.fd3a6"]]},{"id":"ca9789b6.54ed78","type":"function","z":"d5f5f57.d049b08","name":"Start gripping","func":"msg.payload=\n{\n    \"msg\": \"Start gripping\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":770,"y":960,"wires":[["8ce7be8b.fd3a6"]]},{"id":"c334fea0.d1ebd","type":"function","z":"d5f5f57.d049b08","name":"Finish gripping","func":"msg.payload=\n{\n    \"msg\": \"Finish gripping\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":780,"y":1000,"wires":[["8ce7be8b.fd3a6"]]},{"id":"916c8332.0e75","type":"function","z":"d5f5f57.d049b08","name":"Move gripper to turning table","func":"msg.payload=\n{\n    \"msg\": \"Move gripper to turning table\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":1040,"wires":[["8ce7be8b.fd3a6"]]},{"id":"54c3020d.e1ea1c","type":"function","z":"d5f5f57.d049b08","name":"Gripper reached turning table","func":"msg.payload=\n{\n    \"msg\": \"Gripper reached turning table\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":1080,"wires":[["8ce7be8b.fd3a6"]]},{"id":"fe509a78.00a278","type":"function","z":"d5f5f57.d049b08","name":"Release workpiece","func":"msg.payload=\n{\n    \"msg\": \"Release workpiece\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":1120,"wires":[["8ce7be8b.fd3a6"]]},{"id":"92037271.8f7b8","type":"function","z":"d5f5f57.d049b08","name":"Workpiece released","func":"msg.payload=\n{\n    \"msg\": \"Workpiece released\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":790.0000228881836,"y":1158.0000343322754,"wires":[["8ce7be8b.fd3a6"]]},{"id":"4295f45e.49beac","type":"function","z":"d5f5f57.d049b08","name":"Move gripper to oven","func":"msg.payload=\n{\n    \"msg\": \"Move gripper to oven\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":1220,"wires":[[]]},{"id":"d4cfd808.dd9d18","type":"function","z":"d5f5f57.d049b08","name":"Gripper reached oven","func":"msg.payload=\n{\n    \"msg\": \"Gripper reached oven\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":1260,"wires":[["8ce7be8b.fd3a6"]]},{"id":"37bd32b.3fecece","type":"function","z":"d5f5f57.d049b08","name":"Move turning table to saw","func":"msg.payload=\n{\n    \"msg\": \"Move turning table to saw\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":1300,"wires":[["8ce7be8b.fd3a6"]]},{"id":"96b62682.6dd6c8","type":"function","z":"d5f5f57.d049b08","name":"Turning table reached saw","func":"msg.payload=\n{\n    \"msg\": \"Turning table reached saw\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":1340,"wires":[["8ce7be8b.fd3a6"]]},{"id":"207f136c.44d8ec","type":"function","z":"d5f5f57.d049b08","name":"Move turning table to conveyor","func":"msg.payload=\n{\n    \"msg\": \"Move turning table to conveyor\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":1380,"wires":[["8ce7be8b.fd3a6"]]},{"id":"469407e1.743eb8","type":"function","z":"d5f5f57.d049b08","name":"Turning table reached conveyor","func":"msg.payload=\n{\n    \"msg\": \"Turning table reached conveyor\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":1420,"wires":[["8ce7be8b.fd3a6"]]},{"id":"a0aa198c.e1d2a8","type":"function","z":"d5f5f57.d049b08","name":"Push workpiece to conveyor","func":"msg.payload=\n{\n    \"msg\": \"Push workpiece to conveyor\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":1460,"wires":[["8ce7be8b.fd3a6"]]},{"id":"34f8efa6.580d","type":"function","z":"d5f5f57.d049b08","name":"Wokpiece pushed to conveyor","func":"msg.payload=\n{\n    \"msg\": \"Wokpiece pushed to conveyor\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":1500,"wires":[["8ce7be8b.fd3a6"]]},{"id":"8bb41e40.41904","type":"function","z":"d5f5f57.d049b08","name":"Move turning table to gripper","func":"msg.payload=\n{\n    \"msg\": \"Move turning table to gripper\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":1540,"wires":[["8ce7be8b.fd3a6"]]},{"id":"ea818aab.afc7d8","type":"function","z":"d5f5f57.d049b08","name":"Turning table reached gripper","func":"msg.payload=\n{\n    \"msg\": \"Turning table reached gripper\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":1580,"wires":[["8ce7be8b.fd3a6"]]},{"id":"16d11ef0.b2a491","type":"inject","z":"d5f5f57.d049b08","name":"Initialise","topic":"","payload":"{\"data\":26}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":140,"y":360,"wires":[["74ada720.161c68"]]},{"id":"236a8dbf.516512","type":"inject","z":"d5f5f57.d049b08","name":"Initialise","topic":"","payload":"{\"data\":28}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":140,"y":400,"wires":[["74ada720.161c68"]]},{"id":"3e732418.52e7fc","type":"inject","z":"d5f5f57.d049b08","name":"Initialise","topic":"","payload":"{\"data\":30}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":140,"y":440,"wires":[["74ada720.161c68"]]},{"id":"be06c346.80c21","type":"inject","z":"d5f5f57.d049b08","name":"Initialise","topic":"","payload":"{\"data\":32}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":140,"y":480,"wires":[["74ada720.161c68"]]},{"id":"760be7ed.867568","type":"inject","z":"d5f5f57.d049b08","name":"Initialise","topic":"","payload":"{\"data\":34}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":140,"y":520,"wires":[["74ada720.161c68"]]},{"id":"b06574f1.200308","type":"inject","z":"d5f5f57.d049b08","name":"Initialise","topic":"","payload":"{\"data\":36}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":140,"y":560,"wires":[["74ada720.161c68"]]},{"id":"17eb2ba3.f3cc14","type":"inject","z":"d5f5f57.d049b08","name":"Initialise","topic":"","payload":"{\"data\":38}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":140,"y":600,"wires":[["74ada720.161c68"]]},{"id":"837de24a.645fd","type":"inject","z":"d5f5f57.d049b08","name":"Initialise","topic":"","payload":"{\"data\":40}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":140,"y":640,"wires":[["74ada720.161c68"]]},{"id":"e0a8aae8.9baa28","type":"inject","z":"d5f5f57.d049b08","name":"Initialise","topic":"","payload":"{\"data\":42}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":140,"y":680,"wires":[["74ada720.161c68"]]},{"id":"cd90b75c.be0b98","type":"inject","z":"d5f5f57.d049b08","name":"Initialise","topic":"","payload":"{\"data\":44}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":140,"y":720,"wires":[["74ada720.161c68"]]},{"id":"4b27c54.103c13c","type":"ibmiot in","z":"d5f5f57.d049b08","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"Processing_Station_Munich","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Processing_Station_Munich","service":"registered","allDevices":false,"allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":180,"y":220,"wires":[["eaf55109.4057","74ada720.161c68"]]},{"id":"8ce7be8b.fd3a6","type":"function","z":"d5f5f57.d049b08","name":"add ts","func":"js_obj      = msg.payload;\n\nif ( !msg.timestamp ) msg.timestamp = Math.round(+new Date());\n\n//Define strings \nvar year_string= \"0\"; var month_string= \"0\"; var day_string= \"0\";\nvar hours_string= \"0\"; var mins_string= \"0\"; var secs_string= \"0\";\n\nvar dt = new Date(msg.timestamp);\n\nvar\tmonth =\t    dt.getMonth() + 1;\nvar day=        dt.getDate();\nvar year=\t\tdt.getFullYear();\nvar hours=      dt.getHours()+2;\nvar mins=       dt.getMinutes();\nvar secs=       dt.getSeconds();\nvar msecs=      dt.getMilliseconds();\nvar jstime=     dt.getTime();\n\n//The values should always have 2 digits. So check if they are greater than 10 and if not ad a 0 in front \nif (month<10) {\n  month_string= \"0\" + month.toString(10);\n} else { \n  month_string= month.toString(10);\n}\n\nif (day<10) {\n  day_string= \"0\" + day.toString(10);\n} else { \n  day_string= day.toString(10);\n}\n\nif (hours<10) {\n  hours_string= \"0\" + hours.toString(10);\n} else { \n  hours_string= hours.toString(10);\n}\n\nif (mins<10) {\n  mins_string= \"0\" + mins.toString(10);\n} else { \n  mins_string= mins.toString(10);\n}\n\nif (secs<10) {\n  secs_string= \"0\" + secs.toString(10);\n} else { \n  secs_string= secs.toString(10);\n}\n\nyear_string= year.toString(10);\n\njs_obj.time =day_string + \".\" + month_string+ \".\" + year_string + \"  \" +hours_string + \":\" + mins_string + \":\" + secs_string;\njs_obj.timestamp = jstime;\n\nmsg.payload = js_obj ;\n\nreturn msg;","outputs":1,"noerr":0,"x":1110,"y":1180,"wires":[["653c05c7.927acc"]]},{"id":"aa02306.e0ab7d","type":"template","z":"d5f5f57.d049b08","name":"html","field":"payload","fieldType":"msg","format":"html","syntax":"mustache","template":"<table border=\"1\">\n    \n    \n    <thead>\n        <tr>\n            <th colspan=\"4\">{{topic}}</th>\n        </tr>\n    </thead>\n    \n    \n    <tr> \n        <th>.............................Message...............................</th>\n        <th>Command</th>\n        <th>...timestamp...</th>\n\n    </tr>\n    {{#payload}}\n        <tr class=\"\">\n            <td>{{msg}}</td>            \n            <td>{{command}}</td>\n            <td>{{time}}</td>\n        </tr>\n    {{/payload}}\n</table>\n","output":"str","x":1130,"y":1260,"wires":[["f46d9767.50ac68"]]},{"id":"653c05c7.927acc","type":"function","z":"d5f5f57.d049b08","name":"Cr/Upd msg_events","func":"var msg_obj       = msg.payload ;\nvar arr_msgs = flow.get(\"msg_events\", 'memoryOnly');\n\nif (arr_msgs===undefined ) {\n    // Create an empty array if it does not exist yet\n    arr_msgs = [];\n    //arr_msgs.push(msg_obj) ; \n        if (msg_obj !== \"1\") {\n            arr_msgs.push(msg_obj);\n            flow.set(\"msg_events\",arr_msgs, 'memoryOnly');\n        }\n    \n//    return msg ;\n\n} else {\n        // This is a new user, save and return in the first port\n        if (msg_obj !== \"1\") {\n            arr_msgs.push(msg_obj);\n            flow.set(\"msg_events\",arr_msgs, 'memoryOnly');\n        }\n} \nmsg.payload = flow.get(\"msg_events\", 'memoryOnly');\nreturn msg;\n","outputs":1,"noerr":0,"x":1320,"y":1180,"wires":[["59d374a2.866c5c"]]},{"id":"6c1f6a07.9ad6b4","type":"function","z":"d5f5f57.d049b08","name":"topic & 10","func":"var arr = msg.payload ;\nvar i   = 10;\nif(typeof arr === undefined) {\n    return msg;\n} else {\n    msg.payload = arr.slice(0, 10);    \n    msg.topic = 'The Last Ten Messages :';\n    return msg;\n}","outputs":1,"noerr":0,"x":1280,"y":1220,"wires":[["aa02306.e0ab7d"]]},{"id":"59d374a2.866c5c","type":"change","z":"d5f5f57.d049b08","name":"sort","rules":[{"t":"set","p":"payload","pt":"msg","to":"($sort(payload,function($l , $r){$l.timestamp < $r.timestamp }) )","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1130,"y":1220,"wires":[["6c1f6a07.9ad6b4"]]},{"id":"fa629b9f.62dcf8","type":"function","z":"d5f5f57.d049b08","name":"Waiting for command","func":"msg.payload=\n{\n    \"msg\": \"Waiting for command\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":1640,"wires":[["8ce7be8b.fd3a6"]]},{"id":"78d75bb7.54f374","type":"function","z":"d5f5f57.d049b08","name":"Command recieved","func":"msg.payload=\n{\n    \"msg\": \"Command recieved\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":1680,"wires":[["8ce7be8b.fd3a6"]]},{"id":"70240be5.b2f104","type":"comment","z":"d5f5f57.d049b08","name":"----------- Get an image of the processing station ------------","info":"These 2 nodes call the URL to get the image (stored in the IBM Cloud Object Storage) of the processing station after a restart of the Node-RED instance. This image is then shown in the warehouse-page of the dashboard","x":290,"y":80,"wires":[]},{"id":"9707b740.52be58","type":"template","z":"f04e2126.57d3","name":"Movement start","field":"payload.active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/green-dot.png","x":360,"y":500,"wires":[["7197bfb1.4497e"]]},{"id":"3ecb4bb4.923e64","type":"template","z":"f04e2126.57d3","name":"Movement stop","field":"payload.active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/grey-dot.png","x":360,"y":580,"wires":[["c5aadb16.266668"]]},{"id":"7197bfb1.4497e","type":"switch","z":"f04e2126.57d3","name":"determine Sensor","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"21","vt":"str"},{"t":"eq","v":"23","vt":"str"},{"t":"eq","v":"25","vt":"str"},{"t":"eq","v":"27","vt":"str"},{"t":"eq","v":"29","vt":"str"}],"checkall":"true","repair":false,"outputs":5,"x":570,"y":500,"wires":[["10f7827b.1582ee"],["d0db08b4.fa4868"],["ca4799eb.dac6c8"],["30c3cb98.c113f4"],["f56ca8d.04ef158"]]},{"id":"c5aadb16.266668","type":"switch","z":"f04e2126.57d3","name":"determine Sensor","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"22","vt":"str"},{"t":"eq","v":"24","vt":"str"},{"t":"eq","v":"26","vt":"str"},{"t":"eq","v":"28","vt":"str"},{"t":"eq","v":"30","vt":"str"}],"checkall":"true","repair":false,"outputs":5,"x":570,"y":580,"wires":[["10f7827b.1582ee"],["d0db08b4.fa4868"],["ca4799eb.dac6c8"],["30c3cb98.c113f4"],["f56ca8d.04ef158"]]},{"id":"2b098df3.aae222","type":"inject","z":"f04e2126.57d3","name":"Initialise","topic":"","payload":"{\"data\":22}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":160,"y":500,"wires":[["3ecb4bb4.923e64"]]},{"id":"dd9e686.6b67d98","type":"inject","z":"f04e2126.57d3","name":"Initialise","topic":"","payload":"{\"data\":24}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":160,"y":540,"wires":[["3ecb4bb4.923e64"]]},{"id":"435956cb.cf0448","type":"inject","z":"f04e2126.57d3","name":"Initialise","topic":"","payload":"{\"data\":26}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":160,"y":580,"wires":[["3ecb4bb4.923e64"]]},{"id":"693c3450.100a6c","type":"inject","z":"f04e2126.57d3","name":"Initialise","topic":"","payload":"{\"data\":28}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":160,"y":620,"wires":[["3ecb4bb4.923e64"]]},{"id":"e8189785.13a7b8","type":"inject","z":"f04e2126.57d3","name":"Initialise","topic":"","payload":"{\"data\":30}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":160,"y":660,"wires":[["3ecb4bb4.923e64"]]},{"id":"8ac66a18.3a4c78","type":"switch","z":"f04e2126.57d3","name":"Decode Command","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"8","vt":"str"},{"t":"eq","v":"9","vt":"str"},{"t":"eq","v":"10","vt":"str"},{"t":"eq","v":"12","vt":"str"},{"t":"eq","v":"14","vt":"str"},{"t":"eq","v":"16","vt":"str"}],"checkall":"true","repair":false,"outputs":6,"x":350,"y":820,"wires":[["8e71abb7.4ff718"],["dfd8df7a.2c4e6"],["68964073.15a25"],["b4e13dc.47c8cc"],["b4e13dc.47c8cc"],["b4e13dc.47c8cc"]]},{"id":"dfd8df7a.2c4e6","type":"template","z":"f04e2126.57d3","name":"red icon","field":"payload.warehouseactivityicon","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/Item-Red.png","x":622.0000076293945,"y":806.0000019073486,"wires":[["e30006f0.bd0678"]]},{"id":"8e71abb7.4ff718","type":"template","z":"f04e2126.57d3","name":"white icon","field":"payload.warehouseactivityicon","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/Item-White.png","x":622.0000076293945,"y":766.0000019073486,"wires":[["e30006f0.bd0678"]]},{"id":"68964073.15a25","type":"template","z":"f04e2126.57d3","name":"blue icon","field":"payload.warehouseactivityicon","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/Item-Blue.png","x":622.0000076293945,"y":846.0000019073486,"wires":[["e30006f0.bd0678"]]},{"id":"b4e13dc.47c8cc","type":"template","z":"f04e2126.57d3","name":"idle icon","field":"payload.warehouseactivityicon","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/Empty-300px.png","x":622.0000076293945,"y":886.0000019073486,"wires":[["e30006f0.bd0678"]]},{"id":"1bb9e6f1.a74f79","type":"ibmiot in","z":"f04e2126.57d3","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"Sorting_Line_Munich","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Sorting_Line_Munich","service":"registered","allDevices":false,"allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":137.99994659423828,"y":450.0000171661377,"wires":[["9707b740.52be58","3ecb4bb4.923e64"]]},{"id":"e4291be9.d9a458","type":"function","z":"f04e2126.57d3","name":"add ts","func":"js_obj      = msg.payload;\n\nif ( !msg.timestamp ) msg.timestamp = Math.round(+new Date());\n\n//Define strings \nvar year_string= \"0\"; var month_string= \"0\"; var day_string= \"0\";\nvar hours_string= \"0\"; var mins_string= \"0\"; var secs_string= \"0\";\n\nvar dt = new Date(msg.timestamp);\n\nvar\tmonth =\t    dt.getMonth() + 1;\nvar day=        dt.getDate();\nvar year=\t\tdt.getFullYear();\nvar hours=      dt.getHours()+2;\nvar mins=       dt.getMinutes();\nvar secs=       dt.getSeconds();\nvar msecs=      dt.getMilliseconds();\nvar jstime=     dt.getTime();\n\n//The values should always have 2 digits. So check if they are greater than 10 and if not ad a 0 in front \nif (month<10) {\n  month_string= \"0\" + month.toString(10);\n} else { \n  month_string= month.toString(10);\n}\n\nif (day<10) {\n  day_string= \"0\" + day.toString(10);\n} else { \n  day_string= day.toString(10);\n}\n\nif (hours<10) {\n  hours_string= \"0\" + hours.toString(10);\n} else { \n  hours_string= hours.toString(10);\n}\n\nif (mins<10) {\n  mins_string= \"0\" + mins.toString(10);\n} else { \n  mins_string= mins.toString(10);\n}\n\nif (secs<10) {\n  secs_string= \"0\" + secs.toString(10);\n} else { \n  secs_string= secs.toString(10);\n}\n\nyear_string= year.toString(10);\n\njs_obj.time =day_string + \".\" + month_string+ \".\" + year_string + \"  \" +hours_string + \":\" + mins_string + \":\" + secs_string;\njs_obj.timestamp = jstime;\n\nmsg.payload = js_obj ;\n\nreturn msg;","outputs":1,"noerr":0,"x":990,"y":1160,"wires":[["1bf58f91.ba92c"]]},{"id":"37b7b991.16bf36","type":"template","z":"f04e2126.57d3","name":"html","field":"payload","fieldType":"msg","format":"html","syntax":"mustache","template":"<table border=\"1\">\n    \n    \n    <thead>\n        <tr>\n            <th colspan=\"4\">{{topic}}</th>\n        </tr>\n    </thead>\n    \n    \n    <tr> \n        <th>.............................Message...............................</th>\n        <th>Command</th>\n        <th>...timestamp...</th>\n\n    </tr>\n    {{#payload}}\n        <tr class=\"\">\n            <td>{{msg}}</td>            \n            <td>{{command}}</td>\n            <td>{{time}}</td>\n        </tr>\n    {{/payload}}\n</table>\n","output":"str","x":1010,"y":1240,"wires":[["5fb01ef7.76d66"]]},{"id":"1bf58f91.ba92c","type":"function","z":"f04e2126.57d3","name":"Cr/Upd msg_events","func":"var msg_obj       = msg.payload ;\nvar arr_msgs = flow.get(\"msg_events\", 'memoryOnly');\n\nif (arr_msgs===undefined ) {\n    // Create an empty array if it does not exist yet\n    arr_msgs = [];\n    //arr_msgs.push(msg_obj) ; \n        if (msg_obj !== \"1\") {\n            arr_msgs.push(msg_obj);\n            flow.set(\"msg_events\",arr_msgs, 'memoryOnly');\n        }\n    \n//    return msg ;\n\n} else {\n        // This is a new user, save and return in the first port\n        if (msg_obj !== \"1\") {\n            arr_msgs.push(msg_obj);\n            flow.set(\"msg_events\",arr_msgs, 'memoryOnly');\n        }\n} \nmsg.payload = flow.get(\"msg_events\", 'memoryOnly');\nreturn msg;\n","outputs":1,"noerr":0,"x":1200,"y":1160,"wires":[["65d973ff.a152fc"]]},{"id":"81af275c.585fc8","type":"function","z":"f04e2126.57d3","name":"topic & 10","func":"var arr = msg.payload ;\nvar i   = 10;\nif(typeof arr === undefined) {\n    return msg;\n} else {\n    msg.payload = arr.slice(0, 10);    \n    msg.topic = 'The Last Ten Messages :';\n    return msg;\n}","outputs":1,"noerr":0,"x":1160,"y":1200,"wires":[["37b7b991.16bf36"]]},{"id":"65d973ff.a152fc","type":"change","z":"f04e2126.57d3","name":"sort","rules":[{"t":"set","p":"payload","pt":"msg","to":"($sort(payload,function($l , $r){$l.timestamp < $r.timestamp }) )","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1010,"y":1200,"wires":[["81af275c.585fc8"]]},{"id":"ed037812.fdb9a8","type":"switch","z":"f04e2126.57d3","name":"Decode Command","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"},{"t":"eq","v":"3","vt":"str"},{"t":"eq","v":"4","vt":"str"},{"t":"eq","v":"6","vt":"str"},{"t":"eq","v":"7","vt":"str"},{"t":"eq","v":"8","vt":"str"},{"t":"eq","v":"9","vt":"str"},{"t":"eq","v":"10","vt":"str"},{"t":"eq","v":"11","vt":"str"},{"t":"eq","v":"12","vt":"str"},{"t":"eq","v":"13","vt":"str"},{"t":"eq","v":"14","vt":"str"},{"t":"eq","v":"15","vt":"str"},{"t":"eq","v":"16","vt":"str"}],"checkall":"true","repair":false,"outputs":15,"x":403,"y":1192.000244140625,"wires":[["f3c3c6f6.3f4ec8"],["4f5eb0a3.eca38"],["9065b45a.60d2e8"],["f252505a.e023e"],["da1a7170.812e3"],["73a2a5f.dd0495c"],["d364241c.b4bf18"],["eb3b787e.defcc8"],["a3ed7f37.c091"],["c5936d1a.c508b"],["fd0db536.ea1a68"],["ce91ffec.4fe56"],["62e60aa3.91ccf4"],["1a2edb6d.98c125"],["4d623c6c.084144"]]},{"id":"f3c3c6f6.3f4ec8","type":"function","z":"f04e2126.57d3","name":"Start conveyor","func":"msg.payload=\n{\n    \"msg\": \"Start conveyor\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":713,"y":952.000244140625,"wires":[["e4291be9.d9a458"]]},{"id":"4f5eb0a3.eca38","type":"function","z":"f04e2126.57d3","name":"Stop conveyor","func":"msg.payload={\n    \"msg\": \"Stop conveyor\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":713,"y":992.000244140625,"wires":[["e4291be9.d9a458"]]},{"id":"9065b45a.60d2e8","type":"function","z":"f04e2126.57d3","name":"Start compressor","func":"msg.payload=\n{\n    \"msg\": \"Start compressor\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":723,"y":1032.000244140625,"wires":[["e4291be9.d9a458"]]},{"id":"f252505a.e023e","type":"function","z":"f04e2126.57d3","name":"Stop compressor","func":"msg.payload={\n    \"msg\": \"Stop compressor\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":723,"y":1072.000244140625,"wires":[["e4291be9.d9a458"]]},{"id":"da1a7170.812e3","type":"function","z":"f04e2126.57d3","name":"Start color detection","func":"msg.payload={\n    \"msg\": \"Start color detection\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":733,"y":1112.000244140625,"wires":[["e4291be9.d9a458"]]},{"id":"73a2a5f.dd0495c","type":"function","z":"f04e2126.57d3","name":"Color detection finished","func":"msg.payload=\n{\n    \"msg\": \"Color detection finished\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":743,"y":1152.000244140625,"wires":[["e4291be9.d9a458"]]},{"id":"d364241c.b4bf18","type":"function","z":"f04e2126.57d3","name":"white workpiece detected","func":"msg.payload=\n{\n    \"msg\": \"white workpiece detected\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":743,"y":1192.000244140625,"wires":[["e4291be9.d9a458"]]},{"id":"eb3b787e.defcc8","type":"function","z":"f04e2126.57d3","name":"red workpiece detected","func":"msg.payload=\n{\n    \"msg\": \"red workpiece detected\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":743,"y":1232.000244140625,"wires":[["e4291be9.d9a458"]]},{"id":"a3ed7f37.c091","type":"function","z":"f04e2126.57d3","name":"blue workpiece detected","func":"msg.payload=\n{\n    \"msg\": \"blue workpiece detected\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":743,"y":1272.000244140625,"wires":[["e4291be9.d9a458"]]},{"id":"c5936d1a.c508b","type":"function","z":"f04e2126.57d3","name":"Valve white open","func":"msg.payload=\n{\n    \"msg\": \"Valve white open\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":723,"y":1312.000244140625,"wires":[["e4291be9.d9a458"]]},{"id":"fd0db536.ea1a68","type":"function","z":"f04e2126.57d3","name":"Valve white closed","func":"msg.payload=\n{\n    \"msg\": \"Valve white closed\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":723,"y":1352.000244140625,"wires":[["e4291be9.d9a458"]]},{"id":"ce91ffec.4fe56","type":"function","z":"f04e2126.57d3","name":"Valve red open","func":"msg.payload=\n{\n    \"msg\": \"Valve red open\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":713,"y":1392.000244140625,"wires":[["e4291be9.d9a458"]]},{"id":"62e60aa3.91ccf4","type":"function","z":"f04e2126.57d3","name":"Valve red closed","func":"msg.payload=\n{\n    \"msg\": \"Valve red closed\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":713,"y":1432.000244140625,"wires":[["e4291be9.d9a458"]]},{"id":"1a2edb6d.98c125","type":"function","z":"f04e2126.57d3","name":"Valve blue open","func":"msg.payload=\n{\n    \"msg\": \"Valve blue open\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":713,"y":1472.000244140625,"wires":[["e4291be9.d9a458"]]},{"id":"4d623c6c.084144","type":"function","z":"f04e2126.57d3","name":"Valve blue closed","func":"msg.payload=\n{\n    \"msg\": \"Valve blue closed\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":723,"y":1512.000244140625,"wires":[["e4291be9.d9a458"]]},{"id":"70ca8e4f.9bbb6","type":"template","z":"5c83a1e8.ad766","name":"Movement start","field":"payload.active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/green-dot.png","x":440,"y":520,"wires":[["445e9903.9e6328"]]},{"id":"b5e51510.e58ed8","type":"template","z":"5c83a1e8.ad766","name":"Movement stop","field":"payload.active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/grey-dot.png","x":440,"y":600,"wires":[["51fb8941.2effa8"]]},{"id":"445e9903.9e6328","type":"switch","z":"5c83a1e8.ad766","name":"determine axis","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"11","vt":"str"},{"t":"eq","v":"13","vt":"str"},{"t":"eq","v":"15","vt":"str"},{"t":"eq","v":"31","vt":"str"},{"t":"eq","v":"33","vt":"str"}],"checkall":"true","repair":false,"outputs":5,"x":680,"y":520,"wires":[["7f6801f4.2931a"],["c70859b2.5136f8"],["41b457fa.c66f08"],["8b73918a.c94f7"],["1cb65466.62749c"]]},{"id":"51fb8941.2effa8","type":"switch","z":"5c83a1e8.ad766","name":"determine axis","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"12","vt":"str"},{"t":"eq","v":"14","vt":"str"},{"t":"eq","v":"16","vt":"str"},{"t":"eq","v":"32","vt":"str"},{"t":"eq","v":"34","vt":"str"}],"checkall":"true","repair":false,"outputs":5,"x":680,"y":600,"wires":[["7f6801f4.2931a"],["c70859b2.5136f8"],["41b457fa.c66f08"],["8b73918a.c94f7"],["1cb65466.62749c"]]},{"id":"ed2497f1.15f648","type":"inject","z":"5c83a1e8.ad766","name":"Initialize","topic":"","payload":"{\"data\":14}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":140,"y":540,"wires":[["b5e51510.e58ed8"]]},{"id":"69efdbaa.f746b4","type":"inject","z":"5c83a1e8.ad766","name":"Initialize","topic":"","payload":"{\"data\":12}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":140,"y":500,"wires":[["b5e51510.e58ed8"]]},{"id":"a2b7ea4d.5710e8","type":"inject","z":"5c83a1e8.ad766","name":"Initialize","topic":"","payload":"{\"data\":16}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":140,"y":580,"wires":[["b5e51510.e58ed8"]]},{"id":"8ec88e8b.92ed4","type":"inject","z":"5c83a1e8.ad766","name":"Initialize","topic":"","payload":"{\"data\":32}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":140,"y":620,"wires":[["b5e51510.e58ed8"]]},{"id":"93ee6b7f.8e44d8","type":"switch","z":"5c83a1e8.ad766","name":"Decode Command","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"},{"t":"eq","v":"27","vt":"str"},{"t":"eq","v":"28","vt":"str"},{"t":"eq","v":"29","vt":"str"},{"t":"eq","v":"30","vt":"str"},{"t":"eq","v":"21","vt":"str"},{"t":"eq","v":"22","vt":"str"},{"t":"eq","v":"23","vt":"str"},{"t":"eq","v":"24","vt":"str"},{"t":"eq","v":"25","vt":"str"},{"t":"eq","v":"26","vt":"str"},{"t":"eq","v":"36","vt":"str"},{"t":"eq","v":"37","vt":"str"},{"t":"eq","v":"38","vt":"str"},{"t":"eq","v":"41","vt":"str"}],"checkall":"true","repair":false,"outputs":16,"x":353,"y":943,"wires":[["f78b911c.8f2bf"],["2bcb4b77.d7d2a4"],["dc427582.ecfb08"],["b7ca77f1.14d358"],["b25b0fb3.f4154"],["27148445.e4e93c"],["95b4139.1fa57f","cc875b56.76d988"],["435612da.f02aec","bea8e2f9.b6497"],["e21c4950.4062f8","5233f040.e6adb"],["de9138ff.d7d698","693eab0b.e26124"],["aafb732d.413e7","8dafd96d.b78f98"],["b6614384.60035"],["3e4ba3d0.eafc6c"],["1e09aab0.967be5"],["67c15c8f.9eca44"],["b6586e4.6bc249"]]},{"id":"dc427582.ecfb08","type":"function","z":"5c83a1e8.ad766","name":"Start gripping","func":"msg.payload=\n{\n    \"msg\": \"Start gripping\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":676,"y":824,"wires":[["4eb717c9.82c238"]]},{"id":"b7ca77f1.14d358","type":"function","z":"5c83a1e8.ad766","name":"Stop gripping","func":"msg.payload=\n{\n    \"msg\": \"Stop gripping\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":676,"y":862.9999761581421,"wires":[["4eb717c9.82c238"]]},{"id":"b25b0fb3.f4154","type":"function","z":"5c83a1e8.ad766","name":"Start releasing workpiece","func":"msg.payload=\n{\n    \"msg\": \"Start releasing workpiece\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":716,"y":902.9999761581421,"wires":[["4eb717c9.82c238"]]},{"id":"27148445.e4e93c","type":"function","z":"5c83a1e8.ad766","name":"Stop realeasing workpiece","func":"msg.payload=\n{\n    \"msg\": \"Stop realeasing workpiece\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":726,"y":942.9999761581421,"wires":[["4eb717c9.82c238"]]},{"id":"95b4139.1fa57f","type":"function","z":"5c83a1e8.ad766","name":"Move to sorting line slide N1","func":"msg.payload=\n{\n    \"msg\": \"Move to sorting line slide N1\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":726,"y":982.9999761581421,"wires":[["4eb717c9.82c238"]]},{"id":"435612da.f02aec","type":"function","z":"5c83a1e8.ad766","name":"Move to sorting line slide N2","func":"msg.payload=\n{\n    \"msg\": \"Move to sorting line Slide N2\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":726,"y":1060,"wires":[["4eb717c9.82c238"]]},{"id":"e21c4950.4062f8","type":"function","z":"5c83a1e8.ad766","name":"Move to sorting line slide N3","func":"msg.payload=\n{\n    \"msg\": \"Move to sorting line slide N3\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":726,"y":1131,"wires":[["4eb717c9.82c238"]]},{"id":"de9138ff.d7d698","type":"function","z":"5c83a1e8.ad766","name":"Move to high-bay warehouse N1","func":"msg.payload=\n{\n    \"msg\": \"Move to high-bay warehouse N1\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":737,"y":1203,"wires":[["4eb717c9.82c238"]]},{"id":"aafb732d.413e7","type":"function","z":"5c83a1e8.ad766","name":"Move to processing station","func":"msg.payload=\n{\n    \"msg\": \"Move to processing station\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":727,"y":1273,"wires":[["4eb717c9.82c238"]]},{"id":"b6614384.60035","type":"function","z":"5c83a1e8.ad766","name":"Position reached","func":"msg.payload=\n{\n    \"msg\": \"Position reached\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":694,"y":1348,"wires":[["4eb717c9.82c238"]]},{"id":"12180a1d.f25196","type":"inject","z":"5c83a1e8.ad766","name":"Initialize","topic":"","payload":"{\"data\":34}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":140,"y":660,"wires":[["b5e51510.e58ed8"]]},{"id":"b8c7f439.c51738","type":"ibmiot in","z":"5c83a1e8.ad766","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"VacuumGripperMunich_1","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"VacuumGripperMunich_1","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":170,"y":440,"wires":[["70ca8e4f.9bbb6","b5e51510.e58ed8"]]},{"id":"4eb717c9.82c238","type":"function","z":"5c83a1e8.ad766","name":"add ts","func":"js_obj      = msg.payload;\n\nif ( !msg.timestamp ) msg.timestamp = Math.round(+new Date());\n\n//Define strings \nvar year_string= \"0\"; var month_string= \"0\"; var day_string= \"0\";\nvar hours_string= \"0\"; var mins_string= \"0\"; var secs_string= \"0\";\n\nvar dt = new Date(msg.timestamp);\n\nvar\tmonth =\t    dt.getMonth() + 1;\nvar day=        dt.getDate();\nvar year=\t\tdt.getFullYear();\nvar hours=      dt.getHours()+2;\nvar mins=       dt.getMinutes();\nvar secs=       dt.getSeconds();\nvar msecs=      dt.getMilliseconds();\nvar jstime=     dt.getTime();\n\n//The values should always have 2 digits. So check if they are greater than 10 and if not ad a 0 in front \nif (month<10) {\n  month_string= \"0\" + month.toString(10);\n} else { \n  month_string= month.toString(10);\n}\n\nif (day<10) {\n  day_string= \"0\" + day.toString(10);\n} else { \n  day_string= day.toString(10);\n}\n\nif (hours<10) {\n  hours_string= \"0\" + hours.toString(10);\n} else { \n  hours_string= hours.toString(10);\n}\n\nif (mins<10) {\n  mins_string= \"0\" + mins.toString(10);\n} else { \n  mins_string= mins.toString(10);\n}\n\nif (secs<10) {\n  secs_string= \"0\" + secs.toString(10);\n} else { \n  secs_string= secs.toString(10);\n}\n\nyear_string= year.toString(10);\n\njs_obj.time =day_string + \".\" + month_string+ \".\" + year_string + \"  \" +hours_string + \":\" + mins_string + \":\" + secs_string;\njs_obj.timestamp = jstime;\n\nmsg.payload = js_obj ;\n\nreturn msg;","outputs":1,"noerr":0,"x":1198.0000038146973,"y":945.0000038146973,"wires":[["4c9e466e.4347b8"]]},{"id":"34ee9f86.07201","type":"template","z":"5c83a1e8.ad766","name":"html","field":"payload","fieldType":"msg","format":"html","syntax":"mustache","template":"<table border=\"1\">\n    \n    \n    <thead>\n        <tr>\n            <th colspan=\"4\">{{topic}}</th>\n        </tr>\n    </thead>\n    \n    \n    <tr> \n        <th>.............................Message...............................</th>\n        <th>Command</th>\n        <th>...timestamp...</th>\n\n    </tr>\n    {{#payload}}\n        <tr class=\"\">\n            <td>{{msg}}</td>            \n            <td>{{command}}</td>\n            <td>{{time}}</td>\n        </tr>\n    {{/payload}}\n</table>\n","output":"str","x":1198.0000038146973,"y":1085.0000038146973,"wires":[["a9702039.33259"]]},{"id":"4c9e466e.4347b8","type":"function","z":"5c83a1e8.ad766","name":"Cr/Upd msg_events","func":"var msg_obj       = msg.payload ;\nvar arr_msgs = flow.get(\"msg_events\", 'memoryOnly');\n\nif (arr_msgs===undefined ) {\n    // Create an empty array if it does not exist yet\n    arr_msgs = [];\n    //arr_msgs.push(msg_obj) ; \n        if (msg_obj !== \"1\") {\n            arr_msgs.push(msg_obj);\n            flow.set(\"msg_events\",arr_msgs, 'memoryOnly');\n        }\n    \n//    return msg ;\n\n} else {\n        // This is a new user, save and return in the first port\n        if (msg_obj !== \"1\") {\n            arr_msgs.push(msg_obj);\n            flow.set(\"msg_events\",arr_msgs, 'memoryOnly');\n        }\n} \nmsg.payload = flow.get(\"msg_events\", 'memoryOnly');\nreturn msg;\n","outputs":1,"noerr":0,"x":1388.0000038146973,"y":945.0000038146973,"wires":[["24a8b38a.6aafec"]]},{"id":"acf129a9.56a7a8","type":"function","z":"5c83a1e8.ad766","name":"topic & 10","func":"var arr = msg.payload ;\nvar i   = 10;\nif(typeof arr === undefined) {\n    return msg;\n} else {\n    msg.payload = arr.slice(0, 10);    \n    msg.topic = 'The Last Ten Messages :';\n    return msg;\n}","outputs":1,"noerr":0,"x":1388.0000038146973,"y":1025.0000038146973,"wires":[["34ee9f86.07201"]]},{"id":"24a8b38a.6aafec","type":"change","z":"5c83a1e8.ad766","name":"sort","rules":[{"t":"set","p":"payload","pt":"msg","to":"($sort(payload,function($l , $r){$l.timestamp < $r.timestamp }) )","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1218.0000038146973,"y":1025.0000038146973,"wires":[["acf129a9.56a7a8"]]},{"id":"6f2e91e.4f7b47","type":"inject","z":"347bd197.17ccbe","name":"","topic":"","payload":"","payloadType":"date","repeat":"900","crontab":"","once":true,"onceDelay":0.1,"x":95,"y":500,"wires":[["8685d5c7.1f5228"]],"l":false},{"id":"c372a3c2.8e5e5","type":"inject","z":"347bd197.17ccbe","name":"","topic":"","payload":"","payloadType":"date","repeat":"900","crontab":"","once":true,"onceDelay":0.1,"x":95,"y":800,"wires":[["8f6178ce.ed2138"]],"l":false},{"id":"a6a5a8c6.a45c28","type":"switch","z":"347bd197.17ccbe","name":"","property":"payload.State","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":215,"y":320,"wires":[["ff98915a.1a788","74796e0a.356e"]],"l":false},{"id":"8685d5c7.1f5228","type":"http request","z":"347bd197.17ccbe","name":"current weather","method":"GET","ret":"obj","paytoqs":false,"url":"http://api.openweathermap.org/data/2.5/weather?q=Munich&APPID=38debf95f97faeb81b349a5b94fce261","tls":"","proxy":"","authType":"","x":180,"y":600,"wires":[["c1a1c25e.0fbf4","f30dc8e0.035538","8feafed6.3c4ae","16015e48.2db472","43cbe2f7.88745c"]]},{"id":"bf57773f.2edc98","type":"function","z":"347bd197.17ccbe","name":"Kelvin 2Celsius","func":"var temp = msg.payload-273.15;                      //change to degree celsius\nmsg.payload=Math.round(temp * 100) / 100;    //round to 2 digits after dot\nreturn msg;","outputs":1,"noerr":0,"x":625,"y":620,"wires":[["aae5b4e9.803288"]]},{"id":"8af7e966.bfb6c8","type":"function","z":"347bd197.17ccbe","name":"Kelvin 2Celsius","func":"var temp = msg.payload-273.15;                      //change to degree celsius\nmsg.payload=Math.round(temp * 100) / 100;    //round to 2 digits after dot\nreturn msg;","outputs":1,"noerr":0,"x":620,"y":900,"wires":[["de1ca12f.2ead3"]]},{"id":"8f6178ce.ed2138","type":"http request","z":"347bd197.17ccbe","name":"forecast","method":"GET","ret":"obj","paytoqs":false,"url":"http://api.openweathermap.org/data/2.5/forecast?q=Munich&APPID=38debf95f97faeb81b349a5b94fce261","tls":"","proxy":"","authType":"","x":160,"y":880,"wires":[["4fe4aa66.b75fc4","53af87a4.92a4f8","9cfb0dc1.e0ed6","adb6acaf.2b601","2fea406f.94364"]]},{"id":"7c3000d4.5408e","type":"ibmiot in","z":"f04e2126.57d3","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"Sorting_Line_Munich","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Sorting_Line_Munich","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":160,"y":1820,"wires":[["2c26b0c2.f6008","70a0b2d.138e04c"]]},{"id":"fbd37611.091bf8","type":"ibmiot in","z":"523571ab.a711b","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"WarehouseMunich_1","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"WarehouseMunich_1","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":220,"y":1640,"wires":[["9b41f921.307548","2d382ebb.82bd42"]]},{"id":"33e5f368.d9a6cc","type":"function","z":"545b40dd.1629b","name":"Send Command","func":"msg.payload={ \"Command\":\"take_photo\"}\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":140,"wires":[["14ebd34e.1df1ad"]]},{"id":"76aab57d.c1fd6c","type":"ibmiot in","z":"545b40dd.1629b","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"Raspberry_Pi_Visual_Recognition","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Raspberry_Pi_Visual_Recognition","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":220,"y":400,"wires":[["a4a378e0.e9db18","83550b76.b0c708"]]},{"id":"ee2be006.80a4f","type":"ibmiot in","z":"545b40dd.1629b","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"Processing_Station_Munich","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Processing_Station_Munich","service":"registered","allDevices":false,"allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":200,"y":140,"wires":[["b7273985.be2a58"]]},{"id":"b7273985.be2a58","type":"switch","z":"545b40dd.1629b","name":"Decode Command","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"49","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":430,"y":140,"wires":[["1baf3560.c7d12b"]]},{"id":"12c79898.8413d7","type":"comment","z":"545b40dd.1629b","name":"----------- Start visual recognition ------------","info":"If the processing station sends the event, that it is ready for visual recognition, a command should be send to the Raspberry Pi for visual inspection","x":240,"y":100,"wires":[]},{"id":"a0b57c0b.0a6a5","type":"inject","z":"545b40dd.1629b","name":"Test","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":470,"y":180,"wires":[["1baf3560.c7d12b"]]},{"id":"14ebd34e.1df1ad","type":"ibmiot out","z":"545b40dd.1629b","authentication":"apiKey","apiKey":"6b68196b.a83528","outputType":"cmd","deviceId":"Raspberry_Pi_Visual_Recognition","deviceType":"0.20.7","eventCommandType":"event","format":"json","data":"{}","qos":0,"name":"Raspberry_Pi_Visual_Recognition","service":"registered","x":1060,"y":140,"wires":[]},{"id":"1baf3560.c7d12b","type":"change","z":"545b40dd.1629b","name":"Delete msg content","rules":[{"t":"set","p":"topic","pt":"msg","to":"\"\"","tot":"str"},{"t":"delete","p":"deviceId","pt":"msg"},{"t":"delete","p":"deviceType","pt":"msg"},{"t":"delete","p":"eventType","pt":"msg"},{"t":"delete","p":"format","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":140,"wires":[["33e5f368.d9a6cc","5551d57d.d0e7ac"]]},{"id":"3175c47d.30d5cc","type":"ibmiot out","z":"545b40dd.1629b","authentication":"apiKey","apiKey":"6b68196b.a83528","outputType":"cmd","deviceId":"Processing_Station_Munich","deviceType":"0.20.7","eventCommandType":"event","format":"json","data":"{}","qos":0,"name":"Processing_Station_Munich","service":"registered","x":1020,"y":540,"wires":[]},{"id":"e591e99e.b089c8","type":"function","z":"545b40dd.1629b","name":"Sent Command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 0,\n    \"timestamp\": 1351824120,\n    \"command\": 50\n}\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":540,"wires":[["3175c47d.30d5cc"]]},{"id":"a4a378e0.e9db18","type":"change","z":"545b40dd.1629b","name":"Delete msg content","rules":[{"t":"set","p":"topic","pt":"msg","to":"\"\"","tot":"str"},{"t":"delete","p":"deviceId","pt":"msg"},{"t":"delete","p":"deviceType","pt":"msg"},{"t":"delete","p":"eventType","pt":"msg"},{"t":"delete","p":"format","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":510,"y":400,"wires":[["3919996e.351e56","83abf58b.831648","f0d6e9bd.848d38","e57da11e.e1f3f"]]},{"id":"af875fdd.bc54c","type":"inject","z":"d5f5f57.d049b08","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":150,"y":120,"wires":[["105f604.ba5eba"]]},{"id":"9b41f921.307548","type":"switch","z":"523571ab.a711b","name":"Check ID","property":"payload.NFC_ID","propertyType":"msg","rules":[{"t":"eq","v":"045cc74a616081","vt":"str"},{"t":"eq","v":"0416c64a616081","vt":"str"},{"t":"eq","v":"0417c64a616081","vt":"str"},{"t":"eq","v":"0452c64a616081","vt":"str"},{"t":"eq","v":"0434c64a616081","vt":"str"},{"t":"eq","v":"04f8c64a616080","vt":"str"},{"t":"eq","v":"041ec74a616081","vt":"str"},{"t":"eq","v":"044ac74a616080","vt":"str"},{"t":"eq","v":"047ac74a616081","vt":"str"},{"t":"eq","v":"045bc74a616081","vt":"str"},{"t":"eq","v":"043cc74a616081","vt":"str"},{"t":"eq","v":"0467c74a616080","vt":"str"}],"checkall":"true","repair":false,"outputs":12,"x":400,"y":1640,"wires":[["f7ac95dd.504ed8"],["6fb55807.7bd568"],["2e22136.f45fcec"],["7d6e0820.f52168"],["fa38e065.7a79a"],["69a6a30f.5d3d6c"],["14fd4638.f270ba"],["9b6c3ee1.b7f7d"],["82635a24.783dd8"],["dc7f9b5d.ba9e58"],["d4816e2f.7f87"],["a63542e0.7b68e"]]},{"id":"24fa9821.534e98","type":"template","z":"b017d628.55b3e8","name":"Movement start","field":"payload.active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/green-dot.png","x":460,"y":540,"wires":[["7cf3de28.00b8d"]]},{"id":"4bb7a7e8.cd7ac8","type":"template","z":"b017d628.55b3e8","name":"Movement stop","field":"payload.active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/grey-dot.png","x":460,"y":620,"wires":[["12920a4c.9a3e66"]]},{"id":"7cf3de28.00b8d","type":"switch","z":"b017d628.55b3e8","name":"determine axis","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"11","vt":"str"},{"t":"eq","v":"13","vt":"str"},{"t":"eq","v":"15","vt":"str"},{"t":"eq","v":"31","vt":"str"},{"t":"eq","v":"33","vt":"str"}],"checkall":"true","repair":false,"outputs":5,"x":700,"y":540,"wires":[["1b2ccc92.be82d3"],["e57ef6a5.a5bfd8"],["b6bec43d.dfcda8"],["2f84fefe.3342c2"],["dcc948b1.39b848"]]},{"id":"12920a4c.9a3e66","type":"switch","z":"b017d628.55b3e8","name":"determine axis","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"12","vt":"str"},{"t":"eq","v":"14","vt":"str"},{"t":"eq","v":"16","vt":"str"},{"t":"eq","v":"32","vt":"str"},{"t":"eq","v":"34","vt":"str"}],"checkall":"true","repair":false,"outputs":5,"x":700,"y":620,"wires":[["1b2ccc92.be82d3"],["e57ef6a5.a5bfd8"],["b6bec43d.dfcda8"],["2f84fefe.3342c2"],["dcc948b1.39b848"]]},{"id":"474b0a53.0e8704","type":"inject","z":"b017d628.55b3e8","name":"Initialize","topic":"","payload":"{\"data\":14}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":160,"y":540,"wires":[["4bb7a7e8.cd7ac8"]]},{"id":"8cff73b2.bfb33","type":"inject","z":"b017d628.55b3e8","name":"Initialize","topic":"","payload":"{\"data\":12}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":162.5,"y":499.99998474121094,"wires":[["4bb7a7e8.cd7ac8"]]},{"id":"f7034479.77ad78","type":"inject","z":"b017d628.55b3e8","name":"Initialize","topic":"","payload":"{\"data\":16}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":156.25,"y":581.2499847412109,"wires":[["4bb7a7e8.cd7ac8"]]},{"id":"bfb9e188.cc1d2","type":"inject","z":"b017d628.55b3e8","name":"Initialize","topic":"","payload":"{\"data\":32}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":160,"y":620,"wires":[["4bb7a7e8.cd7ac8"]]},{"id":"8f92e81.7e64d18","type":"switch","z":"b017d628.55b3e8","name":"Decode Command","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"},{"t":"eq","v":"26","vt":"str"},{"t":"eq","v":"27","vt":"str"},{"t":"eq","v":"28","vt":"str"},{"t":"eq","v":"29","vt":"str"},{"t":"eq","v":"21","vt":"str"},{"t":"eq","v":"22","vt":"str"},{"t":"eq","v":"23","vt":"str"},{"t":"eq","v":"24","vt":"str"},{"t":"eq","v":"25","vt":"str"},{"t":"eq","v":"36","vt":"str"},{"t":"eq","v":"37","vt":"str"},{"t":"eq","v":"38","vt":"str"},{"t":"eq","v":"39","vt":"str"}],"checkall":"true","repair":false,"outputs":15,"x":433,"y":1021,"wires":[["c31ee352.76a14"],["d1906ff0.72ac1"],["4b61f68.e861708"],["4676a095.2cb8"],["f26b69c.bd29798"],["593cf221.80440c"],["e71db162.289fd","6d204247.e68f9c"],["cd48aee7.061c6","cce8a4c2.20b448"],["c5d144d.03e08b8","3a4f6f37.d5635"],["dd421c38.d24a1","ab4860bc.3457c"],["9a168896.79ba28"],["8bf13eb9.08803"],["285eb54b.e13f6a"],["f884f0b6.5dd04"],["71c3db0.8503c24"]]},{"id":"4b61f68.e861708","type":"function","z":"b017d628.55b3e8","name":"Start gripping","func":"msg.payload=\n{\n    \"msg\": \"Start gripping\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":695,"y":824,"wires":[["139fa86.a5ba658"]]},{"id":"4676a095.2cb8","type":"function","z":"b017d628.55b3e8","name":"Stop gripping","func":"msg.payload=\n{\n    \"msg\": \"Stop gripping\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":695,"y":864,"wires":[["139fa86.a5ba658"]]},{"id":"f26b69c.bd29798","type":"function","z":"b017d628.55b3e8","name":"Start releasing workpiece","func":"msg.payload=\n{\n    \"msg\": \"Start releasing workpiece\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":735,"y":904,"wires":[["139fa86.a5ba658"]]},{"id":"593cf221.80440c","type":"function","z":"b017d628.55b3e8","name":"Stop realeasing workpiece","func":"msg.payload=\n{\n    \"msg\": \"Stop realeasing workpiece\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":745,"y":944,"wires":[["139fa86.a5ba658"]]},{"id":"e71db162.289fd","type":"function","z":"b017d628.55b3e8","name":"Move to Sorting Line first Slide","func":"msg.payload=\n{\n    \"msg\": \"Move to Sorting Line first Slide\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":755,"y":984,"wires":[["139fa86.a5ba658"]]},{"id":"cd48aee7.061c6","type":"function","z":"b017d628.55b3e8","name":"Move to Sorting Line second Slide","func":"msg.payload=\n{\n    \"msg\": \"Move to Sorting Line second Slide\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":764,"y":1059,"wires":[["139fa86.a5ba658"]]},{"id":"c5d144d.03e08b8","type":"function","z":"b017d628.55b3e8","name":"Move to Sorting Line third Slide","func":"msg.payload=\n{\n    \"msg\": \"Move to SORTING LINE THIRD SLIDE\",\n    \"COMMAND\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":753,"y":1132,"wires":[["139fa86.a5ba658"]]},{"id":"dd421c38.d24a1","type":"function","z":"b017d628.55b3e8","name":"Move to high-bay warehouse","func":"msg.payload=\n{\n    \"msg\": \"Move to high-bay warehouse\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":741,"y":1207,"wires":[["139fa86.a5ba658"]]},{"id":"9a168896.79ba28","type":"function","z":"b017d628.55b3e8","name":"Position reached","func":"msg.payload=\n{\n    \"msg\": \"Position reached\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":711,"y":1280,"wires":[["139fa86.a5ba658"]]},{"id":"33a440ea.ae4b5","type":"inject","z":"b017d628.55b3e8","name":"Initialize","topic":"","payload":"{\"data\":34}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":160,"y":660,"wires":[["4bb7a7e8.cd7ac8"]]},{"id":"704ee1b4.88ab5","type":"ibmiot in","z":"b017d628.55b3e8","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"VacuumGripperMunich_2","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"VacuumGripperMunich_2","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":191,"y":459,"wires":[["24fa9821.534e98","4bb7a7e8.cd7ac8","62b022a.44e4edc"]]},{"id":"139fa86.a5ba658","type":"function","z":"b017d628.55b3e8","name":"add ts","func":"js_obj      = msg.payload;\n\nif ( !msg.timestamp ) msg.timestamp = Math.round(+new Date());\n\n//Define strings \nvar year_string= \"0\"; var month_string= \"0\"; var day_string= \"0\";\nvar hours_string= \"0\"; var mins_string= \"0\"; var secs_string= \"0\";\n\nvar dt = new Date(msg.timestamp);\n\nvar\tmonth =\t    dt.getMonth() + 1;\nvar day=        dt.getDate();\nvar year=\t\tdt.getFullYear();\nvar hours=      dt.getHours()+2;\nvar mins=       dt.getMinutes();\nvar secs=       dt.getSeconds();\nvar msecs=      dt.getMilliseconds();\nvar jstime=     dt.getTime();\n\n//The values should always have 2 digits. So check if they are greater than 10 and if not ad a 0 in front \nif (month<10) {\n  month_string= \"0\" + month.toString(10);\n} else { \n  month_string= month.toString(10);\n}\n\nif (day<10) {\n  day_string= \"0\" + day.toString(10);\n} else { \n  day_string= day.toString(10);\n}\n\nif (hours<10) {\n  hours_string= \"0\" + hours.toString(10);\n} else { \n  hours_string= hours.toString(10);\n}\n\nif (mins<10) {\n  mins_string= \"0\" + mins.toString(10);\n} else { \n  mins_string= mins.toString(10);\n}\n\nif (secs<10) {\n  secs_string= \"0\" + secs.toString(10);\n} else { \n  secs_string= secs.toString(10);\n}\n\nyear_string= year.toString(10);\n\njs_obj.time =day_string + \".\" + month_string+ \".\" + year_string + \"  \" +hours_string + \":\" + mins_string + \":\" + secs_string;\njs_obj.timestamp = jstime;\n\nmsg.payload = js_obj ;\n\nreturn msg;","outputs":1,"noerr":0,"x":1187,"y":1006,"wires":[["6950a6a0.bc9f88"]]},{"id":"387bb892.e0ba78","type":"template","z":"b017d628.55b3e8","name":"html","field":"payload","fieldType":"msg","format":"html","syntax":"mustache","template":"<table border=\"1\">\n    \n    \n    <thead>\n        <tr>\n            <th colspan=\"4\">{{topic}}</th>\n        </tr>\n    </thead>\n    \n    \n    <tr> \n        <th>.............................Message...............................</th>\n        <th>Command</th>\n        <th>...timestamp...</th>\n\n    </tr>\n    {{#payload}}\n        <tr class=\"\">\n            <td>{{msg}}</td>            \n            <td>{{command}}</td>\n            <td>{{time}}</td>\n        </tr>\n    {{/payload}}\n</table>\n","output":"str","x":1187,"y":1146,"wires":[["6d5405b7.440c3c"]]},{"id":"6950a6a0.bc9f88","type":"function","z":"b017d628.55b3e8","name":"Cr/Upd msg_events","func":"var msg_obj       = msg.payload ;\nvar arr_msgs = flow.get(\"msg_events\", 'memoryOnly');\n\nif (arr_msgs===undefined ) {\n    // Create an empty array if it does not exist yet\n    arr_msgs = [];\n    //arr_msgs.push(msg_obj) ; \n        if (msg_obj !== \"1\") {\n            arr_msgs.push(msg_obj);\n            flow.set(\"msg_events\",arr_msgs, 'memoryOnly');\n        }\n    \n//    return msg ;\n\n} else {\n        // This is a new user, save and return in the first port\n        if (msg_obj !== \"1\") {\n            arr_msgs.push(msg_obj);\n            flow.set(\"msg_events\",arr_msgs, 'memoryOnly');\n        }\n} \nmsg.payload = flow.get(\"msg_events\", 'memoryOnly');\nreturn msg;\n","outputs":1,"noerr":0,"x":1377,"y":1006,"wires":[["fb505194.8432b"]]},{"id":"583f2e12.cff22","type":"function","z":"b017d628.55b3e8","name":"topic & 10","func":"var arr = msg.payload ;\nvar i   = 10;\nif(typeof arr === undefined) {\n    return msg;\n} else {\n    msg.payload = arr.slice(0, 10);    \n    msg.topic = 'The Last Ten Messages :';\n    return msg;\n}","outputs":1,"noerr":0,"x":1377,"y":1086,"wires":[["387bb892.e0ba78"]]},{"id":"fb505194.8432b","type":"change","z":"b017d628.55b3e8","name":"sort","rules":[{"t":"set","p":"payload","pt":"msg","to":"($sort(payload,function($l , $r){$l.timestamp < $r.timestamp }) )","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1207,"y":1086,"wires":[["583f2e12.cff22"]]},{"id":"cb01bed1.121ff","type":"template","z":"c8561b10.574218","name":"Movement start","field":"payload.active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/green-dot.png","x":404,"y":302,"wires":[["9ecdc8b1.fed868"]]},{"id":"d02c67b.995f798","type":"template","z":"c8561b10.574218","name":"Movement stop","field":"payload.active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/grey-dot.png","x":404,"y":382,"wires":[["e6af1eea.da04a"]]},{"id":"9ecdc8b1.fed868","type":"switch","z":"c8561b10.574218","name":"determine axis","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"13","vt":"str"},{"t":"eq","v":"15","vt":"str"},{"t":"eq","v":"17","vt":"str"},{"t":"eq","v":"19","vt":"str"},{"t":"eq","v":"43","vt":"str"},{"t":"eq","v":"41","vt":"str"}],"checkall":"true","repair":false,"outputs":6,"x":624,"y":302,"wires":[["48c78a2d.c453d4"],["321e0e66.f83d22"],["6c5f26d8.30ade8"],["6c5f26d8.30ade8"],["7f415ca7.ac4964"],["3d3fd5e8.ecb7ba"]]},{"id":"e6af1eea.da04a","type":"switch","z":"c8561b10.574218","name":"determine axis","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"14","vt":"str"},{"t":"eq","v":"16","vt":"str"},{"t":"eq","v":"18","vt":"str"},{"t":"eq","v":"20","vt":"str"},{"t":"eq","v":"44","vt":"str"},{"t":"eq","v":"42","vt":"str"}],"checkall":"true","repair":false,"outputs":6,"x":624,"y":402,"wires":[["48c78a2d.c453d4"],["321e0e66.f83d22"],["6c5f26d8.30ade8"],["6c5f26d8.30ade8"],["7f415ca7.ac4964"],["3d3fd5e8.ecb7ba"]]},{"id":"b3105797.326b28","type":"inject","z":"c8561b10.574218","name":"Initialize","topic":"","payload":"{\"data\":16}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":164,"y":302,"wires":[["d02c67b.995f798"]]},{"id":"133cee8d.f3dd11","type":"inject","z":"c8561b10.574218","name":"Initialize","topic":"","payload":"{\"data\":14}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":164,"y":262,"wires":[["d02c67b.995f798"]]},{"id":"84f3464a.3a6b38","type":"inject","z":"c8561b10.574218","name":"Initialize","topic":"","payload":"{\"data\":18}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":164,"y":342,"wires":[["d02c67b.995f798"]]},{"id":"1d94e915.987f37","type":"switch","z":"c8561b10.574218","name":"Decode Command","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"},{"t":"eq","v":"21","vt":"str"},{"t":"eq","v":"22","vt":"str"},{"t":"eq","v":"25","vt":"str"},{"t":"eq","v":"26","vt":"str"},{"t":"eq","v":"23","vt":"str"},{"t":"eq","v":"24","vt":"str"},{"t":"eq","v":"29","vt":"str"},{"t":"eq","v":"30","vt":"str"},{"t":"eq","v":"51","vt":"str"},{"t":"eq","v":"52","vt":"str"},{"t":"eq","v":"53","vt":"str"},{"t":"eq","v":"54","vt":"str"},{"t":"eq","v":"56","vt":"str"},{"t":"eq","v":"57","vt":"str"},{"t":"eq","v":"58","vt":"str"},{"t":"eq","v":"59","vt":"str"}],"checkall":"true","repair":false,"outputs":18,"x":446.0000915527344,"y":819.0002784729004,"wires":[["daf9851c.3d79e8"],["c6f9fe62.d6e0a"],["6f75c80a.e4bd18"],["3c0e9b87.74a564"],["871f25a9.419ff8"],["2766373.cc8b7c8"],["f7c20ce5.5e4f"],["b0d2008b.1b59f"],["65bb0045.f0a41"],["920c688f.37f968"],["982d1b22.c69b18"],["11631ae.14fede5"],["94f7ca1c.046048"],["4fb04beb.c3dab4"],["76b67890.b98098"],["fa7c924d.2be9"],["9023763a.4391f8"],["aa59b67f.c5b478"]]},{"id":"644021fa.eb44","type":"inject","z":"c8561b10.574218","name":"Initialize","topic":"","payload":"{\"data\":20}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":164,"y":382,"wires":[["d02c67b.995f798"]]},{"id":"d843bf43.5652f","type":"inject","z":"c8561b10.574218","name":"Initialize","topic":"","payload":"{\"data\":44}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":164,"y":422,"wires":[["d02c67b.995f798"]]},{"id":"7bf91d90.79c0e4","type":"ibmiot in","z":"c8561b10.574218","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"WarehouseMunich_2","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"WarehouseMunich_2","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":151,"y":219,"wires":[["cb01bed1.121ff","d02c67b.995f798"]]},{"id":"389ac537.07d1aa","type":"ibmiot in","z":"c8561b10.574218","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"WarehouseMunich_2","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"WarehouseMunich_2","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":186.00009155273438,"y":819.0002784729004,"wires":[["1d94e915.987f37"]]},{"id":"c2f0cb03.637338","type":"inject","z":"c8561b10.574218","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":150,"y":120,"wires":[["651e494f.2ab158"]]},{"id":"d0772254.6a2ba","type":"function","z":"c8561b10.574218","name":"add time","func":"js_obj      = msg.payload;\n\nif ( !msg.timestamp ) msg.timestamp = Math.round(+new Date());\n\n//Define strings \nvar year_string= \"0\"; var month_string= \"0\"; var day_string= \"0\";\nvar hours_string= \"0\"; var mins_string= \"0\"; var secs_string= \"0\";\n\nvar dt = new Date(msg.timestamp);\n\nvar\tmonth =\t    dt.getMonth() + 1;\nvar day=        dt.getDate();\nvar year=\t\tdt.getFullYear();\nvar hours=      dt.getHours()+2;\nvar mins=       dt.getMinutes();\nvar secs=       dt.getSeconds();\nvar msecs=      dt.getMilliseconds();\nvar jstime=     dt.getTime();\n\n//The values should always have 2 digits. So check if they are greater than 10 and if not ad a 0 in front \nif (month<10) {\n  month_string= \"0\" + month.toString(10);\n} else { \n  month_string= month.toString(10);\n}\n\nif (day<10) {\n  day_string= \"0\" + day.toString(10);\n} else { \n  day_string= day.toString(10);\n}\n\nif (hours<10) {\n  hours_string= \"0\" + hours.toString(10);\n} else { \n  hours_string= hours.toString(10);\n}\n\nif (mins<10) {\n  mins_string= \"0\" + mins.toString(10);\n} else { \n  mins_string= mins.toString(10);\n}\n\nif (secs<10) {\n  secs_string= \"0\" + secs.toString(10);\n} else { \n  secs_string= secs.toString(10);\n}\n\nyear_string= year.toString(10);\n\njs_obj.time =day_string + \".\" + month_string+ \".\" + year_string + \"  \" +hours_string + \":\" + mins_string + \":\" + secs_string;\njs_obj.timestamp = jstime;\n\nmsg.payload = js_obj ;\n\nreturn msg;","outputs":1,"noerr":0,"x":1120,"y":820,"wires":[["44b0663b.db5f68"]]},{"id":"89576f38.17c6b","type":"template","z":"c8561b10.574218","name":"html","field":"payload","fieldType":"msg","format":"html","syntax":"mustache","template":"<table border=\"1\">\n    \n    \n    <thead>\n        <tr>\n            <th colspan=\"4\">{{topic}}</th>\n        </tr>\n    </thead>\n    \n    \n    <tr> \n        <th>.............................Message...............................</th>\n        <th>Command</th>\n        <th>...timestamp...</th>\n\n    </tr>\n    {{#payload}}\n        <tr class=\"\">\n            <td>{{msg}}</td>            \n            <td>{{command}}</td>\n            <td>{{time}}</td>\n        </tr>\n    {{/payload}}\n</table>\n","output":"str","x":1110,"y":960,"wires":[["b33bafb7.557f2"]]},{"id":"44b0663b.db5f68","type":"function","z":"c8561b10.574218","name":"Cr/Upd msg_events","func":"var msg_obj       = msg.payload ;\nvar arr_msgs = flow.get(\"msg_events\", 'memoryOnly');\n\nif (arr_msgs===undefined ) {\n    // Create an empty array if it does not exist yet\n    arr_msgs = [];\n    //arr_msgs.push(msg_obj) ; \n        if (msg_obj !== \"1\") {\n            arr_msgs.push(msg_obj);\n            flow.set(\"msg_events\",arr_msgs, 'memoryOnly');\n        }\n    \n//    return msg ;\n\n} else {\n        // This is a new user, save and return in the first port\n        if (msg_obj !== \"1\") {\n            arr_msgs.push(msg_obj);\n            flow.set(\"msg_events\",arr_msgs, 'memoryOnly');\n        }\n} \nmsg.payload = flow.get(\"msg_events\", 'memoryOnly');\nreturn msg;\n","outputs":1,"noerr":0,"x":1300,"y":820,"wires":[["bb8bd638.3b54d8"]]},{"id":"e4c09052.6b3ee","type":"function","z":"c8561b10.574218","name":"topic & 10","func":"var arr = msg.payload ;\nvar i   = 10;\nif(typeof arr === undefined) {\n    return msg;\n} else {\n    msg.payload = arr.slice(0, 10);    \n    msg.topic = 'The Last Ten Messages :';\n    return msg;\n}","outputs":1,"noerr":0,"x":1300,"y":900,"wires":[["89576f38.17c6b"]]},{"id":"bb8bd638.3b54d8","type":"change","z":"c8561b10.574218","name":"sort","rules":[{"t":"set","p":"payload","pt":"msg","to":"($sort(payload,function($l , $r){$l.timestamp < $r.timestamp }) )","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1130,"y":900,"wires":[["e4c09052.6b3ee"]]},{"id":"dfbe1fb5.9450b","type":"comment","z":"c8561b10.574218","name":"","info":"Display of sensor Values:\n    -show if the crane is moving in one direction\n    -show the state of the light barriers","x":384.01300048828125,"y":260.34387016296387,"wires":[]},{"id":"3d83b737.c7aac8","type":"comment","z":"523571ab.a711b","name":"----------- Creating an event log of all incoming evens ----------","info":"First incoming events are decoded (the meaning of the numbers is added). \nThen the values are stored in an event log and the last 10 enties are displayed in the dashboard.","x":340,"y":560,"wires":[]},{"id":"5c27d6a0.c05078","type":"comment","z":"523571ab.a711b","name":"---------- Store the NFC Id of every Workpiece which is travelling under the NFC Reader","info":"If a new NFC tag has been recognised, the name of the workpiece (e.g. red workpiece n2) is added to the message. Then the 2 values (name and NFC_ID) are displayed in the dasboard.","x":420,"y":1400,"wires":[]},{"id":"3e2e4aa8.09b496","type":"comment","z":"f04e2126.57d3","name":"---------- Display the current sensor values of the Sorting Line ----------","info":"The next nodes display some sensor values of the vacuum gripper. E.g. when the crane is moving in one direction, this should be shown with a green dot.\n\nThe display is always initialised as NOT active","x":300,"y":400,"wires":[]},{"id":"622bea00.e26224","type":"comment","z":"f04e2126.57d3","name":"----------- Create the event log for the sorting line ----------","info":"First incoming events are decoded (the meaning of the numbers is added). \nThen the values are stored in an event log and the last 10 enties are displayed in the dashboard.\n\nAdditionaly when the crane sends it's next destination, this one is stored in the global variables","x":280,"y":940,"wires":[]},{"id":"358eead3.e139e6","type":"comment","z":"d5f5f57.d049b08","name":"----------- Display the current state of the processing station -----------","info":"The next nodes display some sensor values of the vacuum gripper. E.g. when the crane is moving in one direction, this should be shown with a green dot.\n\nThe display is always initialised as NOT active","x":320,"y":180,"wires":[]},{"id":"5944161e.693608","type":"comment","z":"d5f5f57.d049b08","name":"---------- Creating the event log for the processing station ------------","info":"First incoming events are decoded (the meaning of the numbers is added). \nThen the values are stored in an event log and the last 10 enties are displayed in the dashboard.\n\nAdditionaly when the crane sends it's next destination, this one is stored in the global variables","x":310,"y":800,"wires":[]},{"id":"5064be7a.0c84c","type":"comment","z":"5c83a1e8.ad766","name":"----------- Display the pressure of the gripper -----------","info":"The pressure sensor sends it's values in regular intervals. These values should be displayed in a chart, which is done by the following nodes.","x":279,"y":1559,"wires":[]},{"id":"6e090ace.e54344","type":"ibmiot in","z":"5c83a1e8.ad766","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"Pressure_Sensor","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Pressure_Sensor","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":180,"y":1600,"wires":[["61bebec0.446b8"]]},{"id":"61bebec0.446b8","type":"change","z":"5c83a1e8.ad766","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.data","tot":"msg"},{"t":"set","p":"topic","pt":"msg","to":"Pressure Value (hPa)","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":1600,"wires":[["1f48e3e4.72e3ac"]]},{"id":"3b3fe955.270966","type":"inject","z":"ffdb110f.35e53","name":"Initialise","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":160,"y":120,"wires":[["b5592efe.f8e09"]]},{"id":"b5592efe.f8e09","type":"change","z":"ffdb110f.35e53","name":"Set initial values to warehouse","rules":[{"t":"set","p":"warehouse2","pt":"global","to":"{\"stock\":{\"position_11\":{\"workpiece\":\"\",\"nfc_id\":\"\"},\"position_12\":{\"workpiece\":\"\",\"nfc_id\":\"\"},\"position_13\":{\"workpiece\":\"\",\"nfc_id\":\"\"},\"position_21\":{\"workpiece\":\"\",\"nfc_id\":\"\"},\"position_22\":{\"workpiece\":\"\",\"nfc_id\":\"\"},\"position_23\":{\"workpiece\":\"\",\"nfc_id\":\"\"},\"position_31\":{\"workpiece\":\"\",\"nfc_id\":\"\"},\"position_32\":{\"workpiece\":\"\",\"nfc_id\":\"\"},\"position_33\":{\"workpiece\":\"\",\"nfc_id\":\"\"}},\"commands\":{\"position_1\":\"\",\"position_2\":\"\",\"position_3\":\"\",\"position_4\":\"\",\"position_5\":\"\",\"position_6\":\"\",\"position_7\":\"\",\"position_8\":\"\",\"position_9\":\"\"},\"available\":false,\"destination\":\"\",\"current_workpiece\":{}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":120,"wires":[[]]},{"id":"4039e609.626f48","type":"switch","z":"ffdb110f.35e53","name":"Pos 11","property":"warehouse2.stock.position_11.workpiece","propertyType":"global","rules":[{"t":"cont","v":"payload","vt":"msg"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":410,"y":360,"wires":[["5d30ae16.e3121"],["4af2537f.dacffc"]]},{"id":"4af2537f.dacffc","type":"switch","z":"ffdb110f.35e53","name":"Pos 12","property":"warehouse2.stock.position_12.workpiece","propertyType":"global","rules":[{"t":"cont","v":"payload","vt":"msg"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":410,"y":400,"wires":[["6c1208fb.24d4b8"],["f8b70fe5.00c8b"]]},{"id":"f8b70fe5.00c8b","type":"switch","z":"ffdb110f.35e53","name":"Pos 13","property":"warehouse2.stock.position_13.workpiece","propertyType":"global","rules":[{"t":"cont","v":"payload","vt":"msg"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":410,"y":440,"wires":[["5ecff4e0.7bc57c"],["7769b6b.5fc7348"]]},{"id":"7769b6b.5fc7348","type":"switch","z":"ffdb110f.35e53","name":"Pos 21","property":"warehouse2.stock.position_21.workpiece","propertyType":"global","rules":[{"t":"cont","v":"payload","vt":"msg"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":410,"y":500,"wires":[["6df1d175.89351"],["8cf1c2e6.d3615"]]},{"id":"8cf1c2e6.d3615","type":"switch","z":"ffdb110f.35e53","name":"Pos 22","property":"warehouse2.stock.position_22.workpiece","propertyType":"global","rules":[{"t":"cont","v":"payload","vt":"msg"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":410,"y":540,"wires":[["1b0de9bf.965266"],["b77fc87a.3a2858"]]},{"id":"b77fc87a.3a2858","type":"switch","z":"ffdb110f.35e53","name":"Pos 23","property":"warehouse2.stock.position_23.workpiece","propertyType":"global","rules":[{"t":"cont","v":"payload","vt":"msg"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":410,"y":580,"wires":[["c856717d.8c8f2"],["604cceb8.2566b"]]},{"id":"604cceb8.2566b","type":"switch","z":"ffdb110f.35e53","name":"Pos 31","property":"warehouse2.stock.position_31.workpiece","propertyType":"global","rules":[{"t":"cont","v":"payload","vt":"msg"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":410,"y":640,"wires":[["3a6193d3.87989c"],["8a506abb.3bbf78"]]},{"id":"8a506abb.3bbf78","type":"switch","z":"ffdb110f.35e53","name":"Pos 32","property":"warehouse2.stock.position_32.workpiece","propertyType":"global","rules":[{"t":"cont","v":"payload","vt":"msg"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":410,"y":680,"wires":[["d67d1d18.5f55a"],["fd620a2f.005408"]]},{"id":"fd620a2f.005408","type":"switch","z":"ffdb110f.35e53","name":"Pos 33","property":"warehouse2.stock.position_33.workpiece","propertyType":"global","rules":[{"t":"cont","v":"payload","vt":"msg"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":410,"y":720,"wires":[["58087368.d10ebc"],["5f6e9cce.f79d04"]]},{"id":"78040a1e.f49e44","type":"function","z":"ffdb110f.35e53","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 11\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":360,"wires":[["4c6add38.5ad764"]]},{"id":"cdc36e91.7c94a","type":"function","z":"ffdb110f.35e53","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 12\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":400,"wires":[["4c6add38.5ad764"]]},{"id":"1a7a7960.601387","type":"function","z":"ffdb110f.35e53","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 13\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":440,"wires":[["4c6add38.5ad764"]]},{"id":"4c6add38.5ad764","type":"ibmiot out","z":"ffdb110f.35e53","authentication":"apiKey","apiKey":"6b68196b.a83528","outputType":"cmd","deviceId":"WarehouseMunich_2","deviceType":"0.20.7","eventCommandType":"command","format":"json","data":"{}","qos":0,"name":"WarehouseMunich_2","service":"registered","x":1060,"y":540,"wires":[]},{"id":"5d30ae16.e3121","type":"change","z":"ffdb110f.35e53","name":"","rules":[{"t":"set","p":"warehouse2.take_out","pt":"global","to":"position_11","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":575,"y":360,"wires":[["78040a1e.f49e44"]],"l":false},{"id":"6c1208fb.24d4b8","type":"change","z":"ffdb110f.35e53","name":"","rules":[{"t":"set","p":"warehouse2.take_out","pt":"global","to":"position_12","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":575,"y":400,"wires":[["cdc36e91.7c94a"]],"l":false},{"id":"5ecff4e0.7bc57c","type":"change","z":"ffdb110f.35e53","name":"","rules":[{"t":"set","p":"warehouse2.take_out","pt":"global","to":"position_13","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":575,"y":440,"wires":[["1a7a7960.601387"]],"l":false},{"id":"bc6a351d.b33648","type":"function","z":"ffdb110f.35e53","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 14\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":500,"wires":[["4c6add38.5ad764"]]},{"id":"7e2ec339.98b83c","type":"function","z":"ffdb110f.35e53","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 15\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":540,"wires":[["4c6add38.5ad764"]]},{"id":"a9a4ead8.1756a8","type":"function","z":"ffdb110f.35e53","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 16\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":580,"wires":[["4c6add38.5ad764"]]},{"id":"6df1d175.89351","type":"change","z":"ffdb110f.35e53","name":"","rules":[{"t":"set","p":"warehouse2.take_out","pt":"global","to":"position_21","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":575,"y":500,"wires":[["bc6a351d.b33648"]],"l":false},{"id":"1b0de9bf.965266","type":"change","z":"ffdb110f.35e53","name":"","rules":[{"t":"set","p":"warehouse2.take_out","pt":"global","to":"position_22","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":575,"y":540,"wires":[["7e2ec339.98b83c"]],"l":false},{"id":"c856717d.8c8f2","type":"change","z":"ffdb110f.35e53","name":"","rules":[{"t":"set","p":"warehouse2.take_out","pt":"global","to":"position_23","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":575,"y":580,"wires":[["a9a4ead8.1756a8"]],"l":false},{"id":"9a5f2a92.6f5868","type":"function","z":"ffdb110f.35e53","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 17\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":640,"wires":[["4c6add38.5ad764"]]},{"id":"b3074dc2.6976c","type":"function","z":"ffdb110f.35e53","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 18\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":680,"wires":[["4c6add38.5ad764"]]},{"id":"60064a93.5c6c34","type":"function","z":"ffdb110f.35e53","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 19\n}\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":720,"wires":[["4c6add38.5ad764"]]},{"id":"3a6193d3.87989c","type":"change","z":"ffdb110f.35e53","name":"","rules":[{"t":"set","p":"warehouse2.take_out","pt":"global","to":"position_31","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":575,"y":640,"wires":[["9a5f2a92.6f5868"]],"l":false},{"id":"d67d1d18.5f55a","type":"change","z":"ffdb110f.35e53","name":"","rules":[{"t":"set","p":"warehouse2.take_out","pt":"global","to":"position_32","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":575,"y":680,"wires":[["b3074dc2.6976c"]],"l":false},{"id":"58087368.d10ebc","type":"change","z":"ffdb110f.35e53","name":"","rules":[{"t":"set","p":"warehouse2.take_out","pt":"global","to":"position_33","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":575,"y":720,"wires":[["60064a93.5c6c34"]],"l":false},{"id":"f9f652ef.0d011","type":"inject","z":"ffdb110f.35e53","name":"Read Warehouse Content","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":190,"y":260,"wires":[["f438daab.991ef8"]]},{"id":"f438daab.991ef8","type":"change","z":"ffdb110f.35e53","name":"get Josn Object","rules":[{"t":"set","p":"payload","pt":"msg","to":"warehouse2","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":260,"wires":[["1f79a226.4edfce"]]},{"id":"1f79a226.4edfce","type":"debug","z":"ffdb110f.35e53","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":570,"y":260,"wires":[]},{"id":"c191f455.e060f8","type":"comment","z":"ffdb110f.35e53","name":"----------- Read the Stock of Warehouse 2 ----------","info":"The following nodes can be usd for debugging. When injecting a message using the 'Read Warehouse Node' the current values stored by the MES are emitted in the debugging window","x":260,"y":220,"wires":[]},{"id":"74db5f54.f1f16","type":"comment","z":"ffdb110f.35e53","name":"----------- NOT IN USE YET ----------","info":"can be used to deliver workpieces","x":220,"y":320,"wires":[]},{"id":"238b6b2e.5fa9b4","type":"ibmiot out","z":"b017d628.55b3e8","authentication":"apiKey","apiKey":"6b68196b.a83528","outputType":"cmd","deviceId":"VacuumGripperMunich_2","deviceType":"0.20.7","eventCommandType":"command","format":"json","data":"{}","qos":0,"name":"VacuumGripperMunich_2","service":"registered","x":1170,"y":2720,"wires":[]},{"id":"5278780a.fe5728","type":"comment","z":"ffdb110f.35e53","name":"----------- Select Position for incoming Workiece ----------","info":"If a workpiece is delivered by the vacuum gripper, the warehouse has to check for free positions. It therefore starts at position 11 and if the position is not free, it continues to the next one. If it finds no more free postion (warehouse is full) an error message should be deployed.\nIf a free position is found a comman is send to the warehouse","x":278,"y":1416,"wires":[]},{"id":"ec932b3a.d36eb8","type":"switch","z":"ffdb110f.35e53","name":"Pos 11","property":"warehouse2.stock.position_11.workpiece","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":628,"y":1491,"wires":[["93fc2cef.29dca"],["65b951b7.3f024"]]},{"id":"65b951b7.3f024","type":"switch","z":"ffdb110f.35e53","name":"Pos 12","property":"warehouse2.stock.position_12.workpiece","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":628,"y":1536,"wires":[["242e1d22.afe522"],["cb0090c.27be07"]]},{"id":"cb0090c.27be07","type":"switch","z":"ffdb110f.35e53","name":"Pos 13","property":"warehouse2.stock.position_13.workpiece","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":628,"y":1576,"wires":[["cccf84e6.2539c8"],["c43d895a.a58d38"]]},{"id":"c43d895a.a58d38","type":"switch","z":"ffdb110f.35e53","name":"Pos 21","property":"warehouse2.stock.position_21.workpiece","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":628,"y":1636,"wires":[["1db6f1eb.9081de"],["afc0cece.ea95"]]},{"id":"afc0cece.ea95","type":"switch","z":"ffdb110f.35e53","name":"Pos 22","property":"warehouse2.stock.position_22.workpiece","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":628,"y":1676,"wires":[["e084b664.1ad2e8"],["54b4f47f.3e577c"]]},{"id":"54b4f47f.3e577c","type":"switch","z":"ffdb110f.35e53","name":"Pos 23","property":"warehouse2.stock.position_23.workpiece","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":628,"y":1716,"wires":[["df279244.4c2f4"],["b86a7286.8400c"]]},{"id":"b86a7286.8400c","type":"switch","z":"ffdb110f.35e53","name":"Pos 31","property":"warehouse2.stock.position_31.workpiece","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":628,"y":1776,"wires":[["9620f953.716428"],["72e6233c.fec0dc"]]},{"id":"72e6233c.fec0dc","type":"switch","z":"ffdb110f.35e53","name":"Pos 32","property":"warehouse2.stock.position_32.workpiece","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":628,"y":1816,"wires":[["dbb01525.930508"],["9ab96ea0.cffb1"]]},{"id":"9ab96ea0.cffb1","type":"switch","z":"ffdb110f.35e53","name":"Pos 33","property":"warehouse2.stock.position_33.workpiece","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":628,"y":1856,"wires":[["44cf3213.7b21fc"],["2edc8cba.d9fb74"]]},{"id":"25e5990a.e9bab6","type":"function","z":"ffdb110f.35e53","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 1\n}\nreturn msg;","outputs":1,"noerr":0,"x":1048,"y":1491,"wires":[["472acecc.6204a"]]},{"id":"81763428.8397c8","type":"function","z":"ffdb110f.35e53","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 2\n}\nreturn msg;","outputs":1,"noerr":0,"x":1048,"y":1531,"wires":[["472acecc.6204a"]]},{"id":"a3887c0e.937e","type":"function","z":"ffdb110f.35e53","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 3\n}\nreturn msg;","outputs":1,"noerr":0,"x":1048,"y":1571,"wires":[["472acecc.6204a"]]},{"id":"472acecc.6204a","type":"ibmiot out","z":"ffdb110f.35e53","authentication":"apiKey","apiKey":"6b68196b.a83528","outputType":"cmd","deviceId":"WarehouseMunich_2","deviceType":"0.20.7","eventCommandType":"command","format":"json","data":"{}","qos":0,"name":"WarehouseMunich_2","service":"registered","x":1298,"y":1676,"wires":[]},{"id":"93fc2cef.29dca","type":"change","z":"ffdb110f.35e53","name":"Save destination","rules":[{"t":"set","p":"warehouse2.destination","pt":"global","to":"position_11","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":848,"y":1491,"wires":[["25e5990a.e9bab6"]]},{"id":"927dec8d.c44bd","type":"function","z":"ffdb110f.35e53","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 4\n}\nreturn msg;","outputs":1,"noerr":0,"x":1048,"y":1631,"wires":[["472acecc.6204a"]]},{"id":"3e239480.06865c","type":"function","z":"ffdb110f.35e53","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 5\n}\nreturn msg;","outputs":1,"noerr":0,"x":1048,"y":1671,"wires":[["472acecc.6204a"]]},{"id":"dcc5d8e1.5b2688","type":"function","z":"ffdb110f.35e53","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 6\n}\nreturn msg;","outputs":1,"noerr":0,"x":1048,"y":1711,"wires":[["472acecc.6204a"]]},{"id":"aff5929a.7768f","type":"function","z":"ffdb110f.35e53","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 7\n}\nreturn msg;","outputs":1,"noerr":0,"x":1048,"y":1771,"wires":[["472acecc.6204a"]]},{"id":"1d9eaade.401375","type":"function","z":"ffdb110f.35e53","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 8\n}\nreturn msg;","outputs":1,"noerr":0,"x":1048,"y":1811,"wires":[["472acecc.6204a"]]},{"id":"3a2edf11.514de","type":"function","z":"ffdb110f.35e53","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 9\n}\nreturn msg;","outputs":1,"noerr":0,"x":1048,"y":1851,"wires":[["472acecc.6204a"]]},{"id":"e96dc53.3eddb38","type":"comment","z":"ffdb110f.35e53","name":"Check the next free Storage Position","info":"","x":638,"y":1456,"wires":[]},{"id":"c4cf81e1.2a627","type":"ibmiot in","z":"ffdb110f.35e53","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"WarehouseMunich_2","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"WarehouseMunich_2","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":241,"y":1096,"wires":[["383ec1e5.97b3ce"]]},{"id":"383ec1e5.97b3ce","type":"switch","z":"ffdb110f.35e53","name":"Switch","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"30","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":431,"y":1096,"wires":[["a100a6c.a234158"]]},{"id":"56cd9b55.227ca4","type":"function","z":"ffdb110f.35e53","name":"send command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 8,\n    \"timestamp\": 1351824120,\n    \"command\": 11\n}\nreturn msg;","outputs":1,"noerr":0,"x":821,"y":1096,"wires":[["9e571ab1.574ca8"]]},{"id":"950ef5f8.662158","type":"ibmiot in","z":"ffdb110f.35e53","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"VacuumGripperMunich_2","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"VacuumGripperMunich_2","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":251,"y":1144,"wires":[["4111b506.64630c"]]},{"id":"4111b506.64630c","type":"switch","z":"ffdb110f.35e53","name":"Switch","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"29","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":432,"y":1145,"wires":[["faa356dd.cd74e8"]]},{"id":"67bc8567.dfa28c","type":"function","z":"ffdb110f.35e53","name":"send command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 21\n}\nreturn msg;","outputs":1,"noerr":0,"x":821,"y":1144,"wires":[["a1912d0e.d68b1"]]},{"id":"a1912d0e.d68b1","type":"ibmiot out","z":"ffdb110f.35e53","authentication":"apiKey","apiKey":"6b68196b.a83528","outputType":"cmd","deviceId":"WarehouseMunich_2","deviceType":"0.20.7","eventCommandType":"command","format":"json","data":"{}","qos":0,"name":"WarehouseMunich_2","service":"registered","x":1041,"y":1144,"wires":[]},{"id":"9e571ab1.574ca8","type":"ibmiot out","z":"ffdb110f.35e53","authentication":"apiKey","apiKey":"6b68196b.a83528","outputType":"cmd","deviceId":"VacuumGripperMunich_2","deviceType":"0.20.7","eventCommandType":"command","format":"json","data":"{}","qos":0,"name":"VacuumGripperMunich_2","service":"registered","x":1051,"y":1095,"wires":[]},{"id":"a100a6c.a234158","type":"change","z":"ffdb110f.35e53","name":"Delete msg content","rules":[{"t":"set","p":"topic","pt":"msg","to":"\"\"","tot":"str"},{"t":"delete","p":"deviceId","pt":"msg"},{"t":"delete","p":"deviceType","pt":"msg"},{"t":"delete","p":"eventType","pt":"msg"},{"t":"delete","p":"format","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":611,"y":1096,"wires":[["56cd9b55.227ca4"]]},{"id":"faa356dd.cd74e8","type":"change","z":"ffdb110f.35e53","name":"Delete msg content","rules":[{"t":"set","p":"topic","pt":"msg","to":"\"\"","tot":"str"},{"t":"delete","p":"deviceId","pt":"msg"},{"t":"delete","p":"deviceType","pt":"msg"},{"t":"delete","p":"eventType","pt":"msg"},{"t":"delete","p":"format","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":611,"y":1144,"wires":[["67bc8567.dfa28c"]]},{"id":"c510946b.8250d8","type":"comment","z":"ffdb110f.35e53","name":"----------- Connect the Vaccum Gripper to the Warehouse ---------","info":"The following flows are responsible for the interaction between warehouse 2 and vacuum gripper 2.","x":311,"y":1019,"wires":[]},{"id":"5c7ba4c8.34778c","type":"inject","z":"fab27939.ff21e8","name":"Initialise","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":160,"y":108,"wires":[["283a17f3.7b78f8"]]},{"id":"8d100229.69ec4","type":"comment","z":"fab27939.ff21e8","name":"---------- Set the initial Values of Warehouse 1 ----------","info":"The MES system stores his information in gloabal vaiables. After a restart of the MES (be this after a new deployment of the Node-RED or after a reset command) the values should be reset (bring them to an initial state)","x":290,"y":68,"wires":[]},{"id":"283a17f3.7b78f8","type":"change","z":"fab27939.ff21e8","name":"Set initial values to warehouse","rules":[{"t":"set","p":"warehouse1","pt":"global","to":"{\"stock\":{\"position_11\":{\"workpiece\":\"White\",\"nfc_id\":\"\"},\"position_12\":{\"workpiece\":\"White\",\"nfc_id\":\"\"},\"position_13\":{\"workpiece\":\"White\",\"nfc_id\":\"\"},\"position_21\":{\"workpiece\":\"Red\",\"nfc_id\":\"\"},\"position_22\":{\"workpiece\":\"Red\",\"nfc_id\":\"\"},\"position_23\":{\"workpiece\":\"Red\",\"nfc_id\":\"\"},\"position_31\":{\"workpiece\":\"Blue\",\"nfc_id\":\"\"},\"position_32\":{\"workpiece\":\"Blue\",\"nfc_id\":\"\"},\"position_33\":{\"workpiece\":\"Blue\",\"nfc_id\":\"\"}},\"commands\":{\"current_command\":\"\",\"position_1\":\"\",\"position_2\":\"\",\"position_3\":\"\",\"position_4\":\"\",\"position_5\":\"\",\"position_6\":\"\",\"position_7\":\"\",\"position_8\":\"\",\"position_9\":\"\"},\"available\":false,\"take_out\":\"\",\"current_workpiece\":{}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":108,"wires":[[]]},{"id":"142f349.d0251cb","type":"switch","z":"fab27939.ff21e8","name":"Pos 11","property":"warehouse1.stock.position_11.workpiece","propertyType":"global","rules":[{"t":"cont","v":"payload","vt":"msg"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":696,"y":878,"wires":[["e2031856.b0c788"],["16f3827f.fff16e"]]},{"id":"16f3827f.fff16e","type":"switch","z":"fab27939.ff21e8","name":"Pos 12","property":"warehouse1.stock.position_12.workpiece","propertyType":"global","rules":[{"t":"cont","v":"payload","vt":"msg"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":696,"y":918,"wires":[["1cf001d5.5e317e"],["2792f661.1f861a"]]},{"id":"2792f661.1f861a","type":"switch","z":"fab27939.ff21e8","name":"Pos 13","property":"warehouse1.stock.position_13.workpiece","propertyType":"global","rules":[{"t":"cont","v":"payload","vt":"msg"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":696,"y":958,"wires":[["d824ac4d.d770b"],["bde02519.44b348"]]},{"id":"bde02519.44b348","type":"switch","z":"fab27939.ff21e8","name":"Pos 21","property":"warehouse1.stock.position_21.workpiece","propertyType":"global","rules":[{"t":"cont","v":"payload","vt":"msg"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":696,"y":1018,"wires":[["88cf21e6.678"],["88cd0425.f66788"]]},{"id":"88cd0425.f66788","type":"switch","z":"fab27939.ff21e8","name":"Pos 22","property":"warehouse1.stock.position_22.workpiece","propertyType":"global","rules":[{"t":"cont","v":"payload","vt":"msg"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":696,"y":1058,"wires":[["2735519e.8533ae"],["53f12ace.643154"]]},{"id":"53f12ace.643154","type":"switch","z":"fab27939.ff21e8","name":"Pos 23","property":"warehouse1.stock.position_23.workpiece","propertyType":"global","rules":[{"t":"cont","v":"payload","vt":"msg"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":696,"y":1098,"wires":[["6be3bd88.c75044"],["20475b3.6e692a4"]]},{"id":"20475b3.6e692a4","type":"switch","z":"fab27939.ff21e8","name":"Pos 31","property":"warehouse1.stock.position_31.workpiece","propertyType":"global","rules":[{"t":"cont","v":"payload","vt":"msg"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":696,"y":1158,"wires":[["2c67cca3.8af534"],["bcf9ffda.5c16b"]]},{"id":"bcf9ffda.5c16b","type":"switch","z":"fab27939.ff21e8","name":"Pos 32","property":"warehouse1.stock.position_32.workpiece","propertyType":"global","rules":[{"t":"cont","v":"payload","vt":"msg"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":696,"y":1198,"wires":[["30443c5d.afab64"],["aff1da22.682c58"]]},{"id":"aff1da22.682c58","type":"switch","z":"fab27939.ff21e8","name":"Pos 33","property":"warehouse1.stock.position_33.workpiece","propertyType":"global","rules":[{"t":"cont","v":"payload","vt":"msg"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":696,"y":1238,"wires":[["71bbd8db.be9098"],["bb6bc7e8.bb3ba8"]]},{"id":"c59145ad.6d42a8","type":"function","z":"fab27939.ff21e8","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 2,\n    \"timestamp\": 1351824120,\n    \"command\": 11\n}\nreturn msg;","outputs":1,"noerr":0,"x":1076,"y":878,"wires":[["14cef21b.4d556e"]]},{"id":"c47b075c.72e098","type":"function","z":"fab27939.ff21e8","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 2,\n    \"timestamp\": 1351824120,\n    \"command\": 12\n}\nreturn msg;","outputs":1,"noerr":0,"x":1076,"y":918,"wires":[["14cef21b.4d556e"]]},{"id":"dd84ebb8.ffce28","type":"function","z":"fab27939.ff21e8","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 2,\n    \"timestamp\": 1351824120,\n    \"command\": 13\n}\nreturn msg;","outputs":1,"noerr":0,"x":1076,"y":958,"wires":[["14cef21b.4d556e"]]},{"id":"14cef21b.4d556e","type":"ibmiot out","z":"fab27939.ff21e8","authentication":"apiKey","apiKey":"6b68196b.a83528","outputType":"cmd","deviceId":"WarehouseMunich_1","deviceType":"0.20.7","eventCommandType":"command","format":"json","data":"{}","qos":0,"name":"WarehouseMunich_1","service":"registered","x":1350.0000076293945,"y":1058.0000038146973,"wires":[]},{"id":"e2031856.b0c788","type":"change","z":"fab27939.ff21e8","name":"","rules":[{"t":"set","p":"warehouse1.take_out","pt":"global","to":"position_11","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":861,"y":878,"wires":[["c59145ad.6d42a8","4404a09c.c51fc"]],"l":false},{"id":"1cf001d5.5e317e","type":"change","z":"fab27939.ff21e8","name":"","rules":[{"t":"set","p":"warehouse1.take_out","pt":"global","to":"position_12","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":861,"y":918,"wires":[["c47b075c.72e098","4404a09c.c51fc"]],"l":false},{"id":"d824ac4d.d770b","type":"change","z":"fab27939.ff21e8","name":"","rules":[{"t":"set","p":"warehouse1.take_out","pt":"global","to":"position_13","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":861,"y":958,"wires":[["dd84ebb8.ffce28","4404a09c.c51fc"]],"l":false},{"id":"6e19f156.2c633","type":"function","z":"fab27939.ff21e8","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 2,\n    \"timestamp\": 1351824120,\n    \"command\": 14\n}\nreturn msg;","outputs":1,"noerr":0,"x":1076,"y":1018,"wires":[["14cef21b.4d556e"]]},{"id":"1b1b0b5b.30ff75","type":"function","z":"fab27939.ff21e8","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 2,\n    \"timestamp\": 1351824120,\n    \"command\": 15\n}\nreturn msg;","outputs":1,"noerr":0,"x":1076,"y":1058,"wires":[["14cef21b.4d556e"]]},{"id":"612c3028.fcb51","type":"function","z":"fab27939.ff21e8","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 2,\n    \"timestamp\": 1351824120,\n    \"command\": 16\n}\nreturn msg;","outputs":1,"noerr":0,"x":1076,"y":1098,"wires":[["14cef21b.4d556e"]]},{"id":"88cf21e6.678","type":"change","z":"fab27939.ff21e8","name":"","rules":[{"t":"set","p":"warehouse1.take_out","pt":"global","to":"position_21","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":861,"y":1018,"wires":[["6e19f156.2c633","4404a09c.c51fc"]],"l":false},{"id":"2735519e.8533ae","type":"change","z":"fab27939.ff21e8","name":"","rules":[{"t":"set","p":"warehouse1.take_out","pt":"global","to":"position_22","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":861,"y":1058,"wires":[["1b1b0b5b.30ff75","4404a09c.c51fc"]],"l":false},{"id":"6be3bd88.c75044","type":"change","z":"fab27939.ff21e8","name":"","rules":[{"t":"set","p":"warehouse1.take_out","pt":"global","to":"position_23","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":861,"y":1098,"wires":[["612c3028.fcb51","4404a09c.c51fc"]],"l":false},{"id":"659c0a53.2fe454","type":"function","z":"fab27939.ff21e8","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 2,\n    \"timestamp\": 1351824120,\n    \"command\": 17\n}\nreturn msg;","outputs":1,"noerr":0,"x":1076,"y":1158,"wires":[["14cef21b.4d556e"]]},{"id":"4f705482.d0589c","type":"function","z":"fab27939.ff21e8","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 2,\n    \"timestamp\": 1351824120,\n    \"command\": 18\n}\nreturn msg;","outputs":1,"noerr":0,"x":1076,"y":1198,"wires":[["14cef21b.4d556e"]]},{"id":"324c0832.0e3af8","type":"function","z":"fab27939.ff21e8","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 2,\n    \"timestamp\": 1351824120,\n    \"command\": 19\n}\nreturn msg;","outputs":1,"noerr":0,"x":1076,"y":1238,"wires":[["14cef21b.4d556e"]]},{"id":"2c67cca3.8af534","type":"change","z":"fab27939.ff21e8","name":"","rules":[{"t":"set","p":"warehouse1.take_out","pt":"global","to":"position_31","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":861,"y":1158,"wires":[["659c0a53.2fe454","4404a09c.c51fc"]],"l":false},{"id":"30443c5d.afab64","type":"change","z":"fab27939.ff21e8","name":"","rules":[{"t":"set","p":"warehouse1.take_out","pt":"global","to":"position_32","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":861,"y":1198,"wires":[["4f705482.d0589c","4404a09c.c51fc"]],"l":false},{"id":"71bbd8db.be9098","type":"change","z":"fab27939.ff21e8","name":"","rules":[{"t":"set","p":"warehouse1.take_out","pt":"global","to":"position_33","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":861,"y":1238,"wires":[["324c0832.0e3af8","4404a09c.c51fc"]],"l":false},{"id":"86a0f78f.37c6d8","type":"inject","z":"fab27939.ff21e8","name":"Read Warehouse Content","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":210,"y":240,"wires":[["2b8e21b9.ff5c5e"]]},{"id":"2b8e21b9.ff5c5e","type":"change","z":"fab27939.ff21e8","name":"get Josn Object","rules":[{"t":"set","p":"payload","pt":"msg","to":"warehouse1","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":240,"wires":[["f07068ba.cd5fb8"]]},{"id":"f07068ba.cd5fb8","type":"debug","z":"fab27939.ff21e8","name":"Warehouse 1","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":590,"y":240,"wires":[]},{"id":"8b2744a2.279978","type":"comment","z":"fab27939.ff21e8","name":"----------- Read the Stock of Warehouse 1 ----------","info":"The following nodes can be usd for debugging. When injecting a message using the 'Read Warehouse Node' the current values stored by the MES are emitted in the debugging window","x":280,"y":200,"wires":[]},{"id":"897a95e4.d18e48","type":"comment","z":"fab27939.ff21e8","name":"----------- Check if the Warehouse and the Vacuum Gripper are ready and sen a command if available ----------","info":"After the commands have been stored in a list we check in regular intervals (every second) if there is a new comman available. If this is the cas and the warehouse_1 as well as the vacuum gripper_1 are available the command is ecxecuted.\nThe command contains the information which color of workpiece should be delivered. So the first thing we have to do is check wehere a workpiece of this color is still available. Therefore the flow checks everey position in the occupancy list and as soon as it enconters a searched workpiece it sends the command to the warehouse, that this one picks it and brings it to the vacuum gripper. At the same time the vacuum gripper recieves the command to pick a workpece at the warehouse.\nIf no more workpiece of this color is stored in the warehouse, this command is skipped and an error message is deployed","x":470,"y":840,"wires":[]},{"id":"58c1b4b5.e0083c","type":"ibmiot out","z":"5c83a1e8.ad766","authentication":"apiKey","apiKey":"6b68196b.a83528","outputType":"cmd","deviceId":"VacuumGripperMunich_1","deviceType":"0.20.7","eventCommandType":"command","format":"json","data":"{}","qos":0,"name":"VacuumGripperMunich_1","service":"registered","x":630,"y":2860,"wires":[]},{"id":"4c46393c.ae9b08","type":"inject","z":"5c83a1e8.ad766","name":"Warehouse to PS","topic":"","payload":"{\"controller\":8,\"subadress\":0,\"timestamp\":1351824120,\"command\":1}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":209.88888549804688,"y":2800.555633544922,"wires":[["58c1b4b5.e0083c"]]},{"id":"848c2320.92bdd","type":"inject","z":"5c83a1e8.ad766","name":"Slide N1 to Warehouse","topic":"","payload":"{\"controller\":8,\"subadress\":0,\"timestamp\":1351824120,\"command\":2}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":232,"y":2836.2222900390625,"wires":[["58c1b4b5.e0083c"]]},{"id":"4877999.9588068","type":"inject","z":"5c83a1e8.ad766","name":"Slide N1 to PS","topic":"","payload":"{\"controller\":8,\"subadress\":0,\"timestamp\":1351824120,\"command\":5}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":214,"y":2873.2222900390625,"wires":[["58c1b4b5.e0083c"]]},{"id":"5f1cf9be.d0a908","type":"inject","z":"5c83a1e8.ad766","name":"Warehouse ready to take","topic":"","payload":"{\"controller\":8,\"subadress\":0,\"timestamp\":1351824120,\"command\":11}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":243,"y":2910.2222900390625,"wires":[["58c1b4b5.e0083c"]]},{"id":"77986f56.ea7cf","type":"inject","z":"5c83a1e8.ad766","name":"Warehouse ready to deliver","topic":"","payload":"{\"controller\":8,\"subadress\":0,\"timestamp\":1351824120,\"command\":12}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":251,"y":2946.2222900390625,"wires":[["58c1b4b5.e0083c"]]},{"id":"3e4ba3d0.eafc6c","type":"function","z":"5c83a1e8.ad766","name":"Workpiece at Warehouse 1 is ready to drop off","func":"msg.payload=\n{\n    \"msg\": \"Workpiece at Warehouse 1 is ready to drop off\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":784,"y":1387.2222175598145,"wires":[["4eb717c9.82c238"]]},{"id":"1e09aab0.967be5","type":"function","z":"5c83a1e8.ad766","name":"Vaccum Gripper is ready to pick a workpiece at Warehouse 1","func":"msg.payload=\n{\n    \"msg\": \"Vaccum Gripper is ready to pick a workpiece at Warehouse 1\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":821,"y":1427.2222175598145,"wires":[["4eb717c9.82c238"]]},{"id":"67c15c8f.9eca44","type":"function","z":"5c83a1e8.ad766","name":"Vacuum Gripper has delivered a Workpiece","func":"msg.payload=\n{\n    \"msg\": \"Vacuum Gripper has delivered a Workpiece\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":770,"y":1464,"wires":[["4eb717c9.82c238"]]},{"id":"f78b911c.8f2bf","type":"function","z":"5c83a1e8.ad766","name":"Start Reference Run","func":"msg.payload=\n{\n    \"msg\": \"Start Reference Run\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":708,"y":748.1111173629761,"wires":[["4eb717c9.82c238"]]},{"id":"2bcb4b77.d7d2a4","type":"function","z":"5c83a1e8.ad766","name":"Reference Run Finished","func":"msg.payload=\n{\n    \"msg\": \"Reference Run Finished\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":717,"y":786.1111173629761,"wires":[["4eb717c9.82c238"]]},{"id":"f0dc5859.48fbd8","type":"inject","z":"523571ab.a711b","name":"Initialize","topic":"","payload":"{\"data\":20}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":220,"y":413.22217559814453,"wires":[["884bc520.5286d8"]]},{"id":"5605f11a.cf191","type":"function","z":"523571ab.a711b","name":"Reference Run finished","func":"msg.payload=\n{\n    \"msg\": \"Reference Run finished\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":770,"y":620,"wires":[["7e651845.da6378"]]},{"id":"2b9ea91b.630796","type":"function","z":"523571ab.a711b","name":"Start Reference Run","func":"msg.payload=\n{\n    \"msg\": \"Start Reference Run\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":759,"y":581.888916015625,"wires":[["7e651845.da6378"]]},{"id":"219e9eb8.ea5252","type":"ibmiot out","z":"fab27939.ff21e8","authentication":"apiKey","apiKey":"6b68196b.a83528","outputType":"cmd","deviceId":"VacuumGripperMunich_1","deviceType":"0.20.7","eventCommandType":"command","format":"json","data":"{}","qos":0,"name":"VacuumGripperMunich_1","service":"registered","x":1308.0000076293945,"y":1277.7777807712555,"wires":[]},{"id":"4404a09c.c51fc","type":"function","z":"fab27939.ff21e8","name":"send the command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 3,\n    \"timestamp\": 1351824120,\n    \"command\": 1\n}\nreturn msg;","outputs":1,"noerr":0,"x":1074,"y":1277,"wires":[["219e9eb8.ea5252"]]},{"id":"346b4ca4.ae1564","type":"function","z":"d5f5f57.d049b08","name":"Waiting for Visual Inspection","func":"msg.payload=\n{\n    \"msg\": \"Waiting for Visual Inspection\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":1720,"wires":[["8ce7be8b.fd3a6"]]},{"id":"2d382ebb.82bd42","type":"switch","z":"523571ab.a711b","name":"switch","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"26","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":410,"y":1940,"wires":[["a1c703bc.f463e"]]},{"id":"ab8e3f66.0f157","type":"comment","z":"523571ab.a711b","name":"comment","info":"if the warehouse has delivered the workpiece to \nthe vaccum gipper the displayed information should be removed","x":420,"y":1900,"wires":[]},{"id":"4caed594.e45f9c","type":"ui_button","z":"ffdb110f.35e53","name":"","group":"adb0fb07.a44b08","order":0,"width":0,"height":0,"passthru":false,"label":"Deliver White","tooltip":"","color":"","bgcolor":"","icon":"","payload":"White","payloadType":"str","topic":"","x":150,"y":360,"wires":[["181ef116.b7a0ff"]]},{"id":"28f1c9a0.79b006","type":"ui_button","z":"ffdb110f.35e53","name":"","group":"adb0fb07.a44b08","order":0,"width":0,"height":0,"passthru":false,"label":"Deliver Red","tooltip":"","color":"","bgcolor":"","icon":"","payload":"Red","payloadType":"str","topic":"","x":150,"y":400,"wires":[["181ef116.b7a0ff"]]},{"id":"c6704b44.985a88","type":"ui_button","z":"ffdb110f.35e53","name":"","group":"adb0fb07.a44b08","order":0,"width":0,"height":0,"passthru":false,"label":"Deliver Blue","tooltip":"","color":"","bgcolor":"","icon":"","payload":"Blue","payloadType":"str","topic":"","x":150,"y":440,"wires":[["181ef116.b7a0ff"]]},{"id":"1f48e3e4.72e3ac","type":"ui_chart","z":"5c83a1e8.ad766","name":"","group":"e0abd687.91d838","order":0,"width":0,"height":0,"label":"","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"500","ymax":"1000","removeOlder":"4","removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":550,"y":1600,"wires":[[]]},{"id":"e710e47c.692f98","type":"ui_gauge","z":"347bd197.17ccbe","name":"","group":"90ad2dab.309ec","order":1,"width":0,"height":0,"gtype":"gage","title":"Temperature","label":"C","format":"{{value}}","min":0,"max":"35","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":670,"y":280,"wires":[]},{"id":"3960b383.382f5c","type":"ui_gauge","z":"347bd197.17ccbe","name":"","group":"90ad2dab.309ec","order":2,"width":0,"height":0,"gtype":"gage","title":"Humidity","label":"%","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":660,"y":320,"wires":[]},{"id":"aae5b4e9.803288","type":"ui_text","z":"347bd197.17ccbe","group":"5eb7682.e972798","order":3,"width":0,"height":0,"name":"Temp","label":"Temperature (C):","format":"{{msg.payload}}","layout":"row-left","x":930,"y":620,"wires":[]},{"id":"e0a35ce6.6b816","type":"ui_text","z":"347bd197.17ccbe","group":"5eb7682.e972798","order":4,"width":0,"height":0,"name":"Humidity","label":"Humidity (%):","format":"{{msg.payload}}","layout":"row-left","x":940,"y":660,"wires":[]},{"id":"a939bdc7.55a7e","type":"ui_text","z":"347bd197.17ccbe","group":"5eb7682.e972798","order":2,"width":0,"height":0,"name":"wetter","label":"Weather:","format":"{{msg.payload}}","layout":"row-left","x":930,"y":580,"wires":[]},{"id":"de1ca12f.2ead3","type":"ui_text","z":"347bd197.17ccbe","group":"4026dc24.016454","order":3,"width":0,"height":0,"name":"Temp","label":"Temperature (C):","format":"{{msg.payload}}","layout":"row-left","x":930,"y":900,"wires":[]},{"id":"4250f46b.a9554c","type":"ui_text","z":"347bd197.17ccbe","group":"4026dc24.016454","order":4,"width":0,"height":0,"name":"Humidity","label":"Humidity (%):","format":"{{msg.payload}}","layout":"row-left","x":940,"y":940,"wires":[]},{"id":"ebcf6eef.1b1bc","type":"ui_text","z":"347bd197.17ccbe","group":"4026dc24.016454","order":2,"width":0,"height":0,"name":"Weather","label":"Weather","format":"{{msg.payload}}","layout":"row-left","x":940,"y":860,"wires":[]},{"id":"3d1c1929.ca9296","type":"ui_text","z":"523571ab.a711b","group":"6fb34f1a.38c57","order":0,"width":0,"height":0,"name":"Name","label":"Name:","format":"{{msg.payload.name}}","layout":"row-left","x":950,"y":1660,"wires":[]},{"id":"6e653679.cfc148","type":"ui_text","z":"523571ab.a711b","group":"6fb34f1a.38c57","order":0,"width":0,"height":0,"name":"ID:","label":"ID:","format":"{{msg.payload.NFC_ID}}","layout":"row-left","x":950,"y":1700,"wires":[]},{"id":"ee21ebdf.576e28","type":"ui_template","z":"523571ab.a711b","group":"27d10585.56274a","name":"Z Axis","order":8,"width":"3","height":"1","format":"Z Axis","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":950,"y":376,"wires":[["4162c807.359858"]]},{"id":"b09cd461.fff6d8","type":"ui_template","z":"523571ab.a711b","group":"27d10585.56274a","name":"Y Axis","order":6,"width":"3","height":"1","format":"Y Axis","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":950,"y":336,"wires":[["f2a3f2bf.32d17"]]},{"id":"1dcb7887.cf0517","type":"ui_template","z":"523571ab.a711b","group":"27d10585.56274a","name":"X Axis","order":4,"width":"3","height":"1","format":"X Axis","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":950,"y":296,"wires":[["b0fa663b.aa3e78"]]},{"id":"b0fa663b.aa3e78","type":"ui_template","z":"523571ab.a711b","group":"27d10585.56274a","name":"X Axis Activity","order":3,"width":"1","height":"1","format":"<img align=\"middle\" border=0 width=\"30px\" src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1200,"y":296,"wires":[[]]},{"id":"f2a3f2bf.32d17","type":"ui_template","z":"523571ab.a711b","group":"27d10585.56274a","name":"Y Axis Activity","order":5,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1200,"y":336,"wires":[[]]},{"id":"4162c807.359858","type":"ui_template","z":"523571ab.a711b","group":"27d10585.56274a","name":"Z Axis Activity","order":7,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1200,"y":376,"wires":[[]]},{"id":"32112f04.6e876","type":"ui_template","z":"523571ab.a711b","group":"27d10585.56274a","name":"Inner ligt-barrier","order":12,"width":"3","height":"1","format":"Inner ligt-barrier","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":980,"y":456,"wires":[["f4865bf9.2d1bf8"]]},{"id":"208926a8.d566fa","type":"ui_template","z":"523571ab.a711b","group":"27d10585.56274a","name":"Outer ligt-barrier","order":10,"width":"3","height":"1","format":"Outer ligt-barrier","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":980,"y":416,"wires":[["289fa874.e6b178"]]},{"id":"289fa874.e6b178","type":"ui_template","z":"523571ab.a711b","group":"27d10585.56274a","name":"Outer ligt-barrier Activity","order":9,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1230,"y":440,"wires":[[]]},{"id":"f4865bf9.2d1bf8","type":"ui_template","z":"523571ab.a711b","group":"27d10585.56274a","name":"Inner ligt-barrier Activity","order":11,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1230,"y":480,"wires":[[]]},{"id":"fa3cc04c.507f2","type":"ui_template","z":"523571ab.a711b","group":"546d47ff.cc67e8","name":"Event Log","order":0,"width":"11","height":"7","format":"<div ng-bind-html=\"msg.payload\" height=\"500\" style=\"height: 450px;\"></div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":1240,"y":1000,"wires":[[]]},{"id":"d9fa3dae.a748b","type":"ui_template","z":"347bd197.17ccbe","group":"5eb7682.e972798","name":"Wetter Icon","order":1,"width":"4","height":"2","format":"<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-4x wi wi-wu-{{msg.payload}}\"></i>\n</div>","storeOutMessages":false,"fwdInMessages":true,"templateScope":"local","x":950,"y":540,"wires":[[]]},{"id":"5ef2dafb.097ab4","type":"ui_template","z":"347bd197.17ccbe","group":"5eb7682.e972798","name":"Load CSS","order":0,"width":"0","height":"0","format":"<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<style>\n    .nr-dashboard-theme-dark ui-card-panel {\n \tbackground-color: #222;\n \toutline: 1px solid #cccccc;\n \t  }\n</style>\n","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":941.9999504089355,"y":499.9999809265137,"wires":[[]]},{"id":"711299ec.c367b8","type":"ui_template","z":"347bd197.17ccbe","group":"4026dc24.016454","name":"Wetter Icon","order":1,"width":"4","height":"2","format":"<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-4x wi wi-wu-{{msg.payload}}\"></i>\n</div>","storeOutMessages":false,"fwdInMessages":true,"templateScope":"local","x":950,"y":820,"wires":[[]]},{"id":"792fb2ae.269cec","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"End conveyor","order":12,"width":"3","height":"1","format":"End conveyor","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":800,"y":360,"wires":[["b19db4bb.25aa08"]]},{"id":"12ef1236.918bce","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Oven entrance","order":10,"width":"3","height":"1","format":"Oven entrance","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":800,"y":320,"wires":[["fe19732b.b5b33"]]},{"id":"fe19732b.b5b33","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Oven entrance","order":9,"width":"1","height":"1","format":"<img align=\"middle\" border=0 width=\"30px\" src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1000,"y":320,"wires":[[]]},{"id":"b19db4bb.25aa08","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"End of conveyor","order":11,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1000,"y":360,"wires":[[]]},{"id":"e714c84.dce8a38","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Compressor","order":8,"width":"3","height":"1","format":"Compressor","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":790,"y":280,"wires":[["81b4727d.2ff6f"]]},{"id":"81b4727d.2ff6f","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Compressor","order":7,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":990,"y":280,"wires":[[]]},{"id":"21c8815c.fa283e","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Motor oven","order":14,"width":"3","height":"1","format":"Motor oven","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":790,"y":400,"wires":[["72e9b4f.9d4214c"]]},{"id":"72e9b4f.9d4214c","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Motor oven","order":13,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":990,"y":400,"wires":[[]]},{"id":"30f8422d.0b9e4e","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Motor VG","order":16,"width":"3","height":"1","format":"Motor VG","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":780,"y":440,"wires":[["653098a6.6783a8"]]},{"id":"653098a6.6783a8","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Motor VG","order":15,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":980,"y":440,"wires":[[]]},{"id":"cb526f3d.69ec2","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Motor slewing ring","order":18,"width":"3","height":"1","format":"Motor slewing ring","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":810,"y":480,"wires":[["cb59ceca.ab82d"]]},{"id":"cb59ceca.ab82d","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Motor slewing ring","order":17,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1010,"y":480,"wires":[[]]},{"id":"885d1911.251488","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Motor saw","order":20,"width":"3","height":"1","format":"Motor saw","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":790,"y":520,"wires":[["f95edd74.baf73"]]},{"id":"f95edd74.baf73","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Motor saw","order":19,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":990,"y":520,"wires":[[]]},{"id":"52fa8248.a002ac","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Motor conveyor","order":22,"width":"3","height":"1","format":"Motor conveyor","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":800,"y":560,"wires":[["83ab7250.9b45d"]]},{"id":"83ab7250.9b45d","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Motor conveyor","order":21,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1000,"y":560,"wires":[[]]},{"id":"5e36171f.70e8e8","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Valve exit","order":24,"width":"3","height":"1","format":"Valve exit","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":780,"y":600,"wires":[["eda1ba7.7f46448"]]},{"id":"eda1ba7.7f46448","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Valve exit","order":23,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":980,"y":600,"wires":[[]]},{"id":"e8e4cb70.28faa8","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Valve gripper","order":26,"width":"3","height":"1","format":"Valve gripper","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":790,"y":640,"wires":[["107379ed.8b40b6"]]},{"id":"107379ed.8b40b6","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Valve gripper","order":25,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":990,"y":640,"wires":[[]]},{"id":"b0916090.5ccb2","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Valve lower gripper","order":28,"width":"3","height":"1","format":"Valve lower gripper","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":810,"y":680,"wires":[["83e3c720.054008"]]},{"id":"83e3c720.054008","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Valve lower gripper","order":27,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1010,"y":680,"wires":[[]]},{"id":"fafe6221.ed79f","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Valve oven door","order":30,"width":"3","height":"1","format":"Valve oven door","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":800,"y":720,"wires":[["bd315b88.9c52a8"]]},{"id":"bd315b88.9c52a8","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Valve oven door","order":29,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1000,"y":720,"wires":[[]]},{"id":"f46d9767.50ac68","type":"ui_template","z":"d5f5f57.d049b08","group":"a80aaf8f.b8589","name":"Event Log","order":0,"width":"11","height":"7","format":"<div ng-bind-html=\"msg.payload\" height=\"500\" style=\"height: 450px;\"></div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":1280,"y":1260,"wires":[[]]},{"id":"f56ca8d.04ef158","type":"ui_template","z":"f04e2126.57d3","group":"4d63af57.0056f","name":"Blue Lane","order":12,"width":"3","height":"1","format":"Blue Lane","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":800,"y":620,"wires":[["fd3fa131.6a7b2"]]},{"id":"30c3cb98.c113f4","type":"ui_template","z":"f04e2126.57d3","group":"4d63af57.0056f","name":"Red Lane","order":10,"width":"3","height":"1","format":"Red Lane","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":800,"y":580,"wires":[["77817d60.1ff504"]]},{"id":"ca4799eb.dac6c8","type":"ui_template","z":"f04e2126.57d3","group":"4d63af57.0056f","name":"White Lane","order":8,"width":"3","height":"1","format":"White Lane","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":810,"y":540,"wires":[["120d33d2.002c7c"]]},{"id":"120d33d2.002c7c","type":"ui_template","z":"f04e2126.57d3","group":"4d63af57.0056f","name":"White Lane Activity","order":7,"width":"1","height":"1","format":"<img align=\"middle\" border=0 width=\"30px\" src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1070,"y":540,"wires":[[]]},{"id":"77817d60.1ff504","type":"ui_template","z":"f04e2126.57d3","group":"4d63af57.0056f","name":"Red Lane Activity","order":9,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1070,"y":580,"wires":[[]]},{"id":"fd3fa131.6a7b2","type":"ui_template","z":"f04e2126.57d3","group":"4d63af57.0056f","name":"Blue Lane Activity","order":11,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1070,"y":620,"wires":[[]]},{"id":"d0db08b4.fa4868","type":"ui_template","z":"f04e2126.57d3","group":"4d63af57.0056f","name":"Before Sorting","order":6,"width":"3","height":"1","format":"Before Sorting","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":820,"y":500,"wires":[["c7db4917.87fda8"]]},{"id":"10f7827b.1582ee","type":"ui_template","z":"f04e2126.57d3","group":"4d63af57.0056f","name":"Module Entrance","order":4,"width":"3","height":"1","format":"Module Entrance","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":830,"y":460,"wires":[["5c8b0139.f34cc"]]},{"id":"5c8b0139.f34cc","type":"ui_template","z":"f04e2126.57d3","group":"4d63af57.0056f","name":"Module Entrance Activity","order":3,"width":"1","height":"1","format":"<img align=\"middle\" border=0 width=\"30px\" src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1090,"y":460,"wires":[[]]},{"id":"c7db4917.87fda8","type":"ui_template","z":"f04e2126.57d3","group":"4d63af57.0056f","name":"Before Sorting Activity","order":5,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1080,"y":500,"wires":[[]]},{"id":"e30006f0.bd0678","type":"ui_template","z":"f04e2126.57d3","group":"16aa3964.cb67e7","name":"Color detected","order":2,"width":"3","height":"2","format":"<img  border=0 src=\"{{msg.payload.warehouseactivityicon}}\">","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":842.0000076293945,"y":826.0000019073486,"wires":[[]]},{"id":"5fb01ef7.76d66","type":"ui_template","z":"f04e2126.57d3","group":"68f1bdc1.5dc8c4","name":"Event Log","order":0,"width":"11","height":"7","format":"<div ng-bind-html=\"msg.payload\" height=\"500\" style=\"height: 450px;\"></div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":1160,"y":1240,"wires":[[]]},{"id":"41b457fa.c66f08","type":"ui_template","z":"5c83a1e8.ad766","group":"8a3edafa.64c4b8","name":"Z Axis","order":11,"width":"3","height":"1","format":"Z Axis","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":970,"y":560,"wires":[["f074915e.ae73a"]]},{"id":"c70859b2.5136f8","type":"ui_template","z":"5c83a1e8.ad766","group":"8a3edafa.64c4b8","name":"Y Axis","order":8,"width":"3","height":"1","format":"Y Axis","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":970,"y":520,"wires":[["be2d4640.e8dab8"]]},{"id":"7f6801f4.2931a","type":"ui_template","z":"5c83a1e8.ad766","group":"8a3edafa.64c4b8","name":"X Axis","order":5,"width":"3","height":"1","format":"X Axis","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":970,"y":480,"wires":[["e1168cb3.0bfb2"]]},{"id":"e1168cb3.0bfb2","type":"ui_template","z":"5c83a1e8.ad766","group":"8a3edafa.64c4b8","name":"X Axis Activity","order":4,"width":"1","height":"1","format":"<img align=\"middle\" border=0 width=\"30px\" src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1160,"y":480,"wires":[[]]},{"id":"be2d4640.e8dab8","type":"ui_template","z":"5c83a1e8.ad766","group":"8a3edafa.64c4b8","name":"Y Axis Activity","order":7,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1160,"y":520,"wires":[[]]},{"id":"f074915e.ae73a","type":"ui_template","z":"5c83a1e8.ad766","group":"8a3edafa.64c4b8","name":"Z Axis Activity","order":10,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1160,"y":560,"wires":[[]]},{"id":"8b73918a.c94f7","type":"ui_template","z":"5c83a1e8.ad766","group":"8a3edafa.64c4b8","name":"Compressor","order":14,"width":"3","height":"1","format":"Compressor","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":990,"y":600,"wires":[["a57a47bd.557b48"]]},{"id":"a57a47bd.557b48","type":"ui_template","z":"5c83a1e8.ad766","group":"8a3edafa.64c4b8","name":"Compressor","order":13,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1150,"y":600,"wires":[[]]},{"id":"1cb65466.62749c","type":"ui_template","z":"5c83a1e8.ad766","group":"8a3edafa.64c4b8","name":"Valve","order":17,"width":"3","height":"1","format":"Valve","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":970,"y":640,"wires":[["a9a86421.1eadc8"]]},{"id":"a9a86421.1eadc8","type":"ui_template","z":"5c83a1e8.ad766","group":"8a3edafa.64c4b8","name":"Valve","order":16,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1130,"y":640,"wires":[[]]},{"id":"a9702039.33259","type":"ui_template","z":"5c83a1e8.ad766","group":"12e73057.010a7","name":"Event Log","order":0,"width":"11","height":"7","format":"<div ng-bind-html=\"msg.payload\" height=\"500\" style=\"height: 450px;\"></div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":1368.0000038146973,"y":1085.0000038146973,"wires":[[]]},{"id":"105f604.ba5eba","type":"ui_template","z":"d5f5f57.d049b08","group":"64473d5c.740ef4","name":"UI_Template","order":1,"width":0,"height":0,"format":"<div height=\"350\" style=\"height: 350px;\">\n<img src=\"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Multibearbeitungsstation_mit_Brennofen_9V.jpg\" width=\"400\"><br/>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":330,"y":120,"wires":[[]]},{"id":"b6bec43d.dfcda8","type":"ui_template","z":"b017d628.55b3e8","group":"575df9eb.ee16e8","name":"Z Axis","order":11,"width":"3","height":"1","format":"Z Axis","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":990,"y":580,"wires":[["c2e3d782.ece948"]]},{"id":"e57ef6a5.a5bfd8","type":"ui_template","z":"b017d628.55b3e8","group":"575df9eb.ee16e8","name":"Y Axis","order":8,"width":"3","height":"1","format":"Y Axis","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":990,"y":540,"wires":[["93d66231.9d9d9"]]},{"id":"1b2ccc92.be82d3","type":"ui_template","z":"b017d628.55b3e8","group":"575df9eb.ee16e8","name":"X Axis","order":5,"width":"3","height":"1","format":"X Axis","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":990,"y":500,"wires":[["906252dc.cfcd3"]]},{"id":"906252dc.cfcd3","type":"ui_template","z":"b017d628.55b3e8","group":"575df9eb.ee16e8","name":"X Axis Activity","order":4,"width":"1","height":"1","format":"<img align=\"middle\" border=0 width=\"30px\" src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1180,"y":500,"wires":[[]]},{"id":"93d66231.9d9d9","type":"ui_template","z":"b017d628.55b3e8","group":"575df9eb.ee16e8","name":"Y Axis Activity","order":7,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1180,"y":540,"wires":[[]]},{"id":"c2e3d782.ece948","type":"ui_template","z":"b017d628.55b3e8","group":"575df9eb.ee16e8","name":"Z Axis Activity","order":10,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1180,"y":580,"wires":[[]]},{"id":"2f84fefe.3342c2","type":"ui_template","z":"b017d628.55b3e8","group":"575df9eb.ee16e8","name":"Compressor","order":14,"width":"3","height":"1","format":"Compressor","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1010,"y":620,"wires":[["abc6b48d.980fd8"]]},{"id":"abc6b48d.980fd8","type":"ui_template","z":"b017d628.55b3e8","group":"575df9eb.ee16e8","name":"Compressor","order":13,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1170,"y":620,"wires":[[]]},{"id":"dcc948b1.39b848","type":"ui_template","z":"b017d628.55b3e8","group":"575df9eb.ee16e8","name":"Valve","order":17,"width":"3","height":"1","format":"Valve","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":990,"y":660,"wires":[["6ac5a63c.29fdb8"]]},{"id":"6ac5a63c.29fdb8","type":"ui_template","z":"b017d628.55b3e8","group":"575df9eb.ee16e8","name":"Valve","order":16,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1150,"y":660,"wires":[[]]},{"id":"6d5405b7.440c3c","type":"ui_template","z":"b017d628.55b3e8","group":"236618e.5944de8","name":"Event Log","order":0,"width":"11","height":"7","format":"<div ng-bind-html=\"msg.payload\" height=\"500\" style=\"height: 450px;\"></div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":1357,"y":1146,"wires":[[]]},{"id":"6c5f26d8.30ade8","type":"ui_template","z":"c8561b10.574218","group":"59d5f9fe.0e3618","name":"Z Axis","order":8,"width":"3","height":"1","format":"Z Axis","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":894,"y":342,"wires":[["11eb5a4d.2c7d46"]]},{"id":"321e0e66.f83d22","type":"ui_template","z":"c8561b10.574218","group":"59d5f9fe.0e3618","name":"Y Axis","order":6,"width":"3","height":"1","format":"Y Axis","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":894,"y":302,"wires":[["d8c010fe.8e986"]]},{"id":"48c78a2d.c453d4","type":"ui_template","z":"c8561b10.574218","group":"59d5f9fe.0e3618","name":"X Axis","order":4,"width":"3","height":"1","format":"X Axis","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":894,"y":262,"wires":[["ef34652b.ec83c8"]]},{"id":"ef34652b.ec83c8","type":"ui_template","z":"c8561b10.574218","group":"59d5f9fe.0e3618","name":"X Axis Activity","order":3,"width":"1","height":"1","format":"<img align=\"middle\" border=0 width=\"30px\" src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1144,"y":262,"wires":[[]]},{"id":"d8c010fe.8e986","type":"ui_template","z":"c8561b10.574218","group":"59d5f9fe.0e3618","name":"Y Axis Activity","order":5,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1144,"y":302,"wires":[[]]},{"id":"11eb5a4d.2c7d46","type":"ui_template","z":"c8561b10.574218","group":"59d5f9fe.0e3618","name":"Z Axis Activity","order":7,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1144,"y":342,"wires":[[]]},{"id":"3d3fd5e8.ecb7ba","type":"ui_template","z":"c8561b10.574218","group":"59d5f9fe.0e3618","name":"Inner ligt-barrier","order":12,"width":"3","height":"1","format":"Inner ligt-barrier","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":924,"y":422,"wires":[["71626030.8bf08"]]},{"id":"7f415ca7.ac4964","type":"ui_template","z":"c8561b10.574218","group":"59d5f9fe.0e3618","name":"Outer ligt-barrier","order":10,"width":"3","height":"1","format":"Outer ligt-barrier","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":924,"y":382,"wires":[["19dda6b8.2c4009"]]},{"id":"19dda6b8.2c4009","type":"ui_template","z":"c8561b10.574218","group":"59d5f9fe.0e3618","name":"Outer ligt-barrier Activity","order":9,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1174,"y":382,"wires":[[]]},{"id":"71626030.8bf08","type":"ui_template","z":"c8561b10.574218","group":"59d5f9fe.0e3618","name":"Inner ligt-barrier Activity","order":11,"width":"1","height":"1","format":"<img align=\"middle\" border=0 src={{msg.payload.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1174,"y":422,"wires":[[]]},{"id":"b33bafb7.557f2","type":"ui_template","z":"c8561b10.574218","group":"f807087b.74e398","name":"Event Log","order":0,"width":"11","height":"7","format":"<div ng-bind-html=\"msg.payload\" height=\"500\" style=\"height: 450px;\"></div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":1280,"y":960,"wires":[[]]},{"id":"651e494f.2ab158","type":"ui_template","z":"c8561b10.574218","group":"6da10186.d09e4","name":"UI_Template","order":1,"width":0,"height":0,"format":"<div height=\"350\" style=\"height: 350px;\">\n<img src=\"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/FT_Automatisiertes_Hochregallager-9V.jpg\" width=\"400\"><br/>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":330,"y":120,"wires":[[]]},{"id":"a63542e0.7b68e","type":"change","z":"523571ab.a711b","name":"Blue Workpiece N4","rules":[{"t":"set","p":"warehouse1.current_workpiece.color","pt":"global","to":"Blue Workpiece N4","tot":"str"},{"t":"set","p":"payload.name","pt":"msg","to":"Blue Workpiece N4","tot":"str"},{"t":"set","p":"warehouse1.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":1900,"wires":[["6e653679.cfc148","3d1c1929.ca9296"]]},{"id":"d4816e2f.7f87","type":"change","z":"523571ab.a711b","name":"Blue Workpiece N4","rules":[{"t":"set","p":"warehouse1.current_workpiece.color","pt":"global","to":"Blue Workpiece N3","tot":"str"},{"t":"set","p":"payload.name","pt":"msg","to":"Blue Workpiece N3","tot":"str"},{"t":"set","p":"warehouse1.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":1860,"wires":[["6e653679.cfc148","3d1c1929.ca9296"]]},{"id":"dc7f9b5d.ba9e58","type":"change","z":"523571ab.a711b","name":"Blue Workpiece N2","rules":[{"t":"set","p":"warehouse1.current_workpiece.color","pt":"global","to":"Blue Workpiece N2","tot":"str"},{"t":"set","p":"payload.name","pt":"msg","to":"Blue Workpiece N2","tot":"str"},{"t":"set","p":"warehouse1.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":1820,"wires":[["6e653679.cfc148","3d1c1929.ca9296"]]},{"id":"14fd4638.f270ba","type":"change","z":"523571ab.a711b","name":"Blue Workpiece N1","rules":[{"t":"set","p":"warehouse1.current_workpiece.color","pt":"global","to":"Blue Workpiece N1","tot":"str"},{"t":"set","p":"payload.name","pt":"msg","to":"Blue Workpiece N1","tot":"str"},{"t":"set","p":"warehouse1.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":1780,"wires":[["6e653679.cfc148","3d1c1929.ca9296"]]},{"id":"fa38e065.7a79a","type":"change","z":"523571ab.a711b","name":"Red Workpiece N1","rules":[{"t":"set","p":"warehouse1.current_workpiece.color","pt":"global","to":"Red Workpiece N1","tot":"str"},{"t":"set","p":"payload.name","pt":"msg","to":"Red Workpiece N1","tot":"str"},{"t":"set","p":"warehouse1.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":1620,"wires":[["6e653679.cfc148","3d1c1929.ca9296"]]},{"id":"69a6a30f.5d3d6c","type":"change","z":"523571ab.a711b","name":"Red Workpiece N2","rules":[{"t":"set","p":"warehouse1.current_workpiece.color","pt":"global","to":"Red Workpiece N2","tot":"str"},{"t":"set","p":"payload.name","pt":"msg","to":"Red Workpiece N2","tot":"str"},{"t":"set","p":"warehouse1.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":1660,"wires":[["6e653679.cfc148","3d1c1929.ca9296"]]},{"id":"82635a24.783dd8","type":"change","z":"523571ab.a711b","name":"Red Workpiece N3","rules":[{"t":"set","p":"warehouse1.current_workpiece.color","pt":"global","to":"Red Workpiece N3","tot":"str"},{"t":"set","p":"payload.name","pt":"msg","to":"Red Workpiece N3","tot":"str"},{"t":"set","p":"warehouse1.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":1700,"wires":[["6e653679.cfc148","3d1c1929.ca9296"]]},{"id":"9b6c3ee1.b7f7d","type":"change","z":"523571ab.a711b","name":"Red Workpiece N4","rules":[{"t":"set","p":"warehouse1.current_workpiece.color","pt":"global","to":"Red Workpiece N4","tot":"str"},{"t":"set","p":"payload.name","pt":"msg","to":"Red Workpiece N4","tot":"str"},{"t":"set","p":"warehouse1.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":1740,"wires":[["6e653679.cfc148","3d1c1929.ca9296"]]},{"id":"f7ac95dd.504ed8","type":"change","z":"523571ab.a711b","name":"White Workpiece N1","rules":[{"t":"set","p":"warehouse1.current_workpiece.color","pt":"global","to":"White Workpiece N1","tot":"str"},{"t":"set","p":"payload.name","pt":"msg","to":"White Workpiece N1","tot":"str"},{"t":"set","p":"warehouse1.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":640,"y":1460,"wires":[["6e653679.cfc148","3d1c1929.ca9296"]]},{"id":"6fb55807.7bd568","type":"change","z":"523571ab.a711b","name":"White Workpiece N2","rules":[{"t":"set","p":"warehouse1.current_workpiece.color","pt":"global","to":"White Workpiece N2","tot":"str"},{"t":"set","p":"payload.name","pt":"msg","to":"White Workpiece N2","tot":"str"},{"t":"set","p":"warehouse1.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":640,"y":1500,"wires":[["6e653679.cfc148","3d1c1929.ca9296"]]},{"id":"2e22136.f45fcec","type":"change","z":"523571ab.a711b","name":"White Workpiece N3","rules":[{"t":"set","p":"warehouse1.current_workpiece.color","pt":"global","to":"White Workpiece N3","tot":"str"},{"t":"set","p":"payload.name","pt":"msg","to":"White Workpiece N3","tot":"str"},{"t":"set","p":"warehouse1.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":640,"y":1540,"wires":[["6e653679.cfc148","3d1c1929.ca9296"]]},{"id":"7d6e0820.f52168","type":"change","z":"523571ab.a711b","name":"White Workpiece N4","rules":[{"t":"set","p":"warehouse1.current_workpiece.color","pt":"global","to":"White Workpiece N4","tot":"str"},{"t":"set","p":"payload.name","pt":"msg","to":"White Workpiece N4","tot":"str"},{"t":"set","p":"warehouse1.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":640,"y":1580,"wires":[["6e653679.cfc148","3d1c1929.ca9296"]]},{"id":"a1c703bc.f463e","type":"change","z":"523571ab.a711b","name":"Workpiece is placed in the storage","rules":[{"t":"set","p":"warehouse1.current_workpiece.color","pt":"global","to":"","tot":"str"},{"t":"set","p":"payload.name","pt":"msg","to":"","tot":"str"},{"t":"set","p":"warehouse1.current_workpiece.nfc_id","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":1940,"wires":[["6e653679.cfc148","3d1c1929.ca9296"]]},{"id":"11a10a36.0d61b6","type":"change","z":"523571ab.a711b","name":"current workpiece is given to the vaccum gripper","rules":[{"t":"set","p":"vaccumgripper1.current_workpiece.color","pt":"global","to":"warehouse1.current_workpiece.color","tot":"global"},{"t":"set","p":"vaccumgripper1.current_workpiece.nfc_id","pt":"global","to":"warehouse1.current_workpiece.nfc_id","tot":"global"},{"t":"set","p":"warehouse1.commands.current_command","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":2020,"wires":[[]]},{"id":"d231861c.cde7e8","type":"inject","z":"5c83a1e8.ad766","name":"Initialise","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":140,"y":220,"wires":[["6c25fd62.64bb04"]]},{"id":"efc659b.ca142a8","type":"comment","z":"5c83a1e8.ad766","name":"---------- Set the initial Stock of Vacuum Gripper 1 ----------","info":"The MES system stores his information in gloabal vaiables. After a restart of the MES (be this after a new deployment of the Node-RED or after a reset command) the values should be reset (bring them to an initial state)","x":290,"y":180,"wires":[]},{"id":"6c25fd62.64bb04","type":"change","z":"5c83a1e8.ad766","name":"Set initial values to vacuum gripper","rules":[{"t":"set","p":"vaccumgripper1","pt":"global","to":"{\"available\":false,\"destination\":\"\",\"current_workpiece\":{},\"workpiece_gripped\":false}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":220,"wires":[[]]},{"id":"8e81cdd9.2246d","type":"inject","z":"5c83a1e8.ad766","name":"Read Vacuum Gripper info","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":190,"y":347,"wires":[["ac129e9d.c1ac"]]},{"id":"ac129e9d.c1ac","type":"change","z":"5c83a1e8.ad766","name":"get Josn Object","rules":[{"t":"set","p":"payload","pt":"msg","to":"vaccumgripper1","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":347,"wires":[["b715632b.552cb"]]},{"id":"b715632b.552cb","type":"debug","z":"5c83a1e8.ad766","name":"Vacuum Gripper 1","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":590,"y":347,"wires":[]},{"id":"2f0a434.ebb7abc","type":"comment","z":"5c83a1e8.ad766","name":"----------- Read the Global Variables of Vacuum Gripper 1 ----------","info":"The following nodes can be usd for debugging. When injecting a message using the 'Read Vacuum Gripper info' node the current values stored by the MES are emitted in the debugging window","x":310,"y":307,"wires":[]},{"id":"c276c6ef.643f38","type":"ibmiot in","z":"d5f5f57.d049b08","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"Processing_Station_Munich","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Processing_Station_Munich","service":"registered","allDevices":false,"allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":220,"y":1200,"wires":[["dfd63635.1115a8"]]},{"id":"84437e8a.06b4c","type":"inject","z":"f04e2126.57d3","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":130,"y":140,"wires":[["8a92167.cf64be8"]]},{"id":"3f8604f4.27b94c","type":"comment","z":"f04e2126.57d3","name":"---------- Get an Image of the Sorting Line ----------","info":"These 2 nodes call the URL to get the image (stored in the IBM Cloud Object Storage) of the sorting line after a restart of the Node-RED instance. This image is then shown in the warehouse-page of the dashboard","x":240,"y":100,"wires":[]},{"id":"8a92167.cf64be8","type":"ui_template","z":"f04e2126.57d3","group":"9e389d8c.44141","name":"UI_Template","order":1,"width":0,"height":0,"format":"<div height=\"350\" style=\"height: 350px;\">\n<img src=\"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Sortierstrecke_mit_Farberkennung_9V.jpg\" width=\"400\"><br/>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":310,"y":140,"wires":[[]]},{"id":"8fa00371.8edae","type":"ibmiot in","z":"f04e2126.57d3","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"Sorting_Line_Munich","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Sorting_Line_Munich","service":"registered","allDevices":false,"allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":134.99998474121094,"y":821.3333129882812,"wires":[["8ac66a18.3a4c78"]]},{"id":"bbabf679.898398","type":"ibmiot in","z":"f04e2126.57d3","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"Sorting_Line_Munich","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Sorting_Line_Munich","service":"registered","allDevices":false,"allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":155.0000228881836,"y":1190.3335762023926,"wires":[["ed037812.fdb9a8"]]},{"id":"f69c7385.389cd","type":"comment","z":"f04e2126.57d3","name":"---------- Show on the dashboard which color has bee detected by the sorting line ----------","info":"The sorting line has an integrated color detection sensor. If this one recognises an workpiece, it chekcs ist color and sends an event to the MES. The workpiece can then be displayed in the dashboard","x":345.99998474121094,"y":725.0000076293945,"wires":[]},{"id":"2c26b0c2.f6008","type":"switch","z":"f04e2126.57d3","name":"Check ID","property":"payload.NFC_ID","propertyType":"msg","rules":[{"t":"eq","v":"045cc74a616081","vt":"str"},{"t":"eq","v":"0416c64a616081","vt":"str"},{"t":"eq","v":"0417c64a616081","vt":"str"},{"t":"eq","v":"0452c64a616081","vt":"str"},{"t":"eq","v":"0434c64a616081","vt":"str"},{"t":"eq","v":"04f8c64a616080","vt":"str"},{"t":"eq","v":"041ec74a616081","vt":"str"},{"t":"eq","v":"044ac74a616080","vt":"str"},{"t":"eq","v":"047ac74a616081","vt":"str"},{"t":"eq","v":"045bc74a616081","vt":"str"},{"t":"eq","v":"043cc74a616081","vt":"str"},{"t":"eq","v":"0467c74a616080","vt":"str"}],"checkall":"true","repair":false,"outputs":12,"x":373.9869155883789,"y":1821.989574432373,"wires":[["3fef3f61.35a0a"],["9e6c23e2.957a4"],["43f5a5c5.a9dd9c"],["ec583863.9748f8"],["e484bcbd.33266"],["8e34b165.75347"],["d831a72e.1b62d8"],["509ad804.71b228"],["df4f676c.1f7028"],["623e9333.4a827c"],["2cf6d920.dd4f76"],["d79e5721.d2d018"]]},{"id":"6b6df364.434cec","type":"switch","z":"f04e2126.57d3","name":"check slide","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"11","vt":"str"},{"t":"eq","v":"13","vt":"str"},{"t":"eq","v":"15","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":350,"y":2680,"wires":[["53a6860e.b821e8"],["fdf29d0d.c6b7d"],["c1f157b0.67b348"]]},{"id":"d79e5721.d2d018","type":"change","z":"f04e2126.57d3","name":"Blue Workpiece N4","rules":[{"t":"set","p":"sortingline.current_workpiece.color","pt":"global","to":"Blue Workpiece N4","tot":"str"},{"t":"set","p":"sortingline.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":603.9869155883789,"y":2081.989574432373,"wires":[[]]},{"id":"2cf6d920.dd4f76","type":"change","z":"f04e2126.57d3","name":"Blue Workpiece N3","rules":[{"t":"set","p":"sortingline.current_workpiece.color","pt":"global","to":"Blue Workpiece N3","tot":"str"},{"t":"set","p":"sortingline.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":603.9869155883789,"y":2041.989574432373,"wires":[[]]},{"id":"623e9333.4a827c","type":"change","z":"f04e2126.57d3","name":"Blue Workpiece N2","rules":[{"t":"set","p":"sortingline.current_workpiece.color","pt":"global","to":"Blue Workpiece N2","tot":"str"},{"t":"set","p":"sortingline.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":603.9869155883789,"y":2001.989574432373,"wires":[[]]},{"id":"d831a72e.1b62d8","type":"change","z":"f04e2126.57d3","name":"Blue Workpiece N1","rules":[{"t":"set","p":"sortingline.current_workpiece.color","pt":"global","to":"Blue Workpiece N1","tot":"str"},{"t":"set","p":"sortingline.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":603.9869155883789,"y":1961.989574432373,"wires":[[]]},{"id":"e484bcbd.33266","type":"change","z":"f04e2126.57d3","name":"Red Workpiece N1","rules":[{"t":"set","p":"sortingline.current_workpiece.color","pt":"global","to":"Red Workpiece N1","tot":"str"},{"t":"set","p":"sortingline.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":603.9869155883789,"y":1801.989574432373,"wires":[[]]},{"id":"8e34b165.75347","type":"change","z":"f04e2126.57d3","name":"Red Workpiece N2","rules":[{"t":"set","p":"sortingline.current_workpiece.color","pt":"global","to":"Red Workpiece N2","tot":"str"},{"t":"set","p":"sortingline.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":603.9869155883789,"y":1841.989574432373,"wires":[[]]},{"id":"df4f676c.1f7028","type":"change","z":"f04e2126.57d3","name":"Red Workpiece N3","rules":[{"t":"set","p":"sortingline.current_workpiece.color","pt":"global","to":"Red Workpiece N3","tot":"str"},{"t":"set","p":"sortingline.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":603.9869155883789,"y":1881.989574432373,"wires":[[]]},{"id":"509ad804.71b228","type":"change","z":"f04e2126.57d3","name":"Red Workpiece N4","rules":[{"t":"set","p":"sortingline.current_workpiece.color","pt":"global","to":"Red Workpiece N4","tot":"str"},{"t":"set","p":"sortingline.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":603.9869155883789,"y":1921.989574432373,"wires":[[]]},{"id":"3fef3f61.35a0a","type":"change","z":"f04e2126.57d3","name":"White Workpiece N1","rules":[{"t":"set","p":"sortingline.current_workpiece.color","pt":"global","to":"White Workpiece N1","tot":"str"},{"t":"set","p":"sortingline.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":613.9869155883789,"y":1641.989574432373,"wires":[[]]},{"id":"9e6c23e2.957a4","type":"change","z":"f04e2126.57d3","name":"White Workpiece N2","rules":[{"t":"set","p":"sortingline.current_workpiece.color","pt":"global","to":"White Workpiece N2","tot":"str"},{"t":"set","p":"sortingline.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":613.9869155883789,"y":1681.989574432373,"wires":[[]]},{"id":"43f5a5c5.a9dd9c","type":"change","z":"f04e2126.57d3","name":"White Workpiece N3","rules":[{"t":"set","p":"sortingline.current_workpiece.color","pt":"global","to":"White Workpiece N3","tot":"str"},{"t":"set","p":"sortingline.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":613.9869155883789,"y":1721.989574432373,"wires":[[]]},{"id":"ec583863.9748f8","type":"change","z":"f04e2126.57d3","name":"White Workpiece N4","rules":[{"t":"set","p":"sortingline.current_workpiece.color","pt":"global","to":"White Workpiece N4","tot":"str"},{"t":"set","p":"sortingline.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":613.9869155883789,"y":1761.989574432373,"wires":[[]]},{"id":"c39166d8.b5c7b8","type":"comment","z":"f04e2126.57d3","name":"---------- Store the NFC Id of every Workpiece which is travelling under the NFC Reader -----------","info":"If a new workpiece is detected by the NFC-Reader its informations (name and NFC ID) are stored in the MES","x":390,"y":1600,"wires":[]},{"id":"7094252.790d2dc","type":"ui_template","z":"f04e2126.57d3","group":"26c790ae.8e3","name":"Slide 1 third position","order":1,"width":"2","height":"2","format":"<img  border=0 src=\"{{msg.payload}}\">","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1120,"y":3620,"wires":[[]]},{"id":"d6ecf825.1290c8","type":"ui_template","z":"f04e2126.57d3","group":"26c790ae.8e3","name":"Slide 1 second position","order":4,"width":"2","height":"2","format":"<img  border=0 src=\"{{msg.payload}}\">","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1130,"y":3480,"wires":[[]]},{"id":"a2b2d4e7.0b59c8","type":"ui_template","z":"f04e2126.57d3","group":"26c790ae.8e3","name":"Slide 1 first position","order":7,"width":"2","height":"2","format":"<img  border=0 src=\"{{msg.payload}}\">","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1110,"y":3320,"wires":[[]]},{"id":"bee24595.b9c458","type":"ui_template","z":"f04e2126.57d3","group":"26c790ae.8e3","name":"Slide 2 third position","order":2,"width":"2","height":"2","format":"<img  border=0 src=\"{{msg.payload}}\">","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1120,"y":4078,"wires":[[]]},{"id":"f9215fca.ea601","type":"ui_template","z":"f04e2126.57d3","group":"26c790ae.8e3","name":"Slide 2 second position","order":5,"width":"2","height":"2","format":"<img  border=0 src=\"{{msg.payload}}\">","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1130,"y":3920,"wires":[[]]},{"id":"8591e185.201e2","type":"ui_template","z":"f04e2126.57d3","group":"26c790ae.8e3","name":"Slide 2 first position","order":8,"width":"2","height":"2","format":"<img  border=0 src=\"{{msg.payload}}\">","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1110,"y":3764,"wires":[[]]},{"id":"ce15a965.7c3cf8","type":"ui_template","z":"f04e2126.57d3","group":"26c790ae.8e3","name":"Slide 3 third position","order":3,"width":"2","height":"2","format":"<img  border=0 src=\"{{msg.payload}}\">","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1120,"y":4555,"wires":[[]]},{"id":"f51fed7d.41e0e","type":"ui_template","z":"f04e2126.57d3","group":"26c790ae.8e3","name":"Slide 3 second position","order":6,"width":"2","height":"2","format":"<img  border=0 src=\"{{msg.payload}}\">","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1130,"y":4394,"wires":[[]]},{"id":"a1bca535.cc3c78","type":"ui_template","z":"f04e2126.57d3","group":"26c790ae.8e3","name":"Slide 3 first position","order":9,"width":"2","height":"2","format":"<img  border=0 src=\"{{msg.payload}}\">","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1110,"y":4236,"wires":[[]]},{"id":"53a6860e.b821e8","type":"switch","z":"f04e2126.57d3","name":"Check if first pos is free","property":"sortingline.slide_1.first_position.color","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":627.9999847412109,"y":2504.3334941864014,"wires":[["61a7fa5b.28c6e4"],["8281dae1.b47fa8"]]},{"id":"8281dae1.b47fa8","type":"switch","z":"f04e2126.57d3","name":"Check if second pos is free","property":"sortingline.slide_1.second_position.color","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":636.9999771118164,"y":2548.0000953674316,"wires":[["43b2a182.fb677"],["afe87cfd.eea8c"]]},{"id":"afe87cfd.eea8c","type":"switch","z":"f04e2126.57d3","name":"Check if third pos is free","property":"sortingline.slide_1.third_position.color","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":625.9999771118164,"y":2590.0000953674316,"wires":[["38a25436.359b8c"],["68b25668.f183d8"]]},{"id":"e30a979c.e34398","type":"ui_toast","z":"f04e2126.57d3","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Error Message Sorting Line","name":"Error Message","x":869.9999771118164,"y":2625.3333473205566,"wires":[]},{"id":"61a7fa5b.28c6e4","type":"change","z":"f04e2126.57d3","name":"Workpiece in first Slide first Position","rules":[{"t":"set","p":"sortingline.slide_1.first_position.color","pt":"global","to":"sortingline.current_workpiece.color","tot":"global"},{"t":"set","p":"sortingline.slide_1.first_position.nfc_id","pt":"global","to":"sortingline.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":929.9999771118164,"y":2505.3333473205566,"wires":[[]]},{"id":"43b2a182.fb677","type":"change","z":"f04e2126.57d3","name":"Workpiece in first Slide second Position","rules":[{"t":"set","p":"sortingline.slide_1.second_position.color","pt":"global","to":"sortingline.current_workpiece.color","tot":"global"},{"t":"set","p":"sortingline.slide_1.second_position.nfc_id","pt":"global","to":"sortingline.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":949.9999771118164,"y":2545.3333473205566,"wires":[[]]},{"id":"38a25436.359b8c","type":"change","z":"f04e2126.57d3","name":"Workpiece in first Slide third Position","rules":[{"t":"set","p":"sortingline.slide_1.third_position.color","pt":"global","to":"sortingline.current_workpiece.color","tot":"global"},{"t":"set","p":"sortingline.slide_1.third_position.nfc_id","pt":"global","to":"sortingline.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":939.9999771118164,"y":2585.3333473205566,"wires":[[]]},{"id":"fdf29d0d.c6b7d","type":"switch","z":"f04e2126.57d3","name":"Check if first pos is free","property":"sortingline.slide_2.first_position.color","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":622.9999771118164,"y":2680.6667613983154,"wires":[["518cc855.c3e0a8"],["d7941825.b1d2f8"]]},{"id":"d7941825.b1d2f8","type":"switch","z":"f04e2126.57d3","name":"Check if second pos is free","property":"sortingline.slide_2.second_position.color","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":631.9999694824219,"y":2724.3333625793457,"wires":[["cb402fb4.21e7b"],["383c3e25.7d1fd2"]]},{"id":"383c3e25.7d1fd2","type":"switch","z":"f04e2126.57d3","name":"Check if third pos is free","property":"sortingline.slide_2.third_position.color","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":620.9999694824219,"y":2766.3333625793457,"wires":[["d2a5a690.ff7298"],["95b5402e.6bc87"]]},{"id":"433a7d59.e11e84","type":"ui_toast","z":"f04e2126.57d3","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Error Message Sorting Line","name":"Error Message","x":869.9999771118164,"y":2805.3333473205566,"wires":[]},{"id":"518cc855.c3e0a8","type":"change","z":"f04e2126.57d3","name":"Workpiece in second Slide first Position","rules":[{"t":"set","p":"sortingline.slide_2.first_position.color","pt":"global","to":"sortingline.current_workpiece.color","tot":"global"},{"t":"set","p":"sortingline.slide_2.first_position.nfc_id","pt":"global","to":"sortingline.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":955.9999923706055,"y":2674.3333463668823,"wires":[[]]},{"id":"cb402fb4.21e7b","type":"change","z":"f04e2126.57d3","name":"Workpiece in second Slide second Position","rules":[{"t":"set","p":"sortingline.slide_2.second_position.color","pt":"global","to":"sortingline.current_workpiece.color","tot":"global"},{"t":"set","p":"sortingline.slide_2.second_position.nfc_id","pt":"global","to":"sortingline.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":962.9999694824219,"y":2714.6666145324707,"wires":[[]]},{"id":"d2a5a690.ff7298","type":"change","z":"f04e2126.57d3","name":"Workpiece in second Slide third Position","rules":[{"t":"set","p":"sortingline.slide_2.third_position.color","pt":"global","to":"sortingline.current_workpiece.color","tot":"global"},{"t":"set","p":"sortingline.slide_2.third_position.nfc_id","pt":"global","to":"sortingline.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":951.9999694824219,"y":2760.6666145324707,"wires":[[]]},{"id":"c1f157b0.67b348","type":"switch","z":"f04e2126.57d3","name":"Check if first pos is free","property":"sortingline.slide_3.first_position.color","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":622.9999771118164,"y":2850.6665992736816,"wires":[["94b1916b.46b38"],["51b42286.70004c"]]},{"id":"51b42286.70004c","type":"switch","z":"f04e2126.57d3","name":"Check if second pos is free","property":"sortingline.slide_3.second_position.color","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":631.9999694824219,"y":2894.333200454712,"wires":[["d6590e1a.0b08b"],["6fc471ff.92d58"]]},{"id":"6fc471ff.92d58","type":"switch","z":"f04e2126.57d3","name":"Check if third pos is free","property":"sortingline.slide_3.third_position.color","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":620.9999694824219,"y":2936.333200454712,"wires":[["d1275127.ceb6d"],["7cb01d03.f23ba4"]]},{"id":"4e1842e1.82052c","type":"ui_toast","z":"f04e2126.57d3","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Error Message Sorting Line","name":"Error Message","x":872.9999771118164,"y":2975.3333473205566,"wires":[]},{"id":"94b1916b.46b38","type":"change","z":"f04e2126.57d3","name":"Workpiece in third Slide first Position","rules":[{"t":"set","p":"sortingline.slide_3.first_position.color","pt":"global","to":"sortingline.current_workpiece.color","tot":"global"},{"t":"set","p":"sortingline.slide_3.first_position.nfc_id","pt":"global","to":"sortingline.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":945.9999923706055,"y":2844.3331842422485,"wires":[[]]},{"id":"d6590e1a.0b08b","type":"change","z":"f04e2126.57d3","name":"Workpiece in third Slide second Position","rules":[{"t":"set","p":"sortingline.slide_3.second_position.color","pt":"global","to":"sortingline.current_workpiece.color","tot":"global"},{"t":"set","p":"sortingline.slide_3.second_position.nfc_id","pt":"global","to":"sortingline.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":952.9999694824219,"y":2884.666452407837,"wires":[[]]},{"id":"d1275127.ceb6d","type":"change","z":"f04e2126.57d3","name":"Workpiece in third Slide third Position","rules":[{"t":"set","p":"sortingline.slide_3.third_position.color","pt":"global","to":"sortingline.current_workpiece.color","tot":"global"},{"t":"set","p":"sortingline.slide_3.third_position.nfc_id","pt":"global","to":"sortingline.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":941.9999694824219,"y":2930.666452407837,"wires":[[]]},{"id":"1717c421.bc195c","type":"comment","z":"f04e2126.57d3","name":"------------- Check in the global variables if workpieces are in the slide and display them ----------------","info":"The following nodes diplay the current occupancy of the sorting line slides.\nTherfore it checks if there are any workpieces stored in the MES and if yes which color they have. With this information it can then be created a display","x":420,"y":3240,"wires":[]},{"id":"1755ffa3.b2bd7","type":"inject","z":"f04e2126.57d3","name":"Check for new workpiece","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":260,"y":3980,"wires":[["65cebccb.b34014","2cd5c87.9815938","5fdcbdb5.02ac24","b75a5998.539ac8","639b1054.ce8ae","e91b3890.d861a8","4b8fd452.77c8ec","843321dc.bd72c","e3e66445.ef4038"]]},{"id":"65cebccb.b34014","type":"switch","z":"f04e2126.57d3","name":"First slide first Position","property":"sortingline.slide_1.first_position.color","propertyType":"global","rules":[{"t":"cont","v":"White","vt":"str"},{"t":"cont","v":"Red","vt":"str"},{"t":"cont","v":"Blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":609.6666870117188,"y":3336.33349609375,"wires":[["4088f008.461c6"],["108fd29.72fb42d"],["42437e24.38059"],["d771cba3.f6a4a8"]]},{"id":"69e9ec37.7b4224","type":"comment","z":"5c83a1e8.ad766","name":"----------- Show the current state of the various actors ----------","info":"The next nodes display some sensor values of the vacuum gripper. E.g. when the crane is moving in one direction, this should be shown with a green dot.\n\nThe display is always initialised as NOT active","x":300,"y":400,"wires":[]},{"id":"7cd09833.6d41d8","type":"ibmiot in","z":"5c83a1e8.ad766","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"VacuumGripperMunich_1","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"VacuumGripperMunich_1","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":125,"y":943,"wires":[["93ee6b7f.8e44d8"]]},{"id":"ab63c731.fb6c38","type":"comment","z":"5c83a1e8.ad766","name":"----------- Create an event log for the vacuum gripper ----------","info":"First incoming events are decoded (the meaning of the numbers is added). \nThen the values are stored in an event log and the last 10 enties are displayed in the dashboard.\n\nAdditionaly when the crane sends it's next destination, this one is stored in the global variables","x":300,"y":720,"wires":[]},{"id":"400a5130.32c16","type":"inject","z":"5c83a1e8.ad766","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":170,"y":120,"wires":[["2d7385c5.047fda"]]},{"id":"8f614ac8.81f198","type":"comment","z":"5c83a1e8.ad766","name":"---------- Get the picture of the vacuum gripper ------------","info":"These 2 nodes call the URL to get the image (stored in the IBM Cloud Object Storage) of the vacuum gripper after a restart of the Node-RED instance. This image is then shown in the warehouse-page of the dashboard","x":280,"y":87,"wires":[]},{"id":"2d7385c5.047fda","type":"ui_template","z":"5c83a1e8.ad766","group":"b3d00ea2.8a61a","name":"UI_Template","order":1,"width":0,"height":0,"format":"<div height=\"350\" style=\"height: 350px;\">\n<img src=\"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Vakuum-Sauggreifer-9V.png\" width=\"400\"><br/>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":330,"y":120,"wires":[[]]},{"id":"5ca1fdfe.0a25e4","type":"comment","z":"5c83a1e8.ad766","name":"----------- Check if the vacuum gripper is transporting a workpiece -----------","info":"These nodes store the information if the vacuum gripper is transporting a workpiece. This information is later needed to check if the gripper has lost a workpiece by accident.","x":340,"y":2020,"wires":[]},{"id":"57e54ea.52a9fb","type":"ibmiot in","z":"5c83a1e8.ad766","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"VacuumGripperMunich_1","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"VacuumGripperMunich_1","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":210,"y":2060,"wires":[["c21412e8.c8b5"]]},{"id":"50c24612.eac588","type":"ibmiot in","z":"5c83a1e8.ad766","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"Pressure_Sensor","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Pressure_Sensor","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":180,"y":2180,"wires":[["e6936b66.781338"]]},{"id":"e6936b66.781338","type":"switch","z":"5c83a1e8.ad766","name":"Set threshold","property":"payload.data","propertyType":"msg","rules":[{"t":"lt","v":"800","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":370,"y":2180,"wires":[[],["ff5d6da9.cd579"]]},{"id":"c21412e8.c8b5","type":"switch","z":"5c83a1e8.ad766","name":"Check if Workpiece gripped","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"28","vt":"str"},{"t":"eq","v":"29","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":460,"y":2060,"wires":[["a51fe103.8bf61"],["8ea4c3d3.cf626"]]},{"id":"a51fe103.8bf61","type":"change","z":"5c83a1e8.ad766","name":"Workpiece Gripped","rules":[{"t":"set","p":"vaccumgripper1.workpiece_gripped","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":2040,"wires":[[]]},{"id":"8ea4c3d3.cf626","type":"change","z":"5c83a1e8.ad766","name":"NO Workpiece Gripped","rules":[{"t":"set","p":"vaccumgripper1.workpiece_gripped","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":2080,"wires":[[]]},{"id":"ff5d6da9.cd579","type":"switch","z":"5c83a1e8.ad766","name":"Check if a workpiece should be gripped","property":"vaccumgripper1.workpiece_gripped","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":640,"y":2200,"wires":[["6b28bcfd.736f04"]]},{"id":"4f9d0c7d.799874","type":"ui_toast","z":"5c83a1e8.ad766","position":"top right","displayTime":"5","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Vacuum Gripper","name":"Workpiece lost","x":1280,"y":2280,"wires":[]},{"id":"5adaf1d4.dab5f","type":"change","z":"5c83a1e8.ad766","name":"Set msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"Vacuum gripper lost the workiece","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1120,"y":2280,"wires":[["4f9d0c7d.799874"]]},{"id":"6b28bcfd.736f04","type":"trigger","z":"5c83a1e8.ad766","op1":"true","op2":"","op1type":"bool","op2type":"nul","duration":"0","extend":false,"units":"s","reset":"","bytopic":"all","name":"Let pass one Msg","x":930,"y":2200,"wires":[["b311b306.14bbe","5adaf1d4.dab5f","5d7d6f78.b629f"]]},{"id":"b311b306.14bbe","type":"delay","z":"5c83a1e8.ad766","name":"","pauseType":"delay","timeout":"7","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1140,"y":2200,"wires":[["b6988add.8d3998"]]},{"id":"b6988add.8d3998","type":"function","z":"5c83a1e8.ad766","name":"reset trigger","func":"msg.reset=true;\nreturn msg;","outputs":1,"noerr":0,"x":1130,"y":2160,"wires":[["6b28bcfd.736f04"]]},{"id":"ea07e9df.339de8","type":"comment","z":"5c83a1e8.ad766","name":"----------- Send test commands to the vacuum gripper -----------","info":"Just there for testing","x":300,"y":2760,"wires":[]},{"id":"68b25668.f183d8","type":"change","z":"f04e2126.57d3","name":"Set msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"No free space in slide1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":569.9999771118164,"y":2625.3333473205566,"wires":[["e30a979c.e34398"]]},{"id":"95b5402e.6bc87","type":"change","z":"f04e2126.57d3","name":"Set msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"No free space in slide2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":569.9999771118164,"y":2805.3333473205566,"wires":[["433a7d59.e11e84"]]},{"id":"7cb01d03.f23ba4","type":"change","z":"f04e2126.57d3","name":"Set msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"No free space in slide2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":572.9999771118164,"y":2975.3333473205566,"wires":[["4e1842e1.82052c"]]},{"id":"668d8d1f.aabbc4","type":"ibmiot in","z":"f04e2126.57d3","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"Sorting_Line_Munich","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Sorting_Line_Munich","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":160,"y":2680,"wires":[["6b6df364.434cec"]]},{"id":"82197b30.c7b2d8","type":"comment","z":"f04e2126.57d3","name":"---------- Check in which slide and position a workpiece is stored -----------","info":"The sorting line pushes the workpieces into three drifferent slide. We want to depict this process also in out MES system. \nThe slides have each 3 positions to store workpieces. So if the sorting line opens a valve to push a workpiece into a slide (event), the workpiece information (name and NFC-ID) should be stored in the list of this slide (each slide has one list/arry). So we first check if there there are already some workpieces in the concerned slide. When we find the first free position we store the informations there. When all 3 positions of one slide are occupied and the sorting line wanst to store an additional workpiece, an error message schould be deployed","x":310,"y":2460,"wires":[]},{"id":"848fb8c0.b1e948","type":"comment","z":"f04e2126.57d3","name":"command","info":"check which valve is opend an so identify the slide\nin which the workpiece is dropped","x":340,"y":2640,"wires":[]},{"id":"d771cba3.f6a4a8","type":"change","z":"f04e2126.57d3","name":"Set empty URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":3389,"wires":[["a2b2d4e7.0b59c8"]]},{"id":"42437e24.38059","type":"change","z":"f04e2126.57d3","name":"Set blue URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-Blue.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":3355,"wires":[["a2b2d4e7.0b59c8"]]},{"id":"108fd29.72fb42d","type":"change","z":"f04e2126.57d3","name":"Set red URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-Red.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":3320,"wires":[["a2b2d4e7.0b59c8"]]},{"id":"4088f008.461c6","type":"change","z":"f04e2126.57d3","name":"Set white URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-White.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":3285,"wires":[["a2b2d4e7.0b59c8"]]},{"id":"2cd5c87.9815938","type":"switch","z":"f04e2126.57d3","name":"First slide second Position","property":"sortingline.slide_1.second_position.color","propertyType":"global","rules":[{"t":"cont","v":"White","vt":"str"},{"t":"cont","v":"Red","vt":"str"},{"t":"cont","v":"Blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":610,"y":3480,"wires":[["4ec282bf.0eb54c"],["cb2f399f.138e38"],["dac3080d.3fec38"],["de836d39.af3dc"]]},{"id":"de836d39.af3dc","type":"change","z":"f04e2126.57d3","name":"Set empty URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":842.3333206176758,"y":3529.666485786438,"wires":[["d6ecf825.1290c8"]]},{"id":"dac3080d.3fec38","type":"change","z":"f04e2126.57d3","name":"Set blue URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-Blue.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":832.3333206176758,"y":3495.666485786438,"wires":[["d6ecf825.1290c8"]]},{"id":"cb2f399f.138e38","type":"change","z":"f04e2126.57d3","name":"Set red URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-Red.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":832.3333206176758,"y":3461.666485786438,"wires":[["d6ecf825.1290c8"]]},{"id":"4ec282bf.0eb54c","type":"change","z":"f04e2126.57d3","name":"Set white URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-White.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":842.3333206176758,"y":3426.666485786438,"wires":[["d6ecf825.1290c8"]]},{"id":"5fdcbdb5.02ac24","type":"switch","z":"f04e2126.57d3","name":"First slide third Position","property":"sortingline.slide_1.third_position.color","propertyType":"global","rules":[{"t":"cont","v":"White","vt":"str"},{"t":"cont","v":"Red","vt":"str"},{"t":"cont","v":"Blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":610,"y":3620,"wires":[["dc1f74a7.a4b9a8"],["a7406a36.5133e8"],["289f35c5.990d0a"],["95233b08.e4f5f8"]]},{"id":"95233b08.e4f5f8","type":"change","z":"f04e2126.57d3","name":"Set empty URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":842.3333206176758,"y":3669.666485786438,"wires":[["7094252.790d2dc"]]},{"id":"289f35c5.990d0a","type":"change","z":"f04e2126.57d3","name":"Set blue URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-Blue.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":832.3333206176758,"y":3635.666485786438,"wires":[["7094252.790d2dc"]]},{"id":"a7406a36.5133e8","type":"change","z":"f04e2126.57d3","name":"Set red URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-Red.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":832.3333206176758,"y":3601.666485786438,"wires":[["7094252.790d2dc"]]},{"id":"dc1f74a7.a4b9a8","type":"change","z":"f04e2126.57d3","name":"Set white URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-White.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":842.3333206176758,"y":3567.666485786438,"wires":[["7094252.790d2dc"]]},{"id":"b75a5998.539ac8","type":"switch","z":"f04e2126.57d3","name":"Second slide first Position","property":"sortingline.slide_2.first_position.color","propertyType":"global","rules":[{"t":"cont","v":"White","vt":"str"},{"t":"cont","v":"Red","vt":"str"},{"t":"cont","v":"Blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":610,"y":3764,"wires":[["96990646.c6dfe8"],["df1b2008.2e2ec"],["6aacc0d9.24ba9"],["b1b129b6.36b0d8"]]},{"id":"b1b129b6.36b0d8","type":"change","z":"f04e2126.57d3","name":"Set empty URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":842.3333206176758,"y":3825.666485786438,"wires":[["8591e185.201e2"]]},{"id":"6aacc0d9.24ba9","type":"change","z":"f04e2126.57d3","name":"Set blue URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-Blue.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":832.3333206176758,"y":3785.666485786438,"wires":[["8591e185.201e2"]]},{"id":"df1b2008.2e2ec","type":"change","z":"f04e2126.57d3","name":"Set red URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-Red.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":832.3333206176758,"y":3745.666485786438,"wires":[["8591e185.201e2"]]},{"id":"96990646.c6dfe8","type":"change","z":"f04e2126.57d3","name":"Set white URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-White.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":842.3333206176758,"y":3705.666485786438,"wires":[["8591e185.201e2"]]},{"id":"639b1054.ce8ae","type":"switch","z":"f04e2126.57d3","name":"Second slide second Position","property":"sortingline.slide_2.second_position.color","propertyType":"global","rules":[{"t":"cont","v":"White","vt":"str"},{"t":"cont","v":"Red","vt":"str"},{"t":"cont","v":"Blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":620,"y":3920,"wires":[["bb7f2d4b.81ce6"],["1a04fb3d.ee03b5"],["4e57fcf.32d3d04"],["8065c2eb.4ef7"]]},{"id":"8065c2eb.4ef7","type":"change","z":"f04e2126.57d3","name":"Set empty URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":842.3333206176758,"y":3981.666485786438,"wires":[["f9215fca.ea601"]]},{"id":"4e57fcf.32d3d04","type":"change","z":"f04e2126.57d3","name":"Set blue URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-Blue.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":832.3333206176758,"y":3941.666485786438,"wires":[["f9215fca.ea601"]]},{"id":"1a04fb3d.ee03b5","type":"change","z":"f04e2126.57d3","name":"Set red URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-Red.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":832.3333206176758,"y":3901.666485786438,"wires":[["f9215fca.ea601"]]},{"id":"bb7f2d4b.81ce6","type":"change","z":"f04e2126.57d3","name":"Set white URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-White.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":842.3333206176758,"y":3861.666485786438,"wires":[["f9215fca.ea601"]]},{"id":"e91b3890.d861a8","type":"switch","z":"f04e2126.57d3","name":"Second slide third Position","property":"sortingline.slide_2.third_position.color","propertyType":"global","rules":[{"t":"cont","v":"White","vt":"str"},{"t":"cont","v":"Red","vt":"str"},{"t":"cont","v":"Blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":620,"y":4078,"wires":[["53392670.a1ee38"],["30576fff.47d79"],["5494e84d.8ba748"],["9bfff793.9b9688"]]},{"id":"9bfff793.9b9688","type":"change","z":"f04e2126.57d3","name":"Set empty URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":842.3333206176758,"y":4139.666485786438,"wires":[["bee24595.b9c458"]]},{"id":"5494e84d.8ba748","type":"change","z":"f04e2126.57d3","name":"Set blue URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-Blue.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":832.3333206176758,"y":4099.666485786438,"wires":[["bee24595.b9c458"]]},{"id":"30576fff.47d79","type":"change","z":"f04e2126.57d3","name":"Set red URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-Red.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":832.3333206176758,"y":4059.666485786438,"wires":[["bee24595.b9c458"]]},{"id":"53392670.a1ee38","type":"change","z":"f04e2126.57d3","name":"Set white URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-White.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":842.3333206176758,"y":4019.666485786438,"wires":[["bee24595.b9c458"]]},{"id":"4b8fd452.77c8ec","type":"switch","z":"f04e2126.57d3","name":"Third slide first Position","property":"sortingline.slide_3.first_position.color","propertyType":"global","rules":[{"t":"cont","v":"White","vt":"str"},{"t":"cont","v":"Red","vt":"str"},{"t":"cont","v":"Blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":610,"y":4236,"wires":[["6451b35f.870acc"],["e427563.f6c0ba8"],["c5660de8.d969d"],["7aa6a6c4.a60ab8"]]},{"id":"7aa6a6c4.a60ab8","type":"change","z":"f04e2126.57d3","name":"Set empty URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":842.3333206176758,"y":4297.666485786438,"wires":[["a1bca535.cc3c78"]]},{"id":"c5660de8.d969d","type":"change","z":"f04e2126.57d3","name":"Set blue URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-Blue.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":832.3333206176758,"y":4257.666485786438,"wires":[["a1bca535.cc3c78"]]},{"id":"e427563.f6c0ba8","type":"change","z":"f04e2126.57d3","name":"Set red URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-Red.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":832.3333206176758,"y":4217.666485786438,"wires":[["a1bca535.cc3c78"]]},{"id":"6451b35f.870acc","type":"change","z":"f04e2126.57d3","name":"Set white URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-White.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":842.3333206176758,"y":4177.666485786438,"wires":[["a1bca535.cc3c78"]]},{"id":"843321dc.bd72c","type":"switch","z":"f04e2126.57d3","name":"Third slide second Position","property":"sortingline.slide_3.second_position.color","propertyType":"global","rules":[{"t":"cont","v":"White","vt":"str"},{"t":"cont","v":"Red","vt":"str"},{"t":"cont","v":"Blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":620,"y":4394,"wires":[["cdc0eea3.6fc78"],["c6ee6051.8d2bd"],["5ab004d5.9397cc"],["b4f41ea9.79045"]]},{"id":"b4f41ea9.79045","type":"change","z":"f04e2126.57d3","name":"Set empty URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":842.3333206176758,"y":4455.666485786438,"wires":[["f51fed7d.41e0e"]]},{"id":"5ab004d5.9397cc","type":"change","z":"f04e2126.57d3","name":"Set blue URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-Blue.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":832.3333206176758,"y":4415.666485786438,"wires":[["f51fed7d.41e0e"]]},{"id":"c6ee6051.8d2bd","type":"change","z":"f04e2126.57d3","name":"Set red URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-Red.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":832.3333206176758,"y":4375.666485786438,"wires":[["f51fed7d.41e0e"]]},{"id":"cdc0eea3.6fc78","type":"change","z":"f04e2126.57d3","name":"Set white URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-White.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":842.3333206176758,"y":4335.666485786438,"wires":[["f51fed7d.41e0e"]]},{"id":"e3e66445.ef4038","type":"switch","z":"f04e2126.57d3","name":"Third slide third Position","property":"sortingline.slide_3.third_position.color","propertyType":"global","rules":[{"t":"cont","v":"White","vt":"str"},{"t":"cont","v":"Red","vt":"str"},{"t":"cont","v":"Blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":610,"y":4555,"wires":[["5de1190c.46cfb8"],["54e73586.c7973c"],["8cd418e8.91de68"],["1b3d5982.655876"]]},{"id":"1b3d5982.655876","type":"change","z":"f04e2126.57d3","name":"Set empty URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":842.3333206176758,"y":4616.666485786438,"wires":[["ce15a965.7c3cf8"]]},{"id":"8cd418e8.91de68","type":"change","z":"f04e2126.57d3","name":"Set blue URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-Blue.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":832.3333206176758,"y":4576.666485786438,"wires":[["ce15a965.7c3cf8"]]},{"id":"54e73586.c7973c","type":"change","z":"f04e2126.57d3","name":"Set red URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-Red.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":832.3333206176758,"y":4536.666485786438,"wires":[["ce15a965.7c3cf8"]]},{"id":"5de1190c.46cfb8","type":"change","z":"f04e2126.57d3","name":"Set white URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"http://auberger.eu/IndustrialIoT/Item-White.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":842.3333206176758,"y":4496.666485786438,"wires":[["ce15a965.7c3cf8"]]},{"id":"7402a1d.84c3d6","type":"comment","z":"f04e2126.57d3","name":"---------- Check if the ID provided by the Processing Station mateches the one of the NFC reader -----------","info":"When a net workpiece (NFC Tag) has beeen recognised \nby the NFC Reader, the identified Id is compared\nto the one deliveren by the processing station stored\nin the global variable global.sortingline.handover_workpiece","x":410,"y":2340,"wires":[]},{"id":"209250f5.460b1","type":"ibmiot in","z":"f04e2126.57d3","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"Sorting_Line_Munich","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Sorting_Line_Munich","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":160,"y":2380,"wires":[["c89cadde.d4ecf"]]},{"id":"c89cadde.d4ecf","type":"switch","z":"f04e2126.57d3","name":"Check for new ID","property":"payload.NFC_ID","propertyType":"msg","rules":[{"t":"neq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":370,"y":2380,"wires":[["7b861127.95aa6"]]},{"id":"7b861127.95aa6","type":"switch","z":"f04e2126.57d3","name":"Check for different ID","property":"payload.NFC_ID","propertyType":"msg","rules":[{"t":"neq","v":"sortingline.handover_workpiece.nfc_id","vt":"global"}],"checkall":"true","repair":false,"outputs":1,"x":580,"y":2380,"wires":[["20626127.d0a62e"]]},{"id":"20626127.d0a62e","type":"change","z":"f04e2126.57d3","name":"Set msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"The NFC ID of the new workpiece doesn't match","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":2380,"wires":[["f498735f.03c4d"]]},{"id":"f498735f.03c4d","type":"ui_toast","z":"f04e2126.57d3","position":"top right","displayTime":"5","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Error Message Sorting Line","name":"Error Message","x":920,"y":2380,"wires":[]},{"id":"8b9692bf.4e3e7","type":"comment","z":"5c83a1e8.ad766","name":"------------ If a workpiece is placed at the Processing Station, the NFC ID should be handed over ----------","info":"If the vacuum gripper transports it's workpiece to the processing station, the stored NFC_Id and name should be handed over. Then the processing station can check if these information match those recorded by the built-in NFC-Reader","x":430,"y":1820,"wires":[]},{"id":"d2a5595b.8468d8","type":"ibmiot in","z":"5c83a1e8.ad766","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"VacuumGripperMunich_1","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"VacuumGripperMunich_1","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":210,"y":1860,"wires":[["e1cc9de1.80aa2"]]},{"id":"be72f3ce.c3b61","type":"switch","z":"5c83a1e8.ad766","name":"Check if destination is Processing Station","property":"vaccumgripper1.destination","propertyType":"global","rules":[{"t":"eq","v":"processing_station","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":700,"y":1860,"wires":[["c4572551.3d1bd8"]]},{"id":"c4572551.3d1bd8","type":"change","z":"5c83a1e8.ad766","name":"Workpiece is given to the Processing Station","rules":[{"t":"set","p":"processingstation.handover_workpiece.color","pt":"global","to":"vaccumgripper1.current_workpiece.color","tot":"global"},{"t":"set","p":"processingstation.handover_workpiece.nfc_id","pt":"global","to":"vaccumgripper1.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":1860,"wires":[[]]},{"id":"fe058d08.42c7d","type":"inject","z":"b017d628.55b3e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":170,"y":120,"wires":[["23c835f4.73735a"]]},{"id":"2406483d.85f498","type":"comment","z":"b017d628.55b3e8","name":"------------- Get the picture of the vacuum gripper -------------","info":"","x":290,"y":80,"wires":[]},{"id":"23c835f4.73735a","type":"ui_template","z":"b017d628.55b3e8","group":"93c6479b.051ed8","name":"UI_Template","order":1,"width":0,"height":0,"format":"<div height=\"350\" style=\"height: 350px;\">\n<img src=\"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Vakuum-Sauggreifer-9V.png\" width=\"400\"><br/>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":350,"y":120,"wires":[[]]},{"id":"8b9501f.e5a32","type":"inject","z":"b017d628.55b3e8","name":"Initialise","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":160,"y":220,"wires":[["69e982ca.97e86c"]]},{"id":"4503c5f.3e47d3c","type":"comment","z":"b017d628.55b3e8","name":"---------- Set the initial Stock of Vacuum Gripper 2 ----------","info":"These 2 nodes call the URL to get the image (stored in the IBM Cloud Object Storage) of the vacuum gripper after a restart of the Node-RED instance. This image is then shown in the warehouse-page of the dashboard","x":290,"y":180,"wires":[]},{"id":"69e982ca.97e86c","type":"change","z":"b017d628.55b3e8","name":"Set initial values to vacuum gripper 2","rules":[{"t":"set","p":"vaccumgripper2","pt":"global","to":"{\"commands\":{\"current_command\":\"\",\"position_1\":\"\",\"position_2\":\"\",\"position_3\":\"\",\"position_4\":\"\",\"position_5\":\"\",\"position_6\":\"\",\"position_7\":\"\",\"position_8\":\"\",\"position_9\":\"\"},\"available\":false,\"destination\":\"\",\"current_workpiece\":{}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":220,"wires":[[]]},{"id":"4c97c843.0fe858","type":"inject","z":"b017d628.55b3e8","name":"Read Vacuum Gripper info","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":210,"y":360,"wires":[["4e3100d7.5080e"]]},{"id":"4e3100d7.5080e","type":"change","z":"b017d628.55b3e8","name":"get Josn Object","rules":[{"t":"set","p":"payload","pt":"msg","to":"vaccumgripper2","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":360,"wires":[["11bcc427.225f1c"]]},{"id":"11bcc427.225f1c","type":"debug","z":"b017d628.55b3e8","name":"Vacuum Gripper 2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":610,"y":360,"wires":[]},{"id":"429caa3a.dfe564","type":"comment","z":"b017d628.55b3e8","name":"----------- Read the Stock of Vacuum Gripper 2 ----------","info":"The following nodes can be usd for debugging. When injecting a message using the 'Read Vacuum Gripper info' node the current values stored by the MES are emitted in the debugging window","x":280,"y":320,"wires":[]},{"id":"d182f905.73fa38","type":"comment","z":"b017d628.55b3e8","name":"----------- Show the current state of the various actors ----------","info":"The next nodes display some sensor values of the vacuum gripper. E.g. when the crane is moving in one direction, this should be shown with a green dot.\n\nThe display is always initialised as NOT active","x":300,"y":420,"wires":[]},{"id":"8eddb38.de9585","type":"ibmiot in","z":"b017d628.55b3e8","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"VacuumGripperMunich_2","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"VacuumGripperMunich_2","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":187,"y":1022,"wires":[["8f92e81.7e64d18"]]},{"id":"5b4a6b04.ef0094","type":"comment","z":"b017d628.55b3e8","name":"----------- Create an event log for the vacuum gripper ----------","info":"First incoming events are decoded (the meaning of the numbers is added). \nThen the values are stored in an event log and the last 10 enties are displayed in the dashboard.\n\nAdditionaly when the crane sends it's next destination, this one is stored in the global variables","x":300,"y":740,"wires":[]},{"id":"d6834d0a.7326a","type":"comment","z":"b017d628.55b3e8","name":"----------- Accept commands and store them in an Array----------","info":"The vacuum gripper recieves the commands to move workpieces from the sorting line to the warehouse 2. If a new command arrives, it is first stored in an array according to the first come first serve principle.\n\nCommands can be send via the chatbot (and then over the IoT platform) or by clicking a button on the dashbaord\n\nIf the array for storing the commands (up to 9) is full, an error message is deployed","x":280,"y":1900,"wires":[]},{"id":"6f48cfc5.94156","type":"ui_button","z":"b017d628.55b3e8","name":"Take a workpiece form Slide 1","group":"f0e11c16.11933","order":0,"width":0,"height":0,"passthru":false,"label":"Take WP at Slide 1","tooltip":"","color":"","bgcolor":"","icon":"","payload":"{\"controller\":8,\"subadress\":0,\"timestamp\":1351824120,\"command\":1}","payloadType":"json","topic":"","x":197,"y":1958,"wires":[["b2c4f004.b716","3a0fd87c.5eb178"]]},{"id":"80aeb073.4a2dd","type":"ui_button","z":"b017d628.55b3e8","name":"Take a workpiece form Slide 2","group":"f0e11c16.11933","order":0,"width":0,"height":0,"passthru":false,"label":"Take WP at Slide 2","tooltip":"","color":"","bgcolor":"","icon":"","payload":"{\"controller\":8,\"subadress\":0,\"timestamp\":1351824120,\"command\":2}","payloadType":"json","topic":"","x":198.5,"y":1996,"wires":[["b2c4f004.b716","3a0fd87c.5eb178"]]},{"id":"eaac860a.aa7048","type":"ui_button","z":"b017d628.55b3e8","name":"Take a workpiece form Slide 3","group":"f0e11c16.11933","order":0,"width":0,"height":0,"passthru":false,"label":"Take WP at Slide 3","tooltip":"","color":"","bgcolor":"","icon":"","payload":"{\"controller\":8,\"subadress\":0,\"timestamp\":1351824120,\"command\":3}","payloadType":"json","topic":"","x":197.5,"y":2035,"wires":[["b2c4f004.b716","3a0fd87c.5eb178"]]},{"id":"c31ee352.76a14","type":"function","z":"b017d628.55b3e8","name":"Start Reference Run","func":"msg.payload=\n{\n    \"msg\": \"Start Reference Run\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":726,"y":747,"wires":[["139fa86.a5ba658"]]},{"id":"d1906ff0.72ac1","type":"function","z":"b017d628.55b3e8","name":"Reference Run Finished","func":"msg.payload=\n{\n    \"msg\": \"Reference Run Finished\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":735,"y":785,"wires":[["139fa86.a5ba658"]]},{"id":"62b022a.44e4edc","type":"debug","z":"b017d628.55b3e8","name":"Vacuum Gripper 2","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":466,"y":459,"wires":[]},{"id":"8bf13eb9.08803","type":"function","z":"b017d628.55b3e8","name":"Workpiece at Warehouse 1 is ready to drop off","func":"msg.payload=\n{\n    \"msg\": \"Workpiece at Warehouse 1 is ready to drop off\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":802,"y":1322,"wires":[["139fa86.a5ba658"]]},{"id":"285eb54b.e13f6a","type":"function","z":"b017d628.55b3e8","name":"Vaccum Gripper is ready to pick a workpiece at Warehouse 1","func":"msg.payload=\n{\n    \"msg\": \"Vaccum Gripper is ready to pick a workpiece at Warehouse 1\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":839,"y":1362,"wires":[["139fa86.a5ba658"]]},{"id":"f884f0b6.5dd04","type":"function","z":"b017d628.55b3e8","name":"Vacuum Gripper has delivered a Workpiece","func":"msg.payload=\n{\n    \"msg\": \"Vacuum Gripper has delivered a Workpiece\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":789,"y":1400,"wires":[["139fa86.a5ba658"]]},{"id":"71c3db0.8503c24","type":"function","z":"b017d628.55b3e8","name":"Crane has recieved a Workpiece form the Warehouse","func":"msg.payload=\n{\n    \"msg\": \"Crane has recieved a Workpiece form the Warehouse\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":819,"y":1440,"wires":[["139fa86.a5ba658"]]},{"id":"8b2afae9.d96578","type":"ui_text","z":"b017d628.55b3e8","group":"b090e0cd.bb7dd","order":0,"width":0,"height":0,"name":"Name","label":"Name:","format":"{{msg.payload}}","layout":"row-left","x":650,"y":1800,"wires":[]},{"id":"6f25d9c6.b78b98","type":"ui_text","z":"b017d628.55b3e8","group":"b090e0cd.bb7dd","order":0,"width":0,"height":0,"name":"ID:","label":"ID:","format":"{{msg.payload}}","layout":"row-left","x":650,"y":1840,"wires":[]},{"id":"c7b77647.a89768","type":"comment","z":"b017d628.55b3e8","name":"------------ Storing and Deleting the current name and id of workpiece ----------","info":"The vacuum gripper 2 takes the workpieces out of the sorting line. By doing so, it also hands over the NFC ID and the name of the workpiece because it is not equipped with an NDC-Reader\n\nAfter the vacuum gripper has dropped the workpiece at the warehouse2, the information of this workpiece can be handed over as well and be deleted at the vacuum gripper","x":330,"y":1540,"wires":[]},{"id":"ee56948d.9a8848","type":"switch","z":"b017d628.55b3e8","name":"Gripper has picked a workpiece","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"26","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":450,"y":1600,"wires":[["a1525c8e.83b21"]]},{"id":"533a2cf6.647bb4","type":"switch","z":"b017d628.55b3e8","name":"Vaccum Gripper has released the Workpiece","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"29","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":494,"y":1693,"wires":[["53d51108.51754"]]},{"id":"8f10a065.697cd","type":"change","z":"b017d628.55b3e8","name":"Delete Values at Vacuum Gripper","rules":[{"t":"set","p":"vaccumgripper2.current_workpiece.color","pt":"global","to":"","tot":"str"},{"t":"set","p":"vaccumgripper2.current_workpiece.nfc_id","pt":"global","to":"","tot":"str"},{"t":"set","p":"vaccumgripper2.commands.current_command","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1196,"y":1693,"wires":[[]]},{"id":"53fdc320.5a45ac","type":"ibmiot in","z":"b017d628.55b3e8","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"VacuumGripperMunich_2","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"VacuumGripperMunich_2","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":170,"y":1599,"wires":[["ee56948d.9a8848","533a2cf6.647bb4"]]},{"id":"c7711437.70c138","type":"switch","z":"b017d628.55b3e8","name":"Check if Workpiece available at Slide 1","property":"sortingline.slide_1.first_position.color","propertyType":"global","rules":[{"t":"neq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":870,"y":2580,"wires":[["238b6b2e.5fa9b4","8bb6418a.45501"],["10bf5f6c.25bbc1"]]},{"id":"d3cf908e.b24c1","type":"switch","z":"b017d628.55b3e8","name":"Check if Workpiece available at Slide 2","property":"sortingline.slide_2.first_position.color","propertyType":"global","rules":[{"t":"neq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":869,"y":2619,"wires":[["238b6b2e.5fa9b4","8bb6418a.45501"],["c6d19c71.47d01"]]},{"id":"4bcddcbf.9ad6f4","type":"switch","z":"b017d628.55b3e8","name":"Check if Workpiece available at Slide 3","property":"sortingline.slide_3.first_position.color","propertyType":"global","rules":[{"t":"neq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":867,"y":2659,"wires":[["238b6b2e.5fa9b4","8bb6418a.45501"],["209131ee.dea2ae"]]},{"id":"eee9eced.e8efa","type":"ui_toast","z":"b017d628.55b3e8","position":"top right","displayTime":"7","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Error Message Vacuum Gripper 2","name":"Error Message","x":1340,"y":2620,"wires":[]},{"id":"10bf5f6c.25bbc1","type":"change","z":"b017d628.55b3e8","name":"Set msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"No Workpiece is available at the first slide","tot":"str"},{"t":"set","p":"vaccumgripper2.commands.current_command","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1151,"y":2582,"wires":[["eee9eced.e8efa"]]},{"id":"c6d19c71.47d01","type":"change","z":"b017d628.55b3e8","name":"Set msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"No Workpiece is available at the second slide","tot":"str"},{"t":"set","p":"vaccumgripper2.commands.current_command","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1152,"y":2621,"wires":[["eee9eced.e8efa"]]},{"id":"209131ee.dea2ae","type":"change","z":"b017d628.55b3e8","name":"Set msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"No Workpiece is available at the third slide","tot":"str"},{"t":"set","p":"vaccumgripper2.commands.current_command","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1150,"y":2656,"wires":[["eee9eced.e8efa"]]},{"id":"a1525c8e.83b21","type":"switch","z":"b017d628.55b3e8","name":"Get the Slide","property":"vaccumgripper2.destination","propertyType":"global","rules":[{"t":"eq","v":"first_slide","vt":"str"},{"t":"eq","v":"second_slide","vt":"str"},{"t":"eq","v":"third_slide","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":760.5,"y":1599,"wires":[["3affd777.3ef5d8"],["8fb7cc28.a45c4"],["c13e7ee9.2b3fe"]]},{"id":"3affd777.3ef5d8","type":"change","z":"b017d628.55b3e8","name":"Get Workpiece from first Slide","rules":[{"t":"set","p":"vaccumgripper2.current_workpiece.color","pt":"global","to":"sortingline.slide_1.first_position.color","tot":"global"},{"t":"set","p":"vaccumgripper2.current_workpiece.nfc_id","pt":"global","to":"sortingline.slide_1.first_position.nfc_id","tot":"global"},{"t":"set","p":"sortingline.slide_1.first_position.color","pt":"global","to":"","tot":"str"},{"t":"set","p":"sortingline.slide_1.first_position.nfc_id","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1043,"y":1562,"wires":[[]]},{"id":"8fb7cc28.a45c4","type":"change","z":"b017d628.55b3e8","name":"Get Workpiece from second Slide","rules":[{"t":"set","p":"vaccumgripper2.current_workpiece.color","pt":"global","to":"sortingline.slide_2.first_position.color","tot":"global"},{"t":"set","p":"vaccumgripper2.current_workpiece.nfc_id","pt":"global","to":"sortingline.slide_2.first_position.nfc_id","tot":"global"},{"t":"set","p":"sortingline.slide_2.first_position.color","pt":"global","to":"","tot":"str"},{"t":"set","p":"sortingline.slide_2.first_position.nfc_id","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":1600,"wires":[[]]},{"id":"c13e7ee9.2b3fe","type":"change","z":"b017d628.55b3e8","name":"Get Workpiece from third Slide","rules":[{"t":"set","p":"vaccumgripper2.current_workpiece.color","pt":"global","to":"sortingline.slide_3.first_position.color","tot":"global"},{"t":"set","p":"vaccumgripper2.current_workpiece.nfc_id","pt":"global","to":"sortingline.slide_3.first_position.nfc_id","tot":"global"},{"t":"set","p":"sortingline.slide_3.first_position.color","pt":"global","to":"","tot":"str"},{"t":"set","p":"sortingline.slide_3.first_position.nfc_id","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1042,"y":1637,"wires":[[]]},{"id":"6d204247.e68f9c","type":"change","z":"b017d628.55b3e8","name":"Store Destination","rules":[{"t":"set","p":"vaccumgripper2.destination","pt":"global","to":"first_slide","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":715,"y":1022,"wires":[[]]},{"id":"cce8a4c2.20b448","type":"change","z":"b017d628.55b3e8","name":"Store Destination","rules":[{"t":"set","p":"vaccumgripper2.destination","pt":"global","to":"second_slide","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":716,"y":1095,"wires":[[]]},{"id":"3a4f6f37.d5635","type":"change","z":"b017d628.55b3e8","name":"Store Destination","rules":[{"t":"set","p":"vaccumgripper2.destination","pt":"global","to":"third_slide","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":713,"y":1169,"wires":[[]]},{"id":"ab4860bc.3457c","type":"change","z":"b017d628.55b3e8","name":"Store Destination","rules":[{"t":"set","p":"vaccumgripper2.destination","pt":"global","to":"warehouse_2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":713,"y":1242,"wires":[[]]},{"id":"70a0b2d.138e04c","type":"switch","z":"f04e2126.57d3","name":"Detect if Valve activated","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"12","vt":"str"},{"t":"eq","v":"14","vt":"str"},{"t":"eq","v":"16","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":364.9869079589844,"y":2135.3228492736816,"wires":[["2ac58d0d.e49be2"],["2ac58d0d.e49be2"],["2ac58d0d.e49be2"]]},{"id":"2ac58d0d.e49be2","type":"change","z":"f04e2126.57d3","name":"Delete Current Workpiece","rules":[{"t":"set","p":"sortingline.current_workpiece.color","pt":"global","to":"","tot":"str"},{"t":"set","p":"sortingline.current_workpiece.nfc_id","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":622.9869079589844,"y":2132.3228492736816,"wires":[[]]},{"id":"4f602ec6.101be","type":"inject","z":"f04e2126.57d3","name":"Initialise","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":120,"y":220,"wires":[["a3f7037c.3ed45"]]},{"id":"5f34276a.e3f3b8","type":"comment","z":"f04e2126.57d3","name":"---------- Set the global variables for the sorting line ----------","info":"The MES system stores his information in gloabal vaiables. After a restart of the MES (be this after a new deployment of the Node-RED or after a reset command) the values should be reset (bring them to an initial state)","x":270,"y":180,"wires":[]},{"id":"a3f7037c.3ed45","type":"change","z":"f04e2126.57d3","name":"Set initial values to sorting line","rules":[{"t":"set","p":"sortingline","pt":"global","to":"{\"current_workpiece\":{},\"handover_workpiece\":{},\"available\":false,\"slide_1\":{\"first_position\":{\"color\":\"\",\"nfc_id\":\"\"},\"second_position\":{\"color\":\"\",\"nfc_id\":\"\"},\"third_position\":{\"color\":\"\",\"nfc_id\":\"\"}},\"slide_2\":{\"first_position\":{\"color\":\"\",\"nfc_id\":\"\"},\"second_position\":{\"color\":\"\",\"nfc_id\":\"\"},\"third_position\":{\"color\":\"\",\"nfc_id\":\"\"}},\"slide_3\":{\"first_position\":{\"color\":\"\",\"nfc_id\":\"\"},\"second_position\":{\"color\":\"\",\"nfc_id\":\"\"},\"third_position\":{\"color\":\"\",\"nfc_id\":\"\"}}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":220,"wires":[[]]},{"id":"d5a71a52.f2d8f8","type":"inject","z":"f04e2126.57d3","name":"Read SL Content","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":340,"wires":[["901d29cd.09fac8"]]},{"id":"901d29cd.09fac8","type":"change","z":"f04e2126.57d3","name":"get Josn Object","rules":[{"t":"set","p":"payload","pt":"msg","to":"sortingline","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":340,"wires":[["7808667b.ece5c8"]]},{"id":"7808667b.ece5c8","type":"debug","z":"f04e2126.57d3","name":"Sorting Line","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":550,"y":340,"wires":[]},{"id":"404d6351.70647c","type":"comment","z":"f04e2126.57d3","name":"----------- Read the gloabal variables of the Sorting Line ----------","info":"The following nodes can be usd for debugging. When injecting a message using the 'Read SL Content' node the current values stored by the MES are emitted in the debugging window","x":280,"y":300,"wires":[]},{"id":"5f6e9cce.f79d04","type":"change","z":"ffdb110f.35e53","name":"Set msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"No Workpiece of the requested color available","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":414,"y":773,"wires":[["55403895.7250d8"]]},{"id":"55403895.7250d8","type":"ui_toast","z":"ffdb110f.35e53","position":"top right","displayTime":"7","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Error Message Warehouse 2","name":"Error Message","x":621,"y":783,"wires":[]},{"id":"53d51108.51754","type":"change","z":"b017d628.55b3e8","name":"Workpiece is given to the Warehouse 2","rules":[{"t":"set","p":"warehouse2.current_workpiece.color","pt":"global","to":"vaccumgripper2.current_workpiece.color","tot":"global"},{"t":"set","p":"warehouse2.current_workpiece.nfc_id","pt":"global","to":"vaccumgripper2.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":1693,"wires":[["8f10a065.697cd"]]},{"id":"496410b4.dfee1","type":"inject","z":"c8561b10.574218","name":"Initialize","topic":"","payload":"{\"data\":42}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":"","x":167,"y":458,"wires":[["d02c67b.995f798"]]},{"id":"58033c86.0c5db4","type":"comment","z":"ffdb110f.35e53","name":"Workpiece from Vaccum Gripper to Warehouse","info":"If the warehouse sends the event, that it has provided a palette, the vacuum gripper can drop a workpiece.\n\nIf the vacuum gripper has fished the workpiece releas, the warehouse can start to store the palette with the workpiece","x":292,"y":1057,"wires":[]},{"id":"bc66bf5a.46d0d","type":"comment","z":"ffdb110f.35e53","name":"Workpiece from Warehouse to Vacuum Gripper","info":"Not implementet yet","x":290,"y":1232,"wires":[]},{"id":"635c60a0.13c16","type":"ibmiot in","z":"ffdb110f.35e53","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"WarehouseMunich_2","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"WarehouseMunich_2","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":240,"y":1275,"wires":[[]]},{"id":"aa00e139.6cbed","type":"switch","z":"ffdb110f.35e53","name":"Switch","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"30","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":513,"y":1279,"wires":[["33286fe6.57417"]]},{"id":"85fea099.be8cd","type":"function","z":"ffdb110f.35e53","name":"send command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 8,\n    \"timestamp\": 1351824120,\n    \"command\": 11\n}\nreturn msg;","outputs":1,"noerr":0,"x":903,"y":1279,"wires":[["608acb1e.f9f614"]]},{"id":"e963078d.5140d8","type":"ibmiot in","z":"ffdb110f.35e53","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"VacuumGripperMunich_2","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"VacuumGripperMunich_2","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":250,"y":1323,"wires":[[]]},{"id":"9d87fde2.9751","type":"switch","z":"ffdb110f.35e53","name":"Switch","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"27","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":514,"y":1328,"wires":[["b7307dc9.6eb15"]]},{"id":"4ec00c74.fad884","type":"function","z":"ffdb110f.35e53","name":"send command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 21\n}\nreturn msg;","outputs":1,"noerr":0,"x":903,"y":1327,"wires":[["a167f0e4.9f699"]]},{"id":"a167f0e4.9f699","type":"ibmiot out","z":"ffdb110f.35e53","authentication":"apiKey","apiKey":"6b68196b.a83528","outputType":"cmd","deviceId":"WarehouseMunich_2","deviceType":"0.20.7","eventCommandType":"command","format":"json","data":"{}","qos":0,"name":"WarehouseMunich_2","service":"registered","x":1123,"y":1327,"wires":[]},{"id":"608acb1e.f9f614","type":"ibmiot out","z":"ffdb110f.35e53","authentication":"apiKey","apiKey":"6b68196b.a83528","outputType":"cmd","deviceId":"VacuumGripperMunich_2","deviceType":"0.20.7","eventCommandType":"command","format":"json","data":"{}","qos":0,"name":"VacuumGripperMunich_2","service":"registered","x":1133,"y":1278,"wires":[]},{"id":"33286fe6.57417","type":"change","z":"ffdb110f.35e53","name":"Delete msg content","rules":[{"t":"set","p":"topic","pt":"msg","to":"\"\"","tot":"str"},{"t":"delete","p":"deviceId","pt":"msg"},{"t":"delete","p":"deviceType","pt":"msg"},{"t":"delete","p":"eventType","pt":"msg"},{"t":"delete","p":"format","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":693,"y":1279,"wires":[["85fea099.be8cd"]]},{"id":"b7307dc9.6eb15","type":"change","z":"ffdb110f.35e53","name":"Delete msg content","rules":[{"t":"set","p":"topic","pt":"msg","to":"\"\"","tot":"str"},{"t":"delete","p":"deviceId","pt":"msg"},{"t":"delete","p":"deviceType","pt":"msg"},{"t":"delete","p":"eventType","pt":"msg"},{"t":"delete","p":"format","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":693,"y":1327,"wires":[["4ec00c74.fad884"]]},{"id":"f86e98f8.f52348","type":"link in","z":"ffdb110f.35e53","name":"Start Warehouse","links":["8bb6418a.45501"],"x":346.5,"y":1497,"wires":[["ec932b3a.d36eb8"]],"l":true},{"id":"8bb6418a.45501","type":"link out","z":"b017d628.55b3e8","name":"Start Warehouse","links":["f86e98f8.f52348"],"x":1150,"y":2840,"wires":[],"l":true},{"id":"2edc8cba.d9fb74","type":"change","z":"ffdb110f.35e53","name":"Set msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"No free Storage in the Warehouse","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":631,"y":1902,"wires":[["9a18c27f.4aa32"]]},{"id":"9a18c27f.4aa32","type":"ui_toast","z":"ffdb110f.35e53","position":"top right","displayTime":"7","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Error Message Warehouse 2","name":"Error Message","x":841,"y":1903,"wires":[]},{"id":"242e1d22.afe522","type":"change","z":"ffdb110f.35e53","name":"Save destination","rules":[{"t":"set","p":"warehouse2.destination","pt":"global","to":"position_12","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":848,"y":1531,"wires":[["81763428.8397c8"]]},{"id":"cccf84e6.2539c8","type":"change","z":"ffdb110f.35e53","name":"Save destination","rules":[{"t":"set","p":"warehouse2.destination","pt":"global","to":"position_13","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":848,"y":1571,"wires":[["a3887c0e.937e"]]},{"id":"1db6f1eb.9081de","type":"change","z":"ffdb110f.35e53","name":"Save destination","rules":[{"t":"set","p":"warehouse2.destination","pt":"global","to":"position_21","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":848,"y":1631,"wires":[["927dec8d.c44bd"]]},{"id":"e084b664.1ad2e8","type":"change","z":"ffdb110f.35e53","name":"Save destination","rules":[{"t":"set","p":"warehouse2.destination","pt":"global","to":"position_22","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":848,"y":1671,"wires":[["3e239480.06865c"]]},{"id":"df279244.4c2f4","type":"change","z":"ffdb110f.35e53","name":"Save destination","rules":[{"t":"set","p":"warehouse2.destination","pt":"global","to":"position_23","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":848,"y":1711,"wires":[["dcc5d8e1.5b2688"]]},{"id":"9620f953.716428","type":"change","z":"ffdb110f.35e53","name":"Save destination","rules":[{"t":"set","p":"warehouse2.destination","pt":"global","to":"position_31","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":848,"y":1771,"wires":[["aff5929a.7768f"]]},{"id":"dbb01525.930508","type":"change","z":"ffdb110f.35e53","name":"Save destination","rules":[{"t":"set","p":"warehouse2.destination","pt":"global","to":"position_32","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":848,"y":1811,"wires":[["1d9eaade.401375"]]},{"id":"44cf3213.7b21fc","type":"change","z":"ffdb110f.35e53","name":"Save destination","rules":[{"t":"set","p":"warehouse2.destination","pt":"global","to":"position_33","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":848,"y":1851,"wires":[["3a2edf11.514de"]]},{"id":"df3e4a80.a305e8","type":"comment","z":"ffdb110f.35e53","name":"----------- Store the Information of the new workpiece ----------","info":"When the warehouse has completet the storing process, the information where which workpiece has been stored is saved in he MES. Then the current workpiece information is deleted ","x":300,"y":2015,"wires":[]},{"id":"7199f1d5.5fef2","type":"ibmiot in","z":"ffdb110f.35e53","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"WarehouseMunich_2","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"WarehouseMunich_2","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":140,"y":2195,"wires":[["8e4a7242.4cf24"]]},{"id":"8e4a7242.4cf24","type":"switch","z":"ffdb110f.35e53","name":"Check if  Storing is completed","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"12","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":380,"y":2195,"wires":[["716d7f1e.0b99"]]},{"id":"716d7f1e.0b99","type":"switch","z":"ffdb110f.35e53","name":"select destination","property":"warehouse2.destination","propertyType":"global","rules":[{"t":"eq","v":"position_11","vt":"str"},{"t":"eq","v":"position_12","vt":"str"},{"t":"eq","v":"position_13","vt":"str"},{"t":"eq","v":"position_21","vt":"str"},{"t":"eq","v":"position_22","vt":"str"},{"t":"eq","v":"position_23","vt":"str"},{"t":"eq","v":"position_31","vt":"str"},{"t":"eq","v":"position_32","vt":"str"},{"t":"eq","v":"position_33","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":610,"y":2195,"wires":[["83d2f4fa.673958"],["37c9cf8b.b4b05"],["4cbf69.af6f7098"],["c89cd7fe.6adcd8"],["244107d9.fdd518"],["4ec3a144.ed4a6"],["6d68d810.672ea8"],["23661e02.7786e2"],["b05c9ffc.f4a15"]]},{"id":"83d2f4fa.673958","type":"change","z":"ffdb110f.35e53","name":"Store to Position 11","rules":[{"t":"set","p":"warehouse2.stock.position_11.workpiece","pt":"global","to":"warehouse2.current_workpiece.color","tot":"global"},{"t":"set","p":"warehouse2.stock.position_11.nfc_id","pt":"global","to":"warehouse2.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":2035,"wires":[["ff9bc0d9.42756"]]},{"id":"37c9cf8b.b4b05","type":"change","z":"ffdb110f.35e53","name":"Store to Position 12","rules":[{"t":"set","p":"warehouse2.stock.position_12.workpiece","pt":"global","to":"warehouse2.current_workpiece.color","tot":"global"},{"t":"set","p":"warehouse2.stock.position_12.nfc_id","pt":"global","to":"warehouse2.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":2075,"wires":[["ff9bc0d9.42756"]]},{"id":"4cbf69.af6f7098","type":"change","z":"ffdb110f.35e53","name":"Store to Position 13","rules":[{"t":"set","p":"warehouse2.stock.position_13.workpiece","pt":"global","to":"warehouse2.current_workpiece.color","tot":"global"},{"t":"set","p":"warehouse2.stock.position_13.nfc_id","pt":"global","to":"warehouse2.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":2115,"wires":[["ff9bc0d9.42756"]]},{"id":"c89cd7fe.6adcd8","type":"change","z":"ffdb110f.35e53","name":"Store to Position 21","rules":[{"t":"set","p":"warehouse2.stock.position_21.workpiece","pt":"global","to":"warehouse2.current_workpiece.color","tot":"global"},{"t":"set","p":"warehouse2.stock.position_21.nfc_id","pt":"global","to":"warehouse2.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":2155,"wires":[["ff9bc0d9.42756"]]},{"id":"244107d9.fdd518","type":"change","z":"ffdb110f.35e53","name":"Store to Position 22","rules":[{"t":"set","p":"warehouse2.stock.position_22.workpiece","pt":"global","to":"warehouse2.current_workpiece.color","tot":"global"},{"t":"set","p":"warehouse2.stock.position_22.nfc_id","pt":"global","to":"warehouse2.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":2195,"wires":[["ff9bc0d9.42756"]]},{"id":"4ec3a144.ed4a6","type":"change","z":"ffdb110f.35e53","name":"Store to Position 23","rules":[{"t":"set","p":"warehouse2.stock.position_23.workpiece","pt":"global","to":"warehouse2.current_workpiece.color","tot":"global"},{"t":"set","p":"warehouse2.stock.position_23.nfc_id","pt":"global","to":"warehouse2.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":2235,"wires":[["ff9bc0d9.42756"]]},{"id":"6d68d810.672ea8","type":"change","z":"ffdb110f.35e53","name":"Store to Position 31","rules":[{"t":"set","p":"warehouse2.stock.position_31.workpiece","pt":"global","to":"warehouse2.current_workpiece.color","tot":"global"},{"t":"set","p":"warehouse2.stock.position_31.nfc_id","pt":"global","to":"warehouse2.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":2275,"wires":[["ff9bc0d9.42756"]]},{"id":"23661e02.7786e2","type":"change","z":"ffdb110f.35e53","name":"Store to Position 32","rules":[{"t":"set","p":"warehouse2.stock.position_32.workpiece","pt":"global","to":"warehouse2.current_workpiece.color","tot":"global"},{"t":"set","p":"warehouse2.stock.position_32.nfc_id","pt":"global","to":"warehouse2.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":2315,"wires":[["ff9bc0d9.42756"]]},{"id":"b05c9ffc.f4a15","type":"change","z":"ffdb110f.35e53","name":"Store to Position 33","rules":[{"t":"set","p":"warehouse2.stock.position_33.workpiece","pt":"global","to":"warehouse2.current_workpiece.color","tot":"global"},{"t":"set","p":"warehouse2.stock.position_33.nfc_id","pt":"global","to":"warehouse2.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":2355,"wires":[["ff9bc0d9.42756"]]},{"id":"ff9bc0d9.42756","type":"change","z":"ffdb110f.35e53","name":"Delete current WP","rules":[{"t":"set","p":"warehouse2.current_workpiece.color","pt":"global","to":"","tot":"str"},{"t":"set","p":"warehouse2.current_workpiece.nfc_id","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1130,"y":2195,"wires":[[]]},{"id":"3d2708e6.83b928","type":"comment","z":"347bd197.17ccbe","name":"----------- Camera Stream of the Plant for remote access ------------","info":"This global accessible dashboard should only show a picture of the plant. \nWhen clicking on the button below the image, a link to the locally accessible stream should be opened. This one can only accessible in the IBM network. So nobody can see the stream from outside. This is done for security reasons.","x":290,"y":1020,"wires":[]},{"id":"d662ba0.a79fb48","type":"inject","z":"347bd197.17ccbe","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":150,"y":1060,"wires":[["6471daa8.fd5204"]]},{"id":"6471daa8.fd5204","type":"ui_template","z":"347bd197.17ccbe","group":"67840e50.8420f","name":"UI_Template","order":1,"width":"8","height":"5","format":"<script>\nvar redirect = function(){\n    href = \"www.google.de\"\n}\n</script>\n\n<div onclick=\"redirect()\"\nheight=\"350\" style=\"height: 350px;\">\n<img src=\"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Last_Screenshot.PNG\" width=\"400\"><br/>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":370,"y":1060,"wires":[[]]},{"id":"35b5f4ba.0eac3c","type":"comment","z":"f04e2126.57d3","name":"---------- When a Workpiece is picked by the vacuum gripper the the remaining workpieces will slide forward by one position -----------","info":"If the vcuum gripper 2 picks one workpiece of the srting line, the informations stored about this workpiece can be deleted. The vacuum gripper always tales the first workpiece in the slide and then the other workpieces (if there are any) slip forward one position ","x":520,"y":3040,"wires":[]},{"id":"daded716.5ac4f8","type":"ibmiot in","z":"f04e2126.57d3","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"VacuumGripperMunich_2","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"VacuumGripperMunich_2","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":190,"y":3120,"wires":[["7fba6522.22a7ac"]]},{"id":"7fba6522.22a7ac","type":"switch","z":"f04e2126.57d3","name":"check slide","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"41","vt":"str"},{"t":"eq","v":"42","vt":"str"},{"t":"eq","v":"43","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":390,"y":3120,"wires":[["8980ea5a.3e9498"],["b4d83e76.5d4d2"],["98198693.670fa8"]]},{"id":"8980ea5a.3e9498","type":"change","z":"f04e2126.57d3","name":"Slide 1: Position 2 to Position 1","rules":[{"t":"set","p":"sortingline.slide_1.first_position.color","pt":"global","to":"sortingline.slide_1.second_position.color","tot":"global"},{"t":"set","p":"sortingline.slide_1.first_position.nfc_id","pt":"global","to":"sortingline.slide_1.second_position.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":3080,"wires":[["7914031e.e4daac"]]},{"id":"7914031e.e4daac","type":"change","z":"f04e2126.57d3","name":"Slide 1: Position 3 to Position 2","rules":[{"t":"set","p":"sortingline.slide_1.second_position.color","pt":"global","to":"sortingline.slide_1.third_position.color","tot":"global"},{"t":"set","p":"sortingline.slide_1.second_position.nfc_id","pt":"global","to":"sortingline.slide_1.third_position.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":3080,"wires":[["f6c5680c.ad2cc8"]]},{"id":"f6c5680c.ad2cc8","type":"change","z":"f04e2126.57d3","name":"Slide 1: Delete Position 3","rules":[{"t":"set","p":"sortingline.slide_1.third_position.color","pt":"global","to":"","tot":"str"},{"t":"set","p":"sortingline.slide_1.third_position.nfc_id","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1270,"y":3080,"wires":[[]]},{"id":"b4d83e76.5d4d2","type":"change","z":"f04e2126.57d3","name":"Slide 2: Position 2 to Position 1","rules":[{"t":"set","p":"sortingline.slide_2.first_position.color","pt":"global","to":"sortingline.slide_2.second_position.color","tot":"global"},{"t":"set","p":"sortingline.slide_2.first_position.nfc_id","pt":"global","to":"sortingline.slide_2.second_position.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":3120,"wires":[["f9148d76.1adfc"]]},{"id":"f9148d76.1adfc","type":"change","z":"f04e2126.57d3","name":"Slide 2: Position 3 to Position 2","rules":[{"t":"set","p":"sortingline.slide_2.second_position.color","pt":"global","to":"sortingline.slide_2.third_position.color","tot":"global"},{"t":"set","p":"sortingline.slide_2.second_position.nfc_id","pt":"global","to":"sortingline.slide_2.third_position.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":3120,"wires":[["381b1aec.770346"]]},{"id":"381b1aec.770346","type":"change","z":"f04e2126.57d3","name":"Slide 2: Delete Position 3","rules":[{"t":"set","p":"sortingline.slide_2.third_position.color","pt":"global","to":"","tot":"str"},{"t":"set","p":"sortingline.slide_2.third_position.nfc_id","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1270,"y":3120,"wires":[[]]},{"id":"98198693.670fa8","type":"change","z":"f04e2126.57d3","name":"Slide 3: Position 2 to Position 1","rules":[{"t":"set","p":"sortingline.slide_3.first_position.color","pt":"global","to":"sortingline.slide_3.second_position.color","tot":"global"},{"t":"set","p":"sortingline.slide_3.first_position.nfc_id","pt":"global","to":"sortingline.slide_3.second_position.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":3160,"wires":[["fc8be323.89716"]]},{"id":"fc8be323.89716","type":"change","z":"f04e2126.57d3","name":"Slide 3: Position 3 to Position 2","rules":[{"t":"set","p":"sortingline.slide_3.second_position.color","pt":"global","to":"sortingline.slide_3.third_position.color","tot":"global"},{"t":"set","p":"sortingline.slide_3.second_position.nfc_id","pt":"global","to":"sortingline.slide_3.third_position.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":3160,"wires":[["46b23044.fa1cd"]]},{"id":"46b23044.fa1cd","type":"change","z":"f04e2126.57d3","name":"Slide 3: Delete Position 3","rules":[{"t":"set","p":"sortingline.slide_3.third_position.color","pt":"global","to":"","tot":"str"},{"t":"set","p":"sortingline.slide_3.third_position.nfc_id","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1270,"y":3160,"wires":[[]]},{"id":"4fb04beb.c3dab4","type":"function","z":"c8561b10.574218","name":"Move to conveyor (x-direction)","func":"msg.payload=\n{\n    \"msg\": \"Move to conveyor (x-direction)\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":850,"y":1100,"wires":[["d0772254.6a2ba"]]},{"id":"982d1b22.c69b18","type":"function","z":"c8561b10.574218","name":"Move to first row","func":"msg.payload=\n{\n    \"msg\": \"Move to first row\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":980,"wires":[["d0772254.6a2ba"]]},{"id":"11631ae.14fede5","type":"function","z":"c8561b10.574218","name":"Move to second row","func":"msg.payload=\n{\n    \"msg\": \"Move to second row\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":1020,"wires":[["d0772254.6a2ba"]]},{"id":"94f7ca1c.046048","type":"function","z":"c8561b10.574218","name":"Move to third row","func":"msg.payload=\n{\n    \"msg\": \"Move to third row\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":1060,"wires":[["d0772254.6a2ba"]]},{"id":"aa59b67f.c5b478","type":"function","z":"c8561b10.574218","name":"Move to conveyor (y-direction)","func":"msg.payload=\n{\n    \"msg\": \"Move to conveyor (y-direction)\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":850,"y":1260,"wires":[["d0772254.6a2ba"]]},{"id":"76b67890.b98098","type":"function","z":"c8561b10.574218","name":"Move to first level (white)","func":"msg.payload=\n{\n    \"msg\": \"Move to first level (white)\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":1140,"wires":[["d0772254.6a2ba"]]},{"id":"fa7c924d.2be9","type":"function","z":"c8561b10.574218","name":"Move to second level (red)","func":"msg.payload=\n{\n    \"msg\": \"Move to second level (red)\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":840,"y":1180,"wires":[["d0772254.6a2ba"]]},{"id":"9023763a.4391f8","type":"function","z":"c8561b10.574218","name":"Move to third level (blue)","func":"msg.payload=\n{\n    \"msg\": \"Move to third level (blue)\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":1220,"wires":[["d0772254.6a2ba"]]},{"id":"6f75c80a.e4bd18","type":"function","z":"c8561b10.574218","name":"Start picking up","func":"msg.payload=\n{\n    \"msg\": \"Start picking up\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":640,"wires":[["d0772254.6a2ba"]]},{"id":"3c0e9b87.74a564","type":"function","z":"c8561b10.574218","name":"Picking up finished","func":"msg.payload=\n{\n    \"msg\": \"Picking up finished\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":680,"wires":[["d0772254.6a2ba"]]},{"id":"871f25a9.419ff8","type":"function","z":"c8561b10.574218","name":"Start dropping ","func":"msg.payload=\n{\n    \"msg\": \"Start dropping \",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":720,"wires":[["d0772254.6a2ba"]]},{"id":"2766373.cc8b7c8","type":"function","z":"c8561b10.574218","name":"Stop dropping","func":"msg.payload=\n{\n    \"msg\": \"Stop dropping\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":760,"wires":[["d0772254.6a2ba"]]},{"id":"f7c20ce5.5e4f","type":"function","z":"c8561b10.574218","name":"Start picking up at conveyor","func":"msg.payload=\n{\n    \"msg\": \"Start picking up at conveyor\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":840,"y":800,"wires":[["d0772254.6a2ba"]]},{"id":"b0d2008b.1b59f","type":"function","z":"c8561b10.574218","name":"Picking up at conveyor finished","func":"msg.payload=\n{\n    \"msg\": \"Picking up at conveyor finished\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":850,"y":840,"wires":[["d0772254.6a2ba"]]},{"id":"65bb0045.f0a41","type":"function","z":"c8561b10.574218","name":"Start dropping at conveyor","func":"msg.payload=\n{\n    \"msg\": \"Start dropping at conveyor\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":840,"y":880,"wires":[["d0772254.6a2ba"]]},{"id":"920c688f.37f968","type":"function","z":"c8561b10.574218","name":"Dropping at conveyor finished","func":"msg.payload=\n{\n    \"msg\": \"Dropping at conveyor finished\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":850,"y":920,"wires":[["d0772254.6a2ba"]]},{"id":"c6f9fe62.d6e0a","type":"function","z":"c8561b10.574218","name":"Reference Run finished","func":"msg.payload=\n{\n    \"msg\": \"Reference Run finished\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":600,"wires":[["d0772254.6a2ba"]]},{"id":"daf9851c.3d79e8","type":"function","z":"c8561b10.574218","name":"Start Reference Run","func":"msg.payload=\n{\n    \"msg\": \"Start Reference Run\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":819,"y":561.888916015625,"wires":[["d0772254.6a2ba"]]},{"id":"9f7e8307.5e6e1","type":"lower-case","z":"347bd197.17ccbe","name":"","x":707.0181999206543,"y":832.2865333557129,"wires":[["711299ec.c367b8"]]},{"id":"255d44c2.8f632c","type":"lower-case","z":"347bd197.17ccbe","name":"","x":717.0129776000977,"y":551.3437595367432,"wires":[["d9fa3dae.a748b"]]},{"id":"5b4313c3.65cf1c","type":"ui_text","z":"5c83a1e8.ad766","group":"dd27cb6b.915088","order":0,"width":0,"height":0,"name":"Name","label":"Name:","format":"{{msg.payload}}","layout":"row-left","x":710,"y":1720,"wires":[]},{"id":"8c5ee5e4.f4bd08","type":"ui_text","z":"5c83a1e8.ad766","group":"dd27cb6b.915088","order":0,"width":0,"height":0,"name":"ID:","label":"ID:","format":"{{msg.payload}}","layout":"row-left","x":710,"y":1762,"wires":[]},{"id":"4e36a733.083ec8","type":"comment","z":"5c83a1e8.ad766","name":"------------ Publish current name and id of workpiece ----------","info":"When the vacuum gripper picks up a workpiece, the MES hands over the name and the nfc id of the workpiece. This one should then be displayed in the dashboard.","x":297,"y":1680,"wires":[]},{"id":"c360bc02.4ddf2","type":"ibmiot in","z":"5c83a1e8.ad766","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"VacuumGripperMunich_1","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"VacuumGripperMunich_1","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":210,"y":1960,"wires":[["4bd3058d.bedd3c"]]},{"id":"4bd3058d.bedd3c","type":"switch","z":"5c83a1e8.ad766","name":"Vaccum Gripper has released the Workpiece","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"30","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":510,"y":1960,"wires":[["5aaeaba4.dffe14"]]},{"id":"5aaeaba4.dffe14","type":"change","z":"5c83a1e8.ad766","name":"Reset Values","rules":[{"t":"set","p":"vaccumgripper1.current_workpiece.color","pt":"global","to":"","tot":"str"},{"t":"set","p":"vaccumgripper1.current_workpiece.nfc_id","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":1960,"wires":[[]]},{"id":"e1cc9de1.80aa2","type":"switch","z":"5c83a1e8.ad766","name":"Wait for Drop off","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"29","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":420,"y":1860,"wires":[["be72f3ce.c3b61"]]},{"id":"80b8e678.346288","type":"comment","z":"523571ab.a711b","name":"--------- When the Vaccum Gripper starts picking up, the Workpiece is handed over ---------","info":"When the Vaccum Gripper starts picking up, the Workpiece is handed over","x":849,"y":1984,"wires":[]},{"id":"763be22f.29165c","type":"comment","z":"523571ab.a711b","name":"--------- When the Vaccum Gripper has finished Picking Up, the owkpiece is deleted ---------","info":"","x":847,"y":2053,"wires":[]},{"id":"b97526a0.333e08","type":"ibmiot in","z":"523571ab.a711b","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"VacuumGripperMunich_1","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"VacuumGripperMunich_1","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":222,"y":2055,"wires":[["6933794d.928168"]]},{"id":"6933794d.928168","type":"switch","z":"523571ab.a711b","name":"switch","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"27","vt":"str"},{"t":"eq","v":"28","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":417,"y":2056,"wires":[["11a10a36.0d61b6"],["e95a1be.9896fe8"]]},{"id":"e95a1be.9896fe8","type":"change","z":"523571ab.a711b","name":"current workpiece is deleted","rules":[{"t":"set","p":"warehouse1.current_workpiece.color","pt":"global","to":"","tot":"str"},{"t":"set","p":"warehouse1.current_workpiece.nfc_id","pt":"global","to":"","tot":"str"},{"t":"set","p":"payload.name","pt":"msg","to":"","tot":"str"},{"t":"set","p":"warehouse1.commands.current_command","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":658,"y":2090,"wires":[["6e653679.cfc148","3d1c1929.ca9296"]]},{"id":"cc875b56.76d988","type":"change","z":"5c83a1e8.ad766","name":"Store Destination","rules":[{"t":"set","p":"vaccumgripper1.destination","pt":"global","to":"first_slide","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":697,"y":1021,"wires":[[]]},{"id":"bea8e2f9.b6497","type":"change","z":"5c83a1e8.ad766","name":"Store Destination","rules":[{"t":"set","p":"vaccumgripper1.destination","pt":"global","to":"second_slide","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":695,"y":1096,"wires":[[]]},{"id":"5233f040.e6adb","type":"change","z":"5c83a1e8.ad766","name":"Store Destination","rules":[{"t":"set","p":"vaccumgripper1.destination","pt":"global","to":"third_slide","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":695,"y":1167,"wires":[[]]},{"id":"693eab0b.e26124","type":"change","z":"5c83a1e8.ad766","name":"Store Destination","rules":[{"t":"set","p":"vaccumgripper1.destination","pt":"global","to":"warehouse_1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":697,"y":1237,"wires":[[]]},{"id":"8dafd96d.b78f98","type":"change","z":"5c83a1e8.ad766","name":"Store Destination","rules":[{"t":"set","p":"vaccumgripper1.destination","pt":"global","to":"processing_station","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":695,"y":1310,"wires":[[]]},{"id":"e0ec2809.1963d8","type":"inject","z":"5c83a1e8.ad766","name":"Repeat_Interval","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":198.5,"y":1747,"wires":[["40ee0a5c.1aad34","a19ac603.8fcdb8"]]},{"id":"40ee0a5c.1aad34","type":"change","z":"5c83a1e8.ad766","name":"write global variables to msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"vaccumgripper1.current_workpiece.color","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":1720,"wires":[["5b4313c3.65cf1c"]]},{"id":"a19ac603.8fcdb8","type":"change","z":"5c83a1e8.ad766","name":"write global variables to msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"vaccumgripper1.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":448,"y":1762,"wires":[["8c5ee5e4.f4bd08"]]},{"id":"5d7d6f78.b629f","type":"change","z":"5c83a1e8.ad766","name":"delete current workpiece","rules":[{"t":"set","p":"vaccumgripper1.current_workpiece.color","pt":"global","to":"","tot":"str"},{"t":"set","p":"vaccumgripper1.current_workpiece.nfc_id","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1170,"y":2240,"wires":[[]]},{"id":"8f875ae7.319498","type":"comment","z":"5c83a1e8.ad766","name":"------------ If the Vaccum gripper drops a workpiece, the current workpiece should be deleted ----------","info":"When the vacuum gripper transports a workpiece to another module and drops the workiece there, the stored information about the workpiece (name and NFC-ID) can be deleted","x":420,"y":1920,"wires":[]},{"id":"3ab2d9d1.565746","type":"comment","z":"d5f5f57.d049b08","name":"------------ Publish current name and id of workpiece ----------","info":"When a new workpiece has been detected by the NFC reader of the processing station, this informations (name and NFC-ID) should be displayed in the dashboard","x":310,"y":1800,"wires":[]},{"id":"cfd7a2f5.f51f","type":"inject","z":"d5f5f57.d049b08","name":"Repeat_Interval","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":210,"y":1860,"wires":[["af9da2b6.41a88","962d0fed.38523"]]},{"id":"af9da2b6.41a88","type":"change","z":"d5f5f57.d049b08","name":"write global variables to msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"processingstation.current_workpiece.color","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":1840,"wires":[["d175a5d1.b8b338"]]},{"id":"962d0fed.38523","type":"change","z":"d5f5f57.d049b08","name":"write global variables to msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"processingstation.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":1880,"wires":[["88e27f9f.ed09f"]]},{"id":"d175a5d1.b8b338","type":"ui_text","z":"d5f5f57.d049b08","group":"c7dcd81.53f4e28","order":0,"width":0,"height":0,"name":"Name","label":"Name:","format":"{{msg.payload}}","layout":"row-left","x":670,"y":1840,"wires":[]},{"id":"88e27f9f.ed09f","type":"ui_text","z":"d5f5f57.d049b08","group":"c7dcd81.53f4e28","order":0,"width":0,"height":0,"name":"ID:","label":"ID:","format":"{{msg.payload}}","layout":"row-left","x":670,"y":1880,"wires":[]},{"id":"33d8f2d5.6a2fee","type":"comment","z":"f04e2126.57d3","name":"------------ Publish current name and id of workpiece ----------","info":"When the integrated NFC reader detects a new workpiece, the information (NFC-ID and name) of this workpiece are shown in the dashboard.","x":270,"y":2200,"wires":[]},{"id":"913a4a54.6ffac8","type":"inject","z":"f04e2126.57d3","name":"Repeat_Interval","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":171.5,"y":2267,"wires":[["27338b0c.7b9224","539c47cb.d81ee8"]]},{"id":"27338b0c.7b9224","type":"change","z":"f04e2126.57d3","name":"write global variables to msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"sortingline.current_workpiece.color","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":423,"y":2240,"wires":[["98b521d8.9cf99"]]},{"id":"539c47cb.d81ee8","type":"change","z":"f04e2126.57d3","name":"write global variables to msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"sortingline.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":421,"y":2282,"wires":[["51360534.ecd71c"]]},{"id":"98b521d8.9cf99","type":"ui_text","z":"f04e2126.57d3","group":"16aa3964.cb67e7","order":0,"width":0,"height":0,"name":"Name","label":"Name:","format":"{{msg.payload}}","layout":"row-left","x":624,"y":2241,"wires":[]},{"id":"51360534.ecd71c","type":"ui_text","z":"f04e2126.57d3","group":"16aa3964.cb67e7","order":0,"width":0,"height":0,"name":"ID:","label":"ID:","format":"{{msg.payload}}","layout":"row-left","x":624,"y":2281,"wires":[]},{"id":"5de25f29.645bc","type":"comment","z":"b017d628.55b3e8","name":"------------ Publish current name and id of workpiece ----------","info":"If the MEs of the vacuum gripper has stored the informations about a workpiece, these should be displayed","x":270,"y":1760,"wires":[]},{"id":"398bd66b.85883a","type":"inject","z":"b017d628.55b3e8","name":"Repeat_Interval","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":191.5,"y":1827,"wires":[["2bf7caa0.10ebf6","83dca723.bd8918"]]},{"id":"2bf7caa0.10ebf6","type":"change","z":"b017d628.55b3e8","name":"write global variables to msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"vaccumgripper2.current_workpiece.color","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":443,"y":1800,"wires":[["8b2afae9.d96578"]]},{"id":"83dca723.bd8918","type":"change","z":"b017d628.55b3e8","name":"write global variables to msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"vaccumgripper2.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":1840,"wires":[["6f25d9c6.b78b98"]]},{"id":"bebccc2d.712e7","type":"inject","z":"523571ab.a711b","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":170,"y":120,"wires":[["41324eaa.10dc4"]]},{"id":"ab278f2c.e4cde","type":"comment","z":"523571ab.a711b","name":"------------ Get the picture of the hight bay warehouse ------------","info":"These 2 nodes call the URL to get the image (stored in the IBM Cloud Object Storage) of the warehouse after a restart of the Node-RED instance. This image is then shown in the warehouse-page of the dashboard","x":320,"y":80,"wires":[]},{"id":"41324eaa.10dc4","type":"ui_template","z":"523571ab.a711b","group":"1171bd19.46f573","name":"UI_Template","order":1,"width":0,"height":0,"format":"<div height=\"350\" style=\"height: 350px;\">\n<img src=\"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/FT_Automatisiertes_Hochregallager-9V.jpg\" width=\"400\"><br/>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":350,"y":120,"wires":[[]]},{"id":"bb0129f0.28e9f8","type":"inject","z":"fab27939.ff21e8","name":"Inject","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":880,"wires":[["d5397e6b.4cdc2"]]},{"id":"2741d4b9.2d63ec","type":"switch","z":"fab27939.ff21e8","name":"Check if there is a cmd in pos 1","property":"warehouse1.commands.position_1","propertyType":"global","rules":[{"t":"neq","v":"","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":310,"y":960,"wires":[["1537f113.d94cdf"]]},{"id":"1537f113.d94cdf","type":"change","z":"fab27939.ff21e8","name":"Run the first cmd","rules":[{"t":"set","p":"payload","pt":"msg","to":"warehouse1.commands.position_1","tot":"global"},{"t":"set","p":"warehouse1.commands.current_command","pt":"global","to":"warehouse1.commands.position_1","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":1000,"wires":[["142f349.d0251cb","b01eb705.20f868"]]},{"id":"b01eb705.20f868","type":"change","z":"fab27939.ff21e8","name":"Move pos2 to pos1","rules":[{"t":"set","p":"warehouse1.commands.position_1","pt":"global","to":"warehouse1.commands.position_2","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":1040,"wires":[["aa04601e.b0e5"]]},{"id":"aa04601e.b0e5","type":"change","z":"fab27939.ff21e8","name":"Move pos3 to pos2","rules":[{"t":"set","p":"warehouse1.commands.position_2","pt":"global","to":"warehouse1.commands.position_3","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":1080,"wires":[["39dba648.491d4a"]]},{"id":"39dba648.491d4a","type":"change","z":"fab27939.ff21e8","name":"Move pos4 to pos3","rules":[{"t":"set","p":"warehouse1.commands.position_3","pt":"global","to":"warehouse1.commands.position_4","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":1120,"wires":[["43b15da1.99f2d4"]]},{"id":"43b15da1.99f2d4","type":"change","z":"fab27939.ff21e8","name":"Move pos5 to pos4","rules":[{"t":"set","p":"warehouse1.commands.position_4","pt":"global","to":"warehouse1.commands.position_5","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":1160,"wires":[["aa2ab3a0.d6c01"]]},{"id":"aa2ab3a0.d6c01","type":"change","z":"fab27939.ff21e8","name":"Move pos6 to pos5","rules":[{"t":"set","p":"warehouse1.commands.position_5","pt":"global","to":"warehouse1.commands.position_6","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":1200,"wires":[["fe3ed22f.4c52c"]]},{"id":"fe3ed22f.4c52c","type":"change","z":"fab27939.ff21e8","name":"Move pos7 to pos6","rules":[{"t":"set","p":"warehouse1.commands.position_6","pt":"global","to":"warehouse1.commands.position_7","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":1240,"wires":[["32d2c2ce.5a401e"]]},{"id":"32d2c2ce.5a401e","type":"change","z":"fab27939.ff21e8","name":"Move pos8 to pos7","rules":[{"t":"set","p":"warehouse1.commands.position_7","pt":"global","to":"warehouse1.commands.position_8","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":1280,"wires":[["7ac1c96c.e0be18"]]},{"id":"7ac1c96c.e0be18","type":"change","z":"fab27939.ff21e8","name":"Move pos9 to pos8","rules":[{"t":"set","p":"warehouse1.commands.position_8","pt":"global","to":"warehouse1.commands.position_9","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":1320,"wires":[["9a69cda5.5b5a5"]]},{"id":"9a69cda5.5b5a5","type":"change","z":"fab27939.ff21e8","name":"Delete pos9","rules":[{"t":"set","p":"warehouse1.commands.position_9","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":1360,"wires":[[]]},{"id":"d5397e6b.4cdc2","type":"switch","z":"fab27939.ff21e8","name":"Check Warehouse 1 available","property":"warehouse1.available","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":310,"y":880,"wires":[["2de71966.d08796"]]},{"id":"bb6bc7e8.bb3ba8","type":"change","z":"fab27939.ff21e8","name":"No workpiece of this color available","rules":[{"t":"set","p":"payload","pt":"msg","to":"No workpiece of this color available","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":1300,"wires":[["7e558e20.8fabb"]]},{"id":"7e558e20.8fabb","type":"ui_toast","z":"fab27939.ff21e8","position":"top right","displayTime":"7","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","topic":"Error Message Warehouse 1","name":"Error Message","x":740,"y":1340,"wires":[]},{"id":"137fdbad.7061e4","type":"comment","z":"5c83a1e8.ad766","name":"----------- Check if Vaccum Gripper 1 is available ---------","info":"If the plant is waiting for a command it sends the event 8.\nWhen it has recieved a command it sends the event 9","x":280,"y":2300,"wires":[]},{"id":"d57eef70.d399e","type":"switch","z":"5c83a1e8.ad766","name":"check if available","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"8","vt":"str"},{"t":"eq","v":"9","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":430,"y":2340,"wires":[["91dac1fd.0bd06"],["baeaccfa.1c4b5"]]},{"id":"baeaccfa.1c4b5","type":"change","z":"5c83a1e8.ad766","name":"set global not available","rules":[{"t":"set","p":"vaccumgripper1.available","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":660,"y":2360,"wires":[["dd042729.4cd988"]]},{"id":"91dac1fd.0bd06","type":"change","z":"5c83a1e8.ad766","name":"set global  available","rules":[{"t":"set","p":"vaccumgripper1.available","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":650,"y":2320,"wires":[["dd042729.4cd988"]]},{"id":"ec2a04c.d6af3f8","type":"ibmiot in","z":"5c83a1e8.ad766","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"VacuumGripperMunich_1","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"VacuumGripperMunich_1","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":210,"y":2340,"wires":[["d57eef70.d399e"]]},{"id":"2de71966.d08796","type":"switch","z":"fab27939.ff21e8","name":"Check Vacuum Gripper 1 available","property":"vaccumgripper1.available","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":320,"y":920,"wires":[["2741d4b9.2d63ec"]]},{"id":"b2c4f004.b716","type":"switch","z":"b017d628.55b3e8","name":"Check if cmd pos1 is free","property":"vaccumgripper2.commands.position_1","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":910,"y":2000,"wires":[["37ab38a.8d3b5c8"],["d786960.dcdcb68"]]},{"id":"d786960.dcdcb68","type":"switch","z":"b017d628.55b3e8","name":"Check if cmd pos2 is free","property":"vaccumgripper2.commands.position_2","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":910,"y":2040,"wires":[["2f1606af.dde51a"],["4b63edea.72f2e4"]]},{"id":"4b63edea.72f2e4","type":"switch","z":"b017d628.55b3e8","name":"Check if cmd pos3 is free","property":"vaccumgripper2.commands.position_3","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":910,"y":2080,"wires":[["e6594394.8567d"],["9b1c31ba.740ff"]]},{"id":"9b1c31ba.740ff","type":"switch","z":"b017d628.55b3e8","name":"Check if cmd pos4 is free","property":"vaccumgripper2.commands.position_4","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":910,"y":2120,"wires":[["272fd97.7945626"],["52b5dab.a4a8624"]]},{"id":"52b5dab.a4a8624","type":"switch","z":"b017d628.55b3e8","name":"Check if cmd pos5 is free","property":"vaccumgripper2.commands.position_5","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":910,"y":2160,"wires":[["859c6ac3.e9b138"],["77bc35d3.9e717c"]]},{"id":"77bc35d3.9e717c","type":"switch","z":"b017d628.55b3e8","name":"Check if cmd pos6 is free","property":"vaccumgripper2.commands.position_6","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":910,"y":2200,"wires":[["7aeec3fa.85402c"],["dbe1a353.12035"]]},{"id":"dbe1a353.12035","type":"switch","z":"b017d628.55b3e8","name":"Check if cmd pos7 is free","property":"vaccumgripper2.commands.position_7","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":910,"y":2240,"wires":[["8ef098e3.75ac58"],["bbc0762f.7face8"]]},{"id":"bbc0762f.7face8","type":"switch","z":"b017d628.55b3e8","name":"Check if cmd pos8 is free","property":"vaccumgripper2.commands.position_8","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":910,"y":2280,"wires":[["d7aae647.91e3f8"],["bc587fb9.36dd7"]]},{"id":"bc587fb9.36dd7","type":"switch","z":"b017d628.55b3e8","name":"Check if cmd pos9 is free","property":"vaccumgripper2.commands.position_9","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":910,"y":2320,"wires":[["311048d1.632588"],["7beaf4f9.6a121c"]]},{"id":"7beaf4f9.6a121c","type":"change","z":"b017d628.55b3e8","name":"Can' take an other cmd","rules":[{"t":"set","p":"payload","pt":"msg","to":"No fruther command can be stored. Storage exceeded","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":910,"y":2380,"wires":[["9d4cf8f8.4efd68"]]},{"id":"37ab38a.8d3b5c8","type":"change","z":"b017d628.55b3e8","name":"Store command in 1st Position","rules":[{"t":"set","p":"vaccumgripper2.commands.position_1","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":2000,"wires":[[]]},{"id":"2f1606af.dde51a","type":"change","z":"b017d628.55b3e8","name":"Store command in 2nd Position","rules":[{"t":"set","p":"vaccumgripper2.commands.position_2","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":2040,"wires":[[]]},{"id":"e6594394.8567d","type":"change","z":"b017d628.55b3e8","name":"Store command in 3rd Position","rules":[{"t":"set","p":"vaccumgripper2.commands.position_3","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":2080,"wires":[[]]},{"id":"272fd97.7945626","type":"change","z":"b017d628.55b3e8","name":"Store command in 4th Position","rules":[{"t":"set","p":"vaccumgripper2.commands.position_4","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":2120,"wires":[[]]},{"id":"859c6ac3.e9b138","type":"change","z":"b017d628.55b3e8","name":"Store command in 5th Position","rules":[{"t":"set","p":"vaccumgripper2.commands.position_5","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":2160,"wires":[[]]},{"id":"7aeec3fa.85402c","type":"change","z":"b017d628.55b3e8","name":"Store command in 6th Position","rules":[{"t":"set","p":"vaccumgripper2.commands.position_6","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":2200,"wires":[[]]},{"id":"8ef098e3.75ac58","type":"change","z":"b017d628.55b3e8","name":"Store command in 7th Position","rules":[{"t":"set","p":"vaccumgripper2.commands.position_7","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":2240,"wires":[[]]},{"id":"d7aae647.91e3f8","type":"change","z":"b017d628.55b3e8","name":"Store command in 8th Position","rules":[{"t":"set","p":"vaccumgripper2.commands.position_8","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":2280,"wires":[[]]},{"id":"311048d1.632588","type":"change","z":"b017d628.55b3e8","name":"Store command in 9th Position","rules":[{"t":"set","p":"vaccumgripper2.commands.position_9","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":2320,"wires":[[]]},{"id":"9d4cf8f8.4efd68","type":"ui_toast","z":"b017d628.55b3e8","position":"top right","displayTime":"7","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","topic":"Error Message Vacuum Gripper 2","name":"Error Message","x":1120,"y":2380,"wires":[]},{"id":"11840d7c.a05293","type":"comment","z":"b017d628.55b3e8","name":"----------- Excecute the commands stored in the Array----------","info":"If there are any commands stored in the array, they should be deployed if possible. Therefore we will check if the vacuum gripper and the warehouse 2 are available. If then a command is stored in the list we will send this one to the vacuum gripper. The other commands (if there are any) will move one position forward.","x":300,"y":2440,"wires":[]},{"id":"1385473f.886459","type":"inject","z":"b017d628.55b3e8","name":"Inject","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":2500,"wires":[["c7b6a4b8.62cbb8"]]},{"id":"3f0dec7a.da4084","type":"switch","z":"b017d628.55b3e8","name":"Check if there is a cmd in pos 1","property":"vaccumgripper2.commands.position_1","propertyType":"global","rules":[{"t":"neq","v":"","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":330,"y":2580,"wires":[["7b8950ae.8851f"]]},{"id":"7b8950ae.8851f","type":"change","z":"b017d628.55b3e8","name":"Run the first cmd","rules":[{"t":"set","p":"payload","pt":"msg","to":"vaccumgripper2.commands.position_1","tot":"global"},{"t":"set","p":"vaccumgripper2.commands.current_command","pt":"global","to":"vaccumgripper2.commands.position_1","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":2620,"wires":[["51fa5c2b.ab8ae4","184d1ed4.c7fcf1"]]},{"id":"51fa5c2b.ab8ae4","type":"change","z":"b017d628.55b3e8","name":"Move pos2 to pos1","rules":[{"t":"set","p":"vaccumgripper2.commands.position_1","pt":"global","to":"vaccumgripper2.commands.position_2","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":2660,"wires":[["9c72176c.65ab68"]]},{"id":"9c72176c.65ab68","type":"change","z":"b017d628.55b3e8","name":"Move pos3 to pos2","rules":[{"t":"set","p":"vaccumgripper2.commands.position_2","pt":"global","to":"vaccumgripper2.commands.position_3","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":2700,"wires":[["e4a90a52.5da6d8"]]},{"id":"e4a90a52.5da6d8","type":"change","z":"b017d628.55b3e8","name":"Move pos4 to pos3","rules":[{"t":"set","p":"vaccumgripper2.commands.position_3","pt":"global","to":"vaccumgripper2.commands.position_4","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":2740,"wires":[["ae8a33ac.f39b5"]]},{"id":"ae8a33ac.f39b5","type":"change","z":"b017d628.55b3e8","name":"Move pos5 to pos4","rules":[{"t":"set","p":"vaccumgripper2.commands.position_4","pt":"global","to":"vaccumgripper2.commands.position_5","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":2780,"wires":[["13e85eb4.829c81"]]},{"id":"13e85eb4.829c81","type":"change","z":"b017d628.55b3e8","name":"Move pos6 to pos5","rules":[{"t":"set","p":"vaccumgripper2.commands.position_5","pt":"global","to":"vaccumgripper2.commands.position_6","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":2820,"wires":[["815dc278.fe85e"]]},{"id":"815dc278.fe85e","type":"change","z":"b017d628.55b3e8","name":"Move pos7 to pos6","rules":[{"t":"set","p":"vaccumgripper2.commands.position_6","pt":"global","to":"vaccumgripper2.commands.position_7","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":2860,"wires":[["95f8f20f.04568"]]},{"id":"95f8f20f.04568","type":"change","z":"b017d628.55b3e8","name":"Move pos8 to pos7","rules":[{"t":"set","p":"vaccumgripper2.commands.position_7","pt":"global","to":"vaccumgripper2.commands.position_8","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":2900,"wires":[["22aef26c.f4e1de"]]},{"id":"22aef26c.f4e1de","type":"change","z":"b017d628.55b3e8","name":"Move pos9 to pos8","rules":[{"t":"set","p":"vaccumgripper2.commands.position_8","pt":"global","to":"vaccumgripper2.commands.position_9","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":2940,"wires":[["b90d5a1c.fcf658"]]},{"id":"b90d5a1c.fcf658","type":"change","z":"b017d628.55b3e8","name":"Delete pos9","rules":[{"t":"set","p":"vaccumgripper2.commands.position_9","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":2980,"wires":[[]]},{"id":"c7b6a4b8.62cbb8","type":"switch","z":"b017d628.55b3e8","name":"Check Vaccum Gripper 2 is available","property":"vaccumgripper2.available","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":350,"y":2500,"wires":[["b60ba791.aac108"]]},{"id":"b60ba791.aac108","type":"switch","z":"b017d628.55b3e8","name":"Check Warehouse 2 is available","property":"warehouse2.available","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":330,"y":2540,"wires":[["3f0dec7a.da4084"]]},{"id":"184d1ed4.c7fcf1","type":"switch","z":"b017d628.55b3e8","name":"Identify the slide","property":"payload.command","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"},{"t":"eq","v":"3","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":580,"y":2620,"wires":[["c7711437.70c138"],["d3cf908e.b24c1"],["4bcddcbf.9ad6f4"]]},{"id":"2436d715.bc3c08","type":"ui_text","z":"523571ab.a711b","group":"7a582220.ab5c2c","order":0,"width":0,"height":0,"name":"Current command","label":"Current command:","format":"{{msg.payload}}","layout":"row-spread","x":750,"y":2240,"wires":[]},{"id":"f550ad92.61a41","type":"ui_text","z":"523571ab.a711b","group":"7a582220.ab5c2c","order":0,"width":0,"height":0,"name":"Command in Position 1","label":"Command in Position 1:","format":"{{msg.payload}}","layout":"row-spread","x":770,"y":2280,"wires":[]},{"id":"55d5a4eb.4da12c","type":"ui_text","z":"523571ab.a711b","group":"7a582220.ab5c2c","order":0,"width":0,"height":0,"name":"Command in Position 2","label":"Command in Position 2:","format":"{{msg.payload}}","layout":"row-spread","x":770,"y":2320,"wires":[]},{"id":"dd274fe6.ab615","type":"ui_text","z":"523571ab.a711b","group":"7a582220.ab5c2c","order":0,"width":0,"height":0,"name":"Command in Position 3","label":"Command in Position 3:","format":"{{msg.payload}}","layout":"row-spread","x":770,"y":2360,"wires":[]},{"id":"f2de910.af5ea7","type":"ui_text","z":"523571ab.a711b","group":"7a582220.ab5c2c","order":0,"width":0,"height":0,"name":"Command in Position 4","label":"Command in Position 4:","format":"{{msg.payload}}","layout":"row-spread","x":770,"y":2400,"wires":[]},{"id":"4ac68b32.4dc324","type":"inject","z":"523571ab.a711b","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":210,"y":2300,"wires":[["1dd762cf.36ce4d","f554e561.89f688","1db0a545.27791b","3159c5b4.4a89fa","4ba4c8cf.4fd7b8"]]},{"id":"f554e561.89f688","type":"change","z":"523571ab.a711b","name":"Command in Position 1","rules":[{"t":"set","p":"payload","pt":"msg","to":"warehouse1.commands.position_1","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":2280,"wires":[["f550ad92.61a41"]]},{"id":"1db0a545.27791b","type":"change","z":"523571ab.a711b","name":"Command in Position 2","rules":[{"t":"set","p":"payload","pt":"msg","to":"warehouse1.commands.position_2","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":2320,"wires":[["55d5a4eb.4da12c"]]},{"id":"3159c5b4.4a89fa","type":"change","z":"523571ab.a711b","name":"Command in Position 3","rules":[{"t":"set","p":"payload","pt":"msg","to":"warehouse1.commands.position_3","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":2360,"wires":[["dd274fe6.ab615"]]},{"id":"4ba4c8cf.4fd7b8","type":"change","z":"523571ab.a711b","name":"Command in Position 4","rules":[{"t":"set","p":"payload","pt":"msg","to":"warehouse1.commands.position_4","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":2400,"wires":[["f2de910.af5ea7"]]},{"id":"1dd762cf.36ce4d","type":"change","z":"523571ab.a711b","name":"Current Command","rules":[{"t":"set","p":"payload","pt":"msg","to":"warehouse1.commands.current_command","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":2240,"wires":[["2436d715.bc3c08"]]},{"id":"65be8e68.34602","type":"comment","z":"523571ab.a711b","name":"---------- Display the current commands ----------","info":"The MES stores a list of commands that should be excecuted. This list and the current command should be diplayed in the dashboard","x":290,"y":2180,"wires":[]},{"id":"960d7ddd.334d3","type":"ui_text","z":"d5f5f57.d049b08","group":"6a0aa5d3.aff0fc","order":0,"width":0,"height":0,"name":"Current command","label":"Current command:","format":"{{msg.payload}}","layout":"row-spread","x":1450,"y":2340,"wires":[]},{"id":"efe2d638.b2d618","type":"ui_text","z":"d5f5f57.d049b08","group":"6a0aa5d3.aff0fc","order":0,"width":0,"height":0,"name":"Command in Position 1","label":"Command in Position 1:","format":"{{msg.payload}}","layout":"row-spread","x":1470,"y":2380,"wires":[]},{"id":"16ca76df.34f969","type":"ui_text","z":"d5f5f57.d049b08","group":"6a0aa5d3.aff0fc","order":0,"width":0,"height":0,"name":"Command in Position 2","label":"Command in Position 2:","format":"{{msg.payload}}","layout":"row-spread","x":1470,"y":2420,"wires":[]},{"id":"8d3f72e8.a21dc","type":"ui_text","z":"d5f5f57.d049b08","group":"6a0aa5d3.aff0fc","order":0,"width":0,"height":0,"name":"Command in Position 3","label":"Command in Position 3:","format":"{{msg.payload}}","layout":"row-spread","x":1470,"y":2460,"wires":[]},{"id":"7c21339.66f38cc","type":"ui_text","z":"d5f5f57.d049b08","group":"6a0aa5d3.aff0fc","order":0,"width":0,"height":0,"name":"Command in Position 4","label":"Command in Position 4:","format":"{{msg.payload}}","layout":"row-spread","x":1470,"y":2500,"wires":[]},{"id":"2ef0f948.eccac6","type":"inject","z":"d5f5f57.d049b08","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":190,"y":2400,"wires":[["2fb4148c.57162c","24c9e57.fa74c1a","c9d34fcb.14a9c","29139bc5.ef4ba4","4364df48.05916"]]},{"id":"24c9e57.fa74c1a","type":"change","z":"d5f5f57.d049b08","name":"Command in Position 1","rules":[{"t":"set","p":"command","pt":"msg","to":"processingstation.commands.position_1.command","tot":"global"},{"t":"set","p":"position","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":2380,"wires":[["b04281f0.761b1"]]},{"id":"c9d34fcb.14a9c","type":"change","z":"d5f5f57.d049b08","name":"Command in Position 2","rules":[{"t":"set","p":"command","pt":"msg","to":"processingstation.commands.position_2.command","tot":"global"},{"t":"set","p":"position","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":2420,"wires":[["b04281f0.761b1"]]},{"id":"29139bc5.ef4ba4","type":"change","z":"d5f5f57.d049b08","name":"Command in Position 3","rules":[{"t":"set","p":"command","pt":"msg","to":"processingstation.commands.position_3.command","tot":"global"},{"t":"set","p":"position","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":2460,"wires":[["b04281f0.761b1"]]},{"id":"4364df48.05916","type":"change","z":"d5f5f57.d049b08","name":"Command in Position 4","rules":[{"t":"set","p":"command","pt":"msg","to":"processingstation.commands.position_4.command","tot":"global"},{"t":"set","p":"position","pt":"msg","to":"4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":2500,"wires":[["b04281f0.761b1"]]},{"id":"2fb4148c.57162c","type":"change","z":"d5f5f57.d049b08","name":"Current Command","rules":[{"t":"set","p":"command","pt":"msg","to":"processingstation.commands.current_command.command","tot":"global"},{"t":"set","p":"position","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":2340,"wires":[["b04281f0.761b1"]]},{"id":"186c4aea.610235","type":"comment","z":"d5f5f57.d049b08","name":"---------- Display the current commands ----------","info":"The MES hold a list of the commands in line. The first 5 entries as well as the currently executed command should be displaed in the dashboard","x":270,"y":2280,"wires":[]},{"id":"77ab3c81.6f46d4","type":"inject","z":"347bd197.17ccbe","name":"","topic":"","payload":"","payloadType":"date","repeat":"86400","crontab":"","once":true,"onceDelay":0.1,"x":130,"y":120,"wires":[["b192cdbc.f9858"]]},{"id":"b192cdbc.f9858","type":"ui_template","z":"347bd197.17ccbe","group":"c256e625.f8a8a8","name":"UI_Template","order":1,"width":0,"height":0,"format":"<div height=\"400\" style=\"height: 400px;\">\n<img src=\"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/location.png\" width=\"400\"><br/>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":310,"y":120,"wires":[[]]},{"id":"1627fda1.26b752","type":"ui_button","z":"fab27939.ff21e8","name":"","group":"58c0fe8c.8a148","order":0,"width":0,"height":0,"passthru":false,"label":"Deliver White","tooltip":"","color":"","bgcolor":"","icon":"","payload":"White","payloadType":"str","topic":"","x":430,"y":360,"wires":[["f1e0e642.3c9278","3b3c6670.33ffaa"]]},{"id":"2a4b4f1c.d20e6","type":"ui_button","z":"fab27939.ff21e8","name":"","group":"58c0fe8c.8a148","order":0,"width":0,"height":0,"passthru":false,"label":"Deliver Red","tooltip":"","color":"","bgcolor":"","icon":"","payload":"Red","payloadType":"str","topic":"","x":429,"y":400,"wires":[["f1e0e642.3c9278","3b3c6670.33ffaa"]]},{"id":"d49427d2.1c8278","type":"ui_button","z":"fab27939.ff21e8","name":"","group":"58c0fe8c.8a148","order":0,"width":0,"height":0,"passthru":false,"label":"Deliver Blue","tooltip":"","color":"","bgcolor":"","icon":"","payload":"Blue","payloadType":"str","topic":"","x":429,"y":440,"wires":[["f1e0e642.3c9278","3b3c6670.33ffaa"]]},{"id":"98b350cd.3fdb6","type":"ibmiot in","z":"fab27939.ff21e8","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"cmd","logicalInterface":"","ruleId":"","deviceId":"","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Commands","service":"registered","allDevices":true,"allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":true,"allFormats":"","qos":0,"x":150,"y":480,"wires":[["c4403d11.0a983"]]},{"id":"c4403d11.0a983","type":"switch","z":"fab27939.ff21e8","name":"Commands for Warehouse 1","property":"deviceId","propertyType":"msg","rules":[{"t":"eq","v":"warehouse","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":376,"y":482,"wires":[["4956ffd9.3fdd4","3b3c6670.33ffaa"]]},{"id":"61520a7b.e141c4","type":"switch","z":"fab27939.ff21e8","name":"Job","property":"commandType","propertyType":"msg","rules":[{"t":"eq","v":"100","vt":"num"},{"t":"eq","v":"101","vt":"num"},{"t":"eq","v":"102","vt":"num"}],"checkall":"true","repair":false,"outputs":3,"x":307,"y":583,"wires":[["9760017f.32619"],["68170d6c.db22d4"],["8a2e42eb.28347"]]},{"id":"4956ffd9.3fdd4","type":"change","z":"fab27939.ff21e8","name":"Delete msg content","rules":[{"t":"set","p":"topic","pt":"msg","to":"\"\"","tot":"str"},{"t":"delete","p":"deviceId","pt":"msg"},{"t":"delete","p":"deviceType","pt":"msg"},{"t":"delete","p":"eventType","pt":"msg"},{"t":"delete","p":"format","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":130,"y":583,"wires":[["61520a7b.e141c4"]]},{"id":"9760017f.32619","type":"change","z":"fab27939.ff21e8","name":"White","rules":[{"t":"set","p":"payload","pt":"msg","to":"White","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":447.5,"y":547,"wires":[["f1e0e642.3c9278"]]},{"id":"68170d6c.db22d4","type":"change","z":"fab27939.ff21e8","name":"Red","rules":[{"t":"set","p":"payload","pt":"msg","to":"Red","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":448,"y":583,"wires":[["f1e0e642.3c9278"]]},{"id":"8a2e42eb.28347","type":"change","z":"fab27939.ff21e8","name":"Blue","rules":[{"t":"set","p":"payload","pt":"msg","to":"Blue","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":447,"y":618,"wires":[["f1e0e642.3c9278"]]},{"id":"5ad9f572.66bd9c","type":"comment","z":"fab27939.ff21e8","name":"----------- Store all the commands in an array ---------","info":"The MES stores new incomming commands in an array. As sson as the plant is ready for the excecution of the firs command of the list, this one is send to the plant.\nThe commands can be given via the three buttons in the dashboard or by sending them via the chatbot.\nWhen a new command is incomming (independently of the origin) it is first checked if the plant is available and so can execute the command. When not the command is stored in the list and a notofication informs the user that the command is hold back.\n\nThe list can store upt to 9 commands (there are only 9 workpieces available). When the user wants to store more messages, an error notification is send out.","x":290,"y":300,"wires":[]},{"id":"f1e0e642.3c9278","type":"switch","z":"fab27939.ff21e8","name":"Check if cmd pos1 is free","property":"warehouse1.commands.position_1","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":360,"wires":[["ac334844.be2708"],["de834ceb.9591a"]]},{"id":"de834ceb.9591a","type":"switch","z":"fab27939.ff21e8","name":"Check if cmd pos2 is free","property":"warehouse1.commands.position_2","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":400,"wires":[["480c406d.eb809"],["74e0ecb7.91c244"]]},{"id":"74e0ecb7.91c244","type":"switch","z":"fab27939.ff21e8","name":"Check if cmd pos3 is free","property":"warehouse1.commands.position_3","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":440,"wires":[["cd4e1053.1586d"],["3f7c2f2b.00388"]]},{"id":"3f7c2f2b.00388","type":"switch","z":"fab27939.ff21e8","name":"Check if cmd pos4 is free","property":"warehouse1.commands.position_4","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":480,"wires":[["6aa417e0.6166c8"],["e4857f5e.4eac8"]]},{"id":"e4857f5e.4eac8","type":"switch","z":"fab27939.ff21e8","name":"Check if cmd pos5 is free","property":"warehouse1.commands.position_5","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":520,"wires":[["3cdc6137.2f8e3e"],["6cb77d6f.2fca34"]]},{"id":"6cb77d6f.2fca34","type":"switch","z":"fab27939.ff21e8","name":"Check if cmd pos6 is free","property":"warehouse1.commands.position_6","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":560,"wires":[["ec33d774.aae178"],["fd617cea.a9143"]]},{"id":"fd617cea.a9143","type":"switch","z":"fab27939.ff21e8","name":"Check if cmd pos7 is free","property":"warehouse1.commands.position_7","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":600,"wires":[["9eccd89c.a74048"],["fc0b08db.be7808"]]},{"id":"fc0b08db.be7808","type":"switch","z":"fab27939.ff21e8","name":"Check if cmd pos8 is free","property":"warehouse1.commands.position_8","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":640,"wires":[["a2510da1.ba251"],["1c33003b.96b6"]]},{"id":"1c33003b.96b6","type":"switch","z":"fab27939.ff21e8","name":"Check if cmd pos9 is free","property":"warehouse1.commands.position_9","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":680,"wires":[["e7b281b6.76e35"],["5ca0d379.d4b62c"]]},{"id":"5ca0d379.d4b62c","type":"change","z":"fab27939.ff21e8","name":"Can' take an other cmd","rules":[{"t":"set","p":"payload","pt":"msg","to":"No fruther command can be stored. Storage exceeded","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":740,"wires":[["d2a6f124.975d8"]]},{"id":"d2a6f124.975d8","type":"ui_toast","z":"fab27939.ff21e8","position":"top right","displayTime":"7","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","topic":"Error Message Warehouse 1","name":"Error Message","x":940,"y":740,"wires":[]},{"id":"ac334844.be2708","type":"change","z":"fab27939.ff21e8","name":"Store command in 1st Position","rules":[{"t":"set","p":"warehouse1.commands.position_1","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":360,"wires":[[]]},{"id":"480c406d.eb809","type":"change","z":"fab27939.ff21e8","name":"Store command in 2nd Position","rules":[{"t":"set","p":"warehouse1.commands.position_2","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":400,"wires":[[]]},{"id":"cd4e1053.1586d","type":"change","z":"fab27939.ff21e8","name":"Store command in 3rd Position","rules":[{"t":"set","p":"warehouse1.commands.position_3","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":440,"wires":[[]]},{"id":"6aa417e0.6166c8","type":"change","z":"fab27939.ff21e8","name":"Store command in 4th Position","rules":[{"t":"set","p":"warehouse1.commands.position_4","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":480,"wires":[[]]},{"id":"3cdc6137.2f8e3e","type":"change","z":"fab27939.ff21e8","name":"Store command in 5th Position","rules":[{"t":"set","p":"warehouse1.commands.position_5","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":520,"wires":[[]]},{"id":"ec33d774.aae178","type":"change","z":"fab27939.ff21e8","name":"Store command in 6th Position","rules":[{"t":"set","p":"warehouse1.commands.position_6","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":560,"wires":[[]]},{"id":"9eccd89c.a74048","type":"change","z":"fab27939.ff21e8","name":"Store command in 7th Position","rules":[{"t":"set","p":"warehouse1.commands.position_7","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":600,"wires":[[]]},{"id":"a2510da1.ba251","type":"change","z":"fab27939.ff21e8","name":"Store command in 8th Position","rules":[{"t":"set","p":"warehouse1.commands.position_8","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":640,"wires":[[]]},{"id":"e7b281b6.76e35","type":"change","z":"fab27939.ff21e8","name":"Store command in 9th Position","rules":[{"t":"set","p":"warehouse1.commands.position_9","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":680,"wires":[[]]},{"id":"287778dc.013488","type":"ibmiot in","z":"fab27939.ff21e8","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"WarehouseMunich_1","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"WarehouseMunich_1","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":180,"y":1460,"wires":[["c0838c1e.cba1a"]]},{"id":"c0838c1e.cba1a","type":"switch","z":"fab27939.ff21e8","name":"Warehouse has delivered","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"30","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":410,"y":1460,"wires":[["c06a9228.a4404"]]},{"id":"d9c7d662.8ce5f8","type":"function","z":"fab27939.ff21e8","name":"send command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 8,\n    \"timestamp\": 1351824120,\n    \"command\": 12\n}\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":1460,"wires":[["8c9a681f.cc4068"]]},{"id":"267e127f.4e0b0e","type":"ibmiot in","z":"fab27939.ff21e8","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"VacuumGripperMunich_1","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"VacuumGripperMunich_1","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":190,"y":1500,"wires":[["2b4dd9aa.bd76e6"]]},{"id":"2b4dd9aa.bd76e6","type":"switch","z":"fab27939.ff21e8","name":"Vacuum Gripper has finished Pick-up","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"39","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":470,"y":1500,"wires":[["71a981f6.3c9e7"]]},{"id":"dbf481ad.b2a55","type":"function","z":"fab27939.ff21e8","name":"send command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 7,\n    \"timestamp\": 1351824120,\n    \"command\": 22\n}\nreturn msg;","outputs":1,"noerr":0,"x":920,"y":1500,"wires":[["58c2c551.9f07ac"]]},{"id":"58c2c551.9f07ac","type":"ibmiot out","z":"fab27939.ff21e8","authentication":"apiKey","apiKey":"6b68196b.a83528","outputType":"cmd","deviceId":"WarehouseMunich_1","deviceType":"0.20.7","eventCommandType":"command","format":"json","data":"{}","qos":0,"name":"WarehouseMunich_1","service":"registered","x":1120,"y":1500,"wires":[]},{"id":"8c9a681f.cc4068","type":"ibmiot out","z":"fab27939.ff21e8","authentication":"apiKey","apiKey":"6b68196b.a83528","outputType":"cmd","deviceId":"VacuumGripperMunich_1","deviceType":"0.20.7","eventCommandType":"command","format":"json","data":"{}","qos":0,"name":"VacuumGripperMunich_1","service":"registered","x":1030,"y":1460,"wires":[]},{"id":"c06a9228.a4404","type":"change","z":"fab27939.ff21e8","name":"Delete msg content","rules":[{"t":"set","p":"topic","pt":"msg","to":"\"\"","tot":"str"},{"t":"delete","p":"deviceId","pt":"msg"},{"t":"delete","p":"deviceType","pt":"msg"},{"t":"delete","p":"eventType","pt":"msg"},{"t":"delete","p":"format","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":1460,"wires":[["d9c7d662.8ce5f8"]]},{"id":"71a981f6.3c9e7","type":"change","z":"fab27939.ff21e8","name":"Delete msg content","rules":[{"t":"set","p":"topic","pt":"msg","to":"\"\"","tot":"str"},{"t":"delete","p":"deviceId","pt":"msg"},{"t":"delete","p":"deviceType","pt":"msg"},{"t":"delete","p":"eventType","pt":"msg"},{"t":"delete","p":"format","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":1500,"wires":[["dbf481ad.b2a55"]]},{"id":"b904e6f2.260748","type":"comment","z":"fab27939.ff21e8","name":"----------- Connect the Vaccum Gripper to the Warehouse ---------","info":"The following nodes coordinate the collaboration of warhouse 1 and vacuum gripper 1. Once the warehouse has successfully delivered a workpiece at the transfer position, it sends a command to the vacuum gripper to pick up the workpiece.\n\nAfter the vacuum gripper has gripped the workpiece, this one sends a command to the warehouse, that this one can continue to bring back the empty palette","x":310,"y":1420,"wires":[]},{"id":"7dc4656b.5507bc","type":"comment","z":"fab27939.ff21e8","name":"----------- Check if Warehouse 1 is available ---------","info":"If plant send the event 35 it is ready for a new command\nAfter the events 11 (einlagern beginnen) and 33(auslagern beginnen), the plant is busy","x":270,"y":1580,"wires":[]},{"id":"e419b441.ce9188","type":"ibmiot in","z":"fab27939.ff21e8","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"WarehouseMunich_1","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"WarehouseMunich_1","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":180,"y":1640,"wires":[["6f62a7ee.0f1178"]]},{"id":"6f62a7ee.0f1178","type":"switch","z":"fab27939.ff21e8","name":"check if available","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"35","vt":"str"},{"t":"eq","v":"11","vt":"str"},{"t":"eq","v":"33","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":430,"y":1640,"wires":[["e4c721ed.34fa8"],["7d296fed.274a5"],["7d296fed.274a5"]]},{"id":"7d296fed.274a5","type":"change","z":"fab27939.ff21e8","name":"set global not available","rules":[{"t":"set","p":"warehouse1.available","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":1660,"wires":[["4b50058f.2d5d3c"]]},{"id":"e4c721ed.34fa8","type":"change","z":"fab27939.ff21e8","name":"set global  available","rules":[{"t":"set","p":"warehouse1.available","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":1620,"wires":[["4b50058f.2d5d3c"]]},{"id":"89638c21.91ba4","type":"ibmiot in","z":"523571ab.a711b","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"WarehouseMunich_1","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"WarehouseMunich_1","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":180,"y":3020,"wires":[["af354b85.746c28"]]},{"id":"af354b85.746c28","type":"switch","z":"523571ab.a711b","name":"Switch","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"22","vt":"str"},{"t":"eq","v":"26","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":390,"y":3020,"wires":[["746d8aa5.024e74"],[]]},{"id":"746d8aa5.024e74","type":"switch","z":"523571ab.a711b","name":"Pos 11","property":"warehouse1.take_out","propertyType":"global","rules":[{"t":"cont","v":"position_11","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":3020,"wires":[["8296a1df.c4dde"],["66fbb77b.df3c18"]]},{"id":"66fbb77b.df3c18","type":"switch","z":"523571ab.a711b","name":"Pos 12","property":"warehouse1.take_out","propertyType":"global","rules":[{"t":"cont","v":"position_12","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":3060,"wires":[["14496dbe.01a3a2"],["64b7e4ec.dee8dc"]]},{"id":"64b7e4ec.dee8dc","type":"switch","z":"523571ab.a711b","name":"Pos 13","property":"warehouse1.take_out","propertyType":"global","rules":[{"t":"cont","v":"position_13","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":3100,"wires":[["bca3e455.3c22c8"],["ddeb4fbf.704ed"]]},{"id":"ddeb4fbf.704ed","type":"switch","z":"523571ab.a711b","name":"Pos 21","property":"warehouse1.take_out","propertyType":"global","rules":[{"t":"cont","v":"position_21","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":3160,"wires":[["62e330e9.a7ac1"],["5d77a1c8.f9346"]]},{"id":"5d77a1c8.f9346","type":"switch","z":"523571ab.a711b","name":"Pos 22","property":"warehouse1.take_out","propertyType":"global","rules":[{"t":"cont","v":"position_22","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":3200,"wires":[["6f4d914f.676dc"],["c3d75a86.d411f8"]]},{"id":"c3d75a86.d411f8","type":"switch","z":"523571ab.a711b","name":"Pos 23","property":"warehouse1.take_out","propertyType":"global","rules":[{"t":"cont","v":"position_23","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":3240,"wires":[["c34c159e.0219c8"],["b941f650.0942c8"]]},{"id":"b941f650.0942c8","type":"switch","z":"523571ab.a711b","name":"Pos 31","property":"warehouse1.take_out","propertyType":"global","rules":[{"t":"cont","v":"position_31","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":3300,"wires":[["4e1ec7c4.f00b78"],["256072c0.c865ae"]]},{"id":"256072c0.c865ae","type":"switch","z":"523571ab.a711b","name":"Pos 32","property":"warehouse1.take_out","propertyType":"global","rules":[{"t":"cont","v":"position_32","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":3340,"wires":[["e9cd308.8df2ed"],["48555fa9.a0d52"]]},{"id":"48555fa9.a0d52","type":"switch","z":"523571ab.a711b","name":"Pos 33","property":"warehouse1.take_out","propertyType":"global","rules":[{"t":"cont","v":"position_33","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":3380,"wires":[["7250dc66.3380e4"],["8af43298.e277"]]},{"id":"8296a1df.c4dde","type":"change","z":"523571ab.a711b","name":"Delete Entry","rules":[{"t":"set","p":"warehouse1.stock.position_11.workpiece","pt":"global","to":"","tot":"str"},{"t":"set","p":"warehouse1.stock.position_11.nfc_id","pt":"global","to":"","tot":"str"},{"t":"set","p":"payload.position","pt":"msg","to":"11","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3020,"wires":[["a07803b9.c7ed4"]]},{"id":"14496dbe.01a3a2","type":"change","z":"523571ab.a711b","name":"Delete Entry","rules":[{"t":"set","p":"warehouse1.stock.position_12.workpiece","pt":"global","to":"","tot":"str"},{"t":"set","p":"warehouse1.stock.position_12.nfc_id","pt":"global","to":"","tot":"str"},{"t":"set","p":"payload.position","pt":"msg","to":"12","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3060,"wires":[["a07803b9.c7ed4"]]},{"id":"bca3e455.3c22c8","type":"change","z":"523571ab.a711b","name":"Delete Entry","rules":[{"t":"set","p":"warehouse1.stock.position_13.workpiece","pt":"global","to":"","tot":"str"},{"t":"set","p":"warehouse1.stock.position_13.nfc_id","pt":"global","to":"","tot":"str"},{"t":"set","p":"payload.position","pt":"msg","to":"13","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3100,"wires":[["a07803b9.c7ed4"]]},{"id":"62e330e9.a7ac1","type":"change","z":"523571ab.a711b","name":"Delete Entry","rules":[{"t":"set","p":"warehouse1.stock.position_21.workpiece","pt":"global","to":"","tot":"str"},{"t":"set","p":"warehouse1.stock.position_21.nfc_id","pt":"global","to":"","tot":"str"},{"t":"set","p":"payload.position","pt":"msg","to":"21","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3160,"wires":[["a07803b9.c7ed4"]]},{"id":"6f4d914f.676dc","type":"change","z":"523571ab.a711b","name":"Delete Entry","rules":[{"t":"set","p":"warehouse1.stock.position_22.workpiece","pt":"global","to":"","tot":"str"},{"t":"set","p":"warehouse1.stock.position_22.nfc_id","pt":"global","to":"","tot":"str"},{"t":"set","p":"payload.position","pt":"msg","to":"22","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3200,"wires":[["a07803b9.c7ed4"]]},{"id":"c34c159e.0219c8","type":"change","z":"523571ab.a711b","name":"Delete Entry","rules":[{"t":"set","p":"warehouse1.stock.position_23.workpiece","pt":"global","to":"","tot":"str"},{"t":"set","p":"warehouse1.stock.position_23.nfc_id","pt":"global","to":"","tot":"str"},{"t":"set","p":"payload.position","pt":"msg","to":"23","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3240,"wires":[["a07803b9.c7ed4"]]},{"id":"4e1ec7c4.f00b78","type":"change","z":"523571ab.a711b","name":"Delete Entry","rules":[{"t":"set","p":"warehouse1.stock.position_31.workpiece","pt":"global","to":"","tot":"str"},{"t":"set","p":"warehouse1.stock.position_31.nfc_id","pt":"global","to":"","tot":"str"},{"t":"set","p":"payload.position","pt":"msg","to":"31","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3300,"wires":[["a07803b9.c7ed4"]]},{"id":"e9cd308.8df2ed","type":"change","z":"523571ab.a711b","name":"Delete Entry","rules":[{"t":"set","p":"warehouse1.stock.position_32.workpiece","pt":"global","to":"","tot":"str"},{"t":"set","p":"warehouse1.stock.position_32.nfc_id","pt":"global","to":"","tot":"str"},{"t":"set","p":"payload.position","pt":"msg","to":"32","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3340,"wires":[["a07803b9.c7ed4"]]},{"id":"7250dc66.3380e4","type":"change","z":"523571ab.a711b","name":"Delete Entry","rules":[{"t":"set","p":"warehouse1.stock.position_33.workpiece","pt":"global","to":"","tot":"str"},{"t":"set","p":"warehouse1.stock.position_33.nfc_id","pt":"global","to":"","tot":"str"},{"t":"set","p":"payload.position","pt":"msg","to":"33","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3380,"wires":[["a07803b9.c7ed4"]]},{"id":"a07803b9.c7ed4","type":"template","z":"523571ab.a711b","name":"Europalette empty","field":"Icon","fieldType":"msg","format":"html","syntax":"plain","template":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-leer.png","x":1010,"y":3220,"wires":[["aa5114f1.48f308"]]},{"id":"aa5114f1.48f308","type":"switch","z":"523571ab.a711b","name":"","property":"payload.position","propertyType":"msg","rules":[{"t":"eq","v":"11","vt":"str"},{"t":"eq","v":"12","vt":"str"},{"t":"eq","v":"13","vt":"str"},{"t":"eq","v":"21","vt":"str"},{"t":"eq","v":"22","vt":"str"},{"t":"eq","v":"23","vt":"str"},{"t":"eq","v":"31","vt":"str"},{"t":"eq","v":"32","vt":"str"},{"t":"eq","v":"33","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":1135,"y":3280,"wires":[["52edd9a4.503c08"],["127d5595.b7280a"],["714b5e64.4698d"],["ec95ed1f.5b18e"],["36b2cf57.a1b32"],["be9826c9.c03b08"],["2c971b4a.4ed6b4"],["4af1abb2.b2ccc4"],["f60b2920.e54ac8"]],"l":false},{"id":"d6fdfdb9.d2e19","type":"switch","z":"523571ab.a711b","name":"filled white positions","property":"position","propertyType":"msg","rules":[{"t":"eq","v":"11","vt":"str"},{"t":"eq","v":"12","vt":"str"},{"t":"eq","v":"13","vt":"str"}],"checkall":"false","repair":false,"outputs":3,"x":840,"y":2580,"wires":[["52edd9a4.503c08"],["127d5595.b7280a"],["714b5e64.4698d"]]},{"id":"8c956fe0.e6dc2","type":"switch","z":"523571ab.a711b","name":"filled red positions","property":"position","propertyType":"msg","rules":[{"t":"eq","v":"21","vt":"str"},{"t":"eq","v":"22","vt":"str"},{"t":"eq","v":"23","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":830,"y":2700,"wires":[["ec95ed1f.5b18e"],["36b2cf57.a1b32"],["be9826c9.c03b08"]]},{"id":"555c961f.12f608","type":"switch","z":"523571ab.a711b","name":"filled blue positions","property":"position","propertyType":"msg","rules":[{"t":"eq","v":"31","vt":"str"},{"t":"eq","v":"32","vt":"str"},{"t":"eq","v":"33","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":830,"y":2820,"wires":[["2c971b4a.4ed6b4"],["4af1abb2.b2ccc4"],["f60b2920.e54ac8"]]},{"id":"226d5b8.dc5a9a4","type":"template","z":"523571ab.a711b","name":"Europalette white","field":"Icon","fieldType":"msg","format":"html","syntax":"plain","template":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-white.png","x":610,"y":2580,"wires":[["d6fdfdb9.d2e19"]]},{"id":"73279e49.48c51","type":"template","z":"523571ab.a711b","name":"Europalette red","field":"Icon","fieldType":"msg","format":"html","syntax":"plain","template":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-red.png","x":620,"y":2700,"wires":[["8c956fe0.e6dc2"]]},{"id":"34d36e8c.6f6862","type":"template","z":"523571ab.a711b","name":"Europalette blue","field":"Icon","fieldType":"msg","format":"html","syntax":"plain","template":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-blue.png","x":620,"y":2820,"wires":[["555c961f.12f608"]]},{"id":"673dd842.2ad908","type":"inject","z":"523571ab.a711b","name":"Initialize","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":"","x":193.5,"y":2675.0001010894775,"wires":[["c885378f.77eb98","f85139ba.1ead28","1ddfee5a.fa1082","1039d7ec.5eabb8","65769ed1.bbcc8","61715229.1ad1fc","16f89c26.e7ace4","7e966612.c09148","6a5ec404.f5b56c"]]},{"id":"9dc53b9c.b98438","type":"comment","z":"523571ab.a711b","name":"","info":"Wird ein weies Bauteil eingelagert, wird der \nentsprechende Lagerplatz mit einem entsprechenden\nSymbol markiert","x":800,"y":2540,"wires":[]},{"id":"39b2b787.5a9f48","type":"comment","z":"523571ab.a711b","name":"","info":"Wird ein rotes Bauteil eingelagert, wird der \nentsprechende Lagerplatz mit einem entsprechenden\nSymbol markiert","x":800,"y":2660,"wires":[]},{"id":"ffed8eb7.34b3a","type":"comment","z":"523571ab.a711b","name":"","info":"Wird ein blaues Bauteil eingelagert, wird der \nentsprechende Lagerplatz mit einem entsprechenden\nSymbol markiert","x":800,"y":2780,"wires":[]},{"id":"cf0ada12.dbf588","type":"comment","z":"523571ab.a711b","name":"----------- Initialaise the Dashboard ----------","info":"The occupancy of the warehouse_1 is initialised as filled with workpieces. First row is white, second is red and the third one is blue.","x":280,"y":2480,"wires":[]},{"id":"9c83e73.551ce18","type":"comment","z":"523571ab.a711b","name":"----------- Check if a Workpiece has been removed from or inserted to the Warehouse and adapt the dashboard ----------","info":"If a workpiece has been removed out of the warehouse, the displayed state should also be adapted. Instead of the workpiece an empty paleete shoud be shown","x":480,"y":2960,"wires":[]},{"id":"8af43298.e277","type":"ui_toast","z":"523571ab.a711b","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"","name":"Problem occured","x":790,"y":3420,"wires":[]},{"id":"52edd9a4.503c08","type":"ui_template","z":"523571ab.a711b","group":"ba8cc582.3b6028","name":"Shelf white 1","order":2,"width":"2","height":"1","format":"<img border=0 src=\"{{msg.Icon}}\">","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1230,"y":2720,"wires":[[]]},{"id":"127d5595.b7280a","type":"ui_template","z":"523571ab.a711b","group":"ba8cc582.3b6028","name":"Shelf white 2","order":3,"width":"2","height":"1","format":"<img border=0 src={{msg.Icon}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1230,"y":2757,"wires":[[]]},{"id":"714b5e64.4698d","type":"ui_template","z":"523571ab.a711b","group":"ba8cc582.3b6028","name":"Shelf white 3","order":4,"width":"2","height":"1","format":"<img border=0 src={{msg.Icon}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1230,"y":2793,"wires":[[]]},{"id":"ec95ed1f.5b18e","type":"ui_template","z":"523571ab.a711b","group":"ba8cc582.3b6028","name":"Shelf red 1","order":5,"width":"2","height":"1","format":"<img border=0 src={{msg.Icon}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1230,"y":2840,"wires":[[]]},{"id":"36b2cf57.a1b32","type":"ui_template","z":"523571ab.a711b","group":"ba8cc582.3b6028","name":"Shelf red 2","order":6,"width":"2","height":"1","format":"<img border=0 src={{msg.Icon}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1230,"y":2880,"wires":[[]]},{"id":"be9826c9.c03b08","type":"ui_template","z":"523571ab.a711b","group":"ba8cc582.3b6028","name":"Shelf red 3","order":7,"width":"2","height":"1","format":"<img border=0 src={{msg.Icon}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1231,"y":2916,"wires":[[]]},{"id":"2c971b4a.4ed6b4","type":"ui_template","z":"523571ab.a711b","group":"ba8cc582.3b6028","name":"Shelf blue 1","order":8,"width":"2","height":"1","format":"<img border=0 src={{msg.Icon}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1230,"y":2960,"wires":[[]]},{"id":"4af1abb2.b2ccc4","type":"ui_template","z":"523571ab.a711b","group":"ba8cc582.3b6028","name":"Shelf blue 2","order":9,"width":"2","height":"1","format":"<img border=0 src={{msg.Icon}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1232,"y":3001,"wires":[[]]},{"id":"f60b2920.e54ac8","type":"ui_template","z":"523571ab.a711b","group":"ba8cc582.3b6028","name":"Shelf blue 3","order":10,"width":"2","height":"1","format":"<img border=0 src={{msg.Icon}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1230,"y":3040,"wires":[[]]},{"id":"9d38b843.e79068","type":"comment","z":"c8561b10.574218","name":"----------- Show the occupation of the Warehouse ----------","info":"The MES stores the information which storing place of the warehouse 2 is occupied.\nSo we can check if a position has stored any workpiece and if yes which color it has. So we can create the current occupancy in the dasboard","x":340,"y":1340,"wires":[]},{"id":"c66cacf.9e7555","type":"ui_template","z":"c8561b10.574218","group":"a557cde0.d3a69","name":"Position 11","order":2,"width":"2","height":"1","format":"<img border=0 src=\"{{msg.payload}}\">","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1028,"y":1428,"wires":[[]]},{"id":"48e4e1b4.2cd24","type":"ui_template","z":"c8561b10.574218","group":"a557cde0.d3a69","name":"Position 12","order":3,"width":"2","height":"1","format":"<img border=0 src={{msg.payload}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1023,"y":1584,"wires":[[]]},{"id":"d407ab21.373c68","type":"ui_template","z":"c8561b10.574218","group":"a557cde0.d3a69","name":"Position 13","order":4,"width":"2","height":"1","format":"<img border=0 src={{msg.payload}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1022,"y":1743,"wires":[[]]},{"id":"54f83d90.e17a44","type":"ui_template","z":"c8561b10.574218","group":"a557cde0.d3a69","name":"Position 21","order":5,"width":"2","height":"1","format":"<img border=0 src={{msg.payload}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1020,"y":1903,"wires":[[]]},{"id":"ed937cda.ebc08","type":"ui_template","z":"c8561b10.574218","group":"a557cde0.d3a69","name":"Position 22","order":6,"width":"2","height":"1","format":"<img border=0 src={{msg.payload}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1019,"y":2060,"wires":[[]]},{"id":"b59a501a.2d016","type":"ui_template","z":"c8561b10.574218","group":"a557cde0.d3a69","name":"Position 23","order":7,"width":"2","height":"1","format":"<img border=0 src={{msg.payload}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1018,"y":2224,"wires":[[]]},{"id":"99371782.e2f7b8","type":"ui_template","z":"c8561b10.574218","group":"a557cde0.d3a69","name":"Position 31","order":8,"width":"2","height":"1","format":"<img border=0 src={{msg.payload}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1014,"y":2387,"wires":[[]]},{"id":"94e49370.fea0a","type":"ui_template","z":"c8561b10.574218","group":"a557cde0.d3a69","name":"Position 32","order":9,"width":"2","height":"1","format":"<img border=0 src={{msg.payload}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1017,"y":2539,"wires":[[]]},{"id":"1e87ca27.8a0866","type":"ui_template","z":"c8561b10.574218","group":"a557cde0.d3a69","name":"Position 33","order":10,"width":"2","height":"1","format":"<img border=0 src={{msg.payload}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1014,"y":2704,"wires":[[]]},{"id":"5b32b7a3.4824c8","type":"switch","z":"c8561b10.574218","name":"Position 11","property":"warehouse2.stock.position_11.workpiece","propertyType":"global","rules":[{"t":"cont","v":"White","vt":"str"},{"t":"cont","v":"Red","vt":"str"},{"t":"cont","v":"Blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":516,"y":1429,"wires":[["62fcb044.de4f1"],["b121230e.2fa5d"],["f1fd16ea.bf9a58"],["7bb6b87c.8c17a8"]]},{"id":"7bb6b87c.8c17a8","type":"change","z":"c8561b10.574218","name":"Set empty URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-leer.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":788.3333206176758,"y":1490.666485786438,"wires":[["c66cacf.9e7555"]]},{"id":"f1fd16ea.bf9a58","type":"change","z":"c8561b10.574218","name":"Set blue URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-blue.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":778.3333206176758,"y":1450.666485786438,"wires":[["c66cacf.9e7555"]]},{"id":"b121230e.2fa5d","type":"change","z":"c8561b10.574218","name":"Set red URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-red.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":778.3333206176758,"y":1410.666485786438,"wires":[["c66cacf.9e7555"]]},{"id":"62fcb044.de4f1","type":"change","z":"c8561b10.574218","name":"Set white URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-white.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":788.3333206176758,"y":1370.666485786438,"wires":[["c66cacf.9e7555"]]},{"id":"3bd3c5d0.e0ab0a","type":"switch","z":"c8561b10.574218","name":"Position 12","property":"warehouse2.stock.position_12.workpiece","propertyType":"global","rules":[{"t":"cont","v":"White","vt":"str"},{"t":"cont","v":"Red","vt":"str"},{"t":"cont","v":"Blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":516,"y":1589,"wires":[["5dc21cee.142e74"],["a0b69e9c.b045a"],["8bcc6fab.0f2e4"],["6552f879.95efe8"]]},{"id":"6552f879.95efe8","type":"change","z":"c8561b10.574218","name":"Set empty URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-leer.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":788.3333206176758,"y":1650.666485786438,"wires":[["48e4e1b4.2cd24"]]},{"id":"8bcc6fab.0f2e4","type":"change","z":"c8561b10.574218","name":"Set blue URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-blue.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":778.3333206176758,"y":1610.666485786438,"wires":[["48e4e1b4.2cd24"]]},{"id":"a0b69e9c.b045a","type":"change","z":"c8561b10.574218","name":"Set red URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-red.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":778.3333206176758,"y":1570.666485786438,"wires":[["48e4e1b4.2cd24"]]},{"id":"5dc21cee.142e74","type":"change","z":"c8561b10.574218","name":"Set white URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-white.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":788.3333206176758,"y":1530.666485786438,"wires":[["48e4e1b4.2cd24"]]},{"id":"eee38e27.40026","type":"switch","z":"c8561b10.574218","name":"Position 13","property":"warehouse2.stock.position_13.workpiece","propertyType":"global","rules":[{"t":"cont","v":"White","vt":"str"},{"t":"cont","v":"Red","vt":"str"},{"t":"cont","v":"Blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":515,"y":1746,"wires":[["2d0c04bf.9921fc"],["bcdf4fd2.51f1"],["ceb06576.a8c358"],["9b686850.f7ddf8"]]},{"id":"9b686850.f7ddf8","type":"change","z":"c8561b10.574218","name":"Set empty URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-leer.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":787.3333206176758,"y":1807.666485786438,"wires":[["d407ab21.373c68"]]},{"id":"ceb06576.a8c358","type":"change","z":"c8561b10.574218","name":"Set blue URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-blue.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":777.3333206176758,"y":1767.666485786438,"wires":[["d407ab21.373c68"]]},{"id":"bcdf4fd2.51f1","type":"change","z":"c8561b10.574218","name":"Set red URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-red.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":777.3333206176758,"y":1727.666485786438,"wires":[["d407ab21.373c68"]]},{"id":"2d0c04bf.9921fc","type":"change","z":"c8561b10.574218","name":"Set white URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-white.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":787.3333206176758,"y":1687.666485786438,"wires":[["d407ab21.373c68"]]},{"id":"48d71fb2.bf615","type":"switch","z":"c8561b10.574218","name":"Position 21","property":"warehouse2.stock.position_21.workpiece","propertyType":"global","rules":[{"t":"cont","v":"White","vt":"str"},{"t":"cont","v":"Red","vt":"str"},{"t":"cont","v":"Blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":516,"y":1906,"wires":[["4d24f4f6.35053c"],["4f09d345.4bd8cc"],["78ec294b.ae5ed8"],["95a8fde1.51ff2"]]},{"id":"95a8fde1.51ff2","type":"change","z":"c8561b10.574218","name":"Set empty URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-leer.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":788.3333206176758,"y":1967.666485786438,"wires":[["54f83d90.e17a44"]]},{"id":"78ec294b.ae5ed8","type":"change","z":"c8561b10.574218","name":"Set blue URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-blue.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":778.3333206176758,"y":1927.666485786438,"wires":[["54f83d90.e17a44"]]},{"id":"4f09d345.4bd8cc","type":"change","z":"c8561b10.574218","name":"Set red URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-red.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":778.3333206176758,"y":1887.666485786438,"wires":[["54f83d90.e17a44"]]},{"id":"4d24f4f6.35053c","type":"change","z":"c8561b10.574218","name":"Set white URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-white.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":788.3333206176758,"y":1847.666485786438,"wires":[["54f83d90.e17a44"]]},{"id":"ab5f3153.38d09","type":"switch","z":"c8561b10.574218","name":"Position 22","property":"warehouse2.stock.position_22.workpiece","propertyType":"global","rules":[{"t":"cont","v":"White","vt":"str"},{"t":"cont","v":"Red","vt":"str"},{"t":"cont","v":"Blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":515,"y":2064,"wires":[["70c8fac1.ba5b34"],["cac19f92.297d8"],["da9cff52.ee766"],["d8a77e7d.e0ea1"]]},{"id":"d8a77e7d.e0ea1","type":"change","z":"c8561b10.574218","name":"Set empty URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-leer.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":787.3333206176758,"y":2125.666485786438,"wires":[["ed937cda.ebc08"]]},{"id":"da9cff52.ee766","type":"change","z":"c8561b10.574218","name":"Set blue URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-blue.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":777.3333206176758,"y":2085.666485786438,"wires":[["ed937cda.ebc08"]]},{"id":"cac19f92.297d8","type":"change","z":"c8561b10.574218","name":"Set red URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-red.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":777.3333206176758,"y":2045.666485786438,"wires":[["ed937cda.ebc08"]]},{"id":"70c8fac1.ba5b34","type":"change","z":"c8561b10.574218","name":"Set white URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-white.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":787.3333206176758,"y":2005.666485786438,"wires":[["ed937cda.ebc08"]]},{"id":"f9fbf887.eb8598","type":"switch","z":"c8561b10.574218","name":"Position 23","property":"warehouse2.stock.position_23.workpiece","propertyType":"global","rules":[{"t":"cont","v":"White","vt":"str"},{"t":"cont","v":"Red","vt":"str"},{"t":"cont","v":"Blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":517,"y":2225,"wires":[["c3b89240.450f2"],["c18ba5b1.fab3b8"],["223725c2.3a279a"],["3b629365.68486c"]]},{"id":"3b629365.68486c","type":"change","z":"c8561b10.574218","name":"Set empty URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-leer.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":789.3333206176758,"y":2286.666485786438,"wires":[["b59a501a.2d016"]]},{"id":"223725c2.3a279a","type":"change","z":"c8561b10.574218","name":"Set blue URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-blue.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":779.3333206176758,"y":2246.666485786438,"wires":[["b59a501a.2d016"]]},{"id":"c18ba5b1.fab3b8","type":"change","z":"c8561b10.574218","name":"Set red URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-red.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":779.3333206176758,"y":2206.666485786438,"wires":[["b59a501a.2d016"]]},{"id":"c3b89240.450f2","type":"change","z":"c8561b10.574218","name":"Set white URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-white.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":789.3333206176758,"y":2166.666485786438,"wires":[["b59a501a.2d016"]]},{"id":"6615aec8.e71a7","type":"switch","z":"c8561b10.574218","name":"Position 31","property":"warehouse2.stock.position_31.workpiece","propertyType":"global","rules":[{"t":"cont","v":"White","vt":"str"},{"t":"cont","v":"Red","vt":"str"},{"t":"cont","v":"Blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":517,"y":2386,"wires":[["ceb89d0e.b6357"],["1b47fc56.258724"],["52bd32b0.91a16c"],["635ab18e.8c64e"]]},{"id":"635ab18e.8c64e","type":"change","z":"c8561b10.574218","name":"Set empty URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-leer.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":789.3333206176758,"y":2447.666485786438,"wires":[["99371782.e2f7b8"]]},{"id":"52bd32b0.91a16c","type":"change","z":"c8561b10.574218","name":"Set blue URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-blue.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":779.3333206176758,"y":2407.666485786438,"wires":[["99371782.e2f7b8"]]},{"id":"1b47fc56.258724","type":"change","z":"c8561b10.574218","name":"Set red URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-red.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":779.3333206176758,"y":2367.666485786438,"wires":[["99371782.e2f7b8"]]},{"id":"ceb89d0e.b6357","type":"change","z":"c8561b10.574218","name":"Set white URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-white.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":789.3333206176758,"y":2327.666485786438,"wires":[["99371782.e2f7b8"]]},{"id":"7ccfad52.e47dd4","type":"switch","z":"c8561b10.574218","name":"Position 32","property":"warehouse2.stock.position_32.workpiece","propertyType":"global","rules":[{"t":"cont","v":"White","vt":"str"},{"t":"cont","v":"Red","vt":"str"},{"t":"cont","v":"Blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":516,"y":2543,"wires":[["8e209869.cd3558"],["87ae9111.e6485"],["3d23fee8.72ab82"],["323b9301.67b95c"]]},{"id":"323b9301.67b95c","type":"change","z":"c8561b10.574218","name":"Set empty URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-leer.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":788.3333206176758,"y":2604.666485786438,"wires":[["94e49370.fea0a"]]},{"id":"3d23fee8.72ab82","type":"change","z":"c8561b10.574218","name":"Set blue URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-blue.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":778.3333206176758,"y":2564.666485786438,"wires":[["94e49370.fea0a"]]},{"id":"87ae9111.e6485","type":"change","z":"c8561b10.574218","name":"Set red URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-red.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":778.3333206176758,"y":2524.666485786438,"wires":[["94e49370.fea0a"]]},{"id":"8e209869.cd3558","type":"change","z":"c8561b10.574218","name":"Set white URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-white.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":788.3333206176758,"y":2484.666485786438,"wires":[["94e49370.fea0a"]]},{"id":"10a82833.3ba328","type":"switch","z":"c8561b10.574218","name":"Position 33","property":"warehouse2.stock.position_33.workpiece","propertyType":"global","rules":[{"t":"cont","v":"White","vt":"str"},{"t":"cont","v":"Red","vt":"str"},{"t":"cont","v":"Blue","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":514,"y":2705,"wires":[["797e2939.534148"],["1650b16d.7d7e8f"],["f348b561.6ed588"],["5351b39c.5f474c"]]},{"id":"5351b39c.5f474c","type":"change","z":"c8561b10.574218","name":"Set empty URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-leer.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":786.3333206176758,"y":2766.666485786438,"wires":[["1e87ca27.8a0866"]]},{"id":"f348b561.6ed588","type":"change","z":"c8561b10.574218","name":"Set blue URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-blue.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":776.3333206176758,"y":2726.666485786438,"wires":[["1e87ca27.8a0866"]]},{"id":"1650b16d.7d7e8f","type":"change","z":"c8561b10.574218","name":"Set red URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-red.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":776.3333206176758,"y":2686.666485786438,"wires":[["1e87ca27.8a0866"]]},{"id":"797e2939.534148","type":"change","z":"c8561b10.574218","name":"Set white URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"https://s3.eu-de.cloud-object-storage.appdomain.cloud/publicimagesnodered/Europalette-white.png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":786.3333206176758,"y":2646.666485786438,"wires":[["1e87ca27.8a0866"]]},{"id":"b5bf65b5.6dd568","type":"inject","z":"c8561b10.574218","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":237.5,"y":2064,"wires":[["10a82833.3ba328","7ccfad52.e47dd4","6615aec8.e71a7","f9fbf887.eb8598","ab5f3153.38d09","eee38e27.40026","48d71fb2.bf615","5b32b7a3.4824c8","3bd3c5d0.e0ab0a"]]},{"id":"1f58e3a8.1439dc","type":"comment","z":"ffdb110f.35e53","name":"----------- Check if Warehouse 2 is available---------","info":"If plant send the event 35 it is ready for a new command\nAfter the events 11 (einlagern beginnen) and 33(auslagern beginnen), the plant is busy","x":260,"y":860,"wires":[]},{"id":"61dbd597.16320c","type":"switch","z":"ffdb110f.35e53","name":"check if available","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"35","vt":"str"},{"t":"eq","v":"11","vt":"str"},{"t":"eq","v":"33","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":430,"y":920,"wires":[["2cdac405.47e65c"],["4f3b6664.21a2a8"],["4f3b6664.21a2a8"]]},{"id":"4f3b6664.21a2a8","type":"change","z":"ffdb110f.35e53","name":"set global not available","rules":[{"t":"set","p":"warehouse2.available","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":940,"wires":[["36b7dd20.fc43a2"]]},{"id":"2cdac405.47e65c","type":"change","z":"ffdb110f.35e53","name":"set global  available","rules":[{"t":"set","p":"warehouse2.available","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":900,"wires":[["36b7dd20.fc43a2"]]},{"id":"be23a3bb.c63ca","type":"ibmiot in","z":"ffdb110f.35e53","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"WarehouseMunich_2","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"WarehouseMunich_2","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":200,"y":920,"wires":[["61dbd597.16320c"]]},{"id":"181ef116.b7a0ff","type":"change","z":"ffdb110f.35e53","name":"Set msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"Sorry, this function is not available yt","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":140,"y":540,"wires":[["5abf5df9.a9f934"]]},{"id":"5abf5df9.a9f934","type":"ui_toast","z":"ffdb110f.35e53","position":"top right","displayTime":"7","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Error Message Warehouse 2","name":"Error Message","x":160,"y":600,"wires":[]},{"id":"c7540f0c.23b13","type":"ui_text","z":"c8561b10.574218","group":"ceb3c4b6.5c5b38","order":0,"width":0,"height":0,"name":"Name","label":"Name:","format":"{{msg.payload}}","layout":"row-left","x":690,"y":2900,"wires":[]},{"id":"d7dbce94.89c97","type":"ui_text","z":"c8561b10.574218","group":"ceb3c4b6.5c5b38","order":0,"width":0,"height":0,"name":"ID:","label":"ID:","format":"{{msg.payload}}","layout":"row-left","x":690,"y":2940,"wires":[]},{"id":"bddf1b5a.e3c648","type":"comment","z":"c8561b10.574218","name":"------------ Publish current name and id of workpiece ----------","info":"If the warehouse 2 is currently handling a workpiece, the information about this workpiece (name and NFC ID) should be displayed","x":316.5,"y":2857,"wires":[]},{"id":"dc4dfb6c.b5e918","type":"inject","z":"c8561b10.574218","name":"Repeat_Interval","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":218,"y":2924,"wires":[["2658d490.6dafac","219b6fb7.fadf3"]]},{"id":"2658d490.6dafac","type":"change","z":"c8561b10.574218","name":"write global variables to msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"warehouse2.current_workpiece.color","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":469.5,"y":2897,"wires":[["c7540f0c.23b13"]]},{"id":"219b6fb7.fadf3","type":"change","z":"c8561b10.574218","name":"write global variables to msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"warehouse2.current_workpiece.nfc_id","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":467.5,"y":2939,"wires":[["d7dbce94.89c97"]]},{"id":"3a0fd87c.5eb178","type":"switch","z":"b017d628.55b3e8","name":"Check if VG is NOT available","property":"vaccumgripper2.available","propertyType":"global","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":920,"y":1960,"wires":[["6d8e9eec.c6bb2"]]},{"id":"6d8e9eec.c6bb2","type":"change","z":"b017d628.55b3e8","name":"Send Notification","rules":[{"t":"set","p":"payload","pt":"msg","to":"The vaccum gripper is currently not available. The command is stored and executed as soon as possible","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1190,"y":1960,"wires":[["b72de9c1.a1db28"]]},{"id":"b72de9c1.a1db28","type":"ui_toast","z":"b017d628.55b3e8","position":"top right","displayTime":"7","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","topic":"Notification Vacuum Gripper 2","name":"Error Message","x":1420,"y":1960,"wires":[]},{"id":"7fe6134b.0a2c1c","type":"change","z":"fab27939.ff21e8","name":"Send Notification","rules":[{"t":"set","p":"payload","pt":"msg","to":"The warehouse is currently not available. The command is stored and excecuted as soon ass possible","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":320,"wires":[["736ded77.d97914"]]},{"id":"736ded77.d97914","type":"ui_toast","z":"fab27939.ff21e8","position":"top right","displayTime":"7","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","topic":"Notification Warehouse 1","name":"Notification","x":1270,"y":320,"wires":[]},{"id":"3b3c6670.33ffaa","type":"switch","z":"fab27939.ff21e8","name":"Check if warehouse is NOT available","property":"warehouse1.available","propertyType":"global","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":770,"y":320,"wires":[["7fe6134b.0a2c1c"]]},{"id":"b04281f0.761b1","type":"switch","z":"d5f5f57.d049b08","name":"Switch on Command","property":"command","propertyType":"msg","rules":[{"t":"eq","v":"10","vt":"str"},{"t":"eq","v":"11","vt":"str"},{"t":"eq","v":"12","vt":"str"},{"t":"eq","v":"13","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":5,"x":740,"y":2420,"wires":[["d9a43458.423b28"],["847c74.8c5af39"],["307d05d3.89c5ca"],["dd193bdb.e39ad8"],["24683792.f495f8"]]},{"id":"d9a43458.423b28","type":"change","z":"d5f5f57.d049b08","name":"Only Painting","rules":[{"t":"set","p":"payload","pt":"msg","to":"Painting","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":2340,"wires":[["79066d01.753584"]]},{"id":"847c74.8c5af39","type":"change","z":"d5f5f57.d049b08","name":"Only Polish","rules":[{"t":"set","p":"payload","pt":"msg","to":"Polish","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":2380,"wires":[["79066d01.753584"]]},{"id":"307d05d3.89c5ca","type":"change","z":"d5f5f57.d049b08","name":"Painting and Polish","rules":[{"t":"set","p":"payload","pt":"msg","to":"Painting & Polish","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1010,"y":2420,"wires":[["79066d01.753584"]]},{"id":"dd193bdb.e39ad8","type":"change","z":"d5f5f57.d049b08","name":"No Porcessing","rules":[{"t":"set","p":"payload","pt":"msg","to":"No Processing","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1000,"y":2460,"wires":[["79066d01.753584"]]},{"id":"24683792.f495f8","type":"change","z":"d5f5f57.d049b08","name":"No Valid Command","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1010,"y":2500,"wires":[["79066d01.753584"]]},{"id":"79066d01.753584","type":"switch","z":"d5f5f57.d049b08","name":"Switch on Position","property":"position","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"},{"t":"eq","v":"3","vt":"str"},{"t":"eq","v":"4","vt":"str"}],"checkall":"true","repair":false,"outputs":5,"x":1230,"y":2420,"wires":[["960d7ddd.334d3"],["efe2d638.b2d618"],["16ca76df.34f969"],["8d3f72e8.a21dc"],["7c21339.66f38cc"]]},{"id":"9244559e.c1fee8","type":"ui_text","z":"b017d628.55b3e8","group":"4d820cbc.5384e4","order":0,"width":0,"height":0,"name":"Current command","label":"Current command:","format":"{{msg.payload}}","layout":"row-spread","x":1390,"y":3080,"wires":[]},{"id":"703b7d37.8224d4","type":"ui_text","z":"b017d628.55b3e8","group":"4d820cbc.5384e4","order":0,"width":0,"height":0,"name":"Command in Position 1","label":"Command in Position 1:","format":"{{msg.payload}}","layout":"row-spread","x":1410,"y":3120,"wires":[]},{"id":"50060565.a2b3cc","type":"ui_text","z":"b017d628.55b3e8","group":"4d820cbc.5384e4","order":0,"width":0,"height":0,"name":"Command in Position 2","label":"Command in Position 2:","format":"{{msg.payload}}","layout":"row-spread","x":1410,"y":3160,"wires":[]},{"id":"2d82d21c.51f1ae","type":"ui_text","z":"b017d628.55b3e8","group":"4d820cbc.5384e4","order":0,"width":0,"height":0,"name":"Command in Position 3","label":"Command in Position 3:","format":"{{msg.payload}}","layout":"row-spread","x":1410,"y":3200,"wires":[]},{"id":"255f900.9fcc97","type":"ui_text","z":"b017d628.55b3e8","group":"4d820cbc.5384e4","order":0,"width":0,"height":0,"name":"Command in Position 4","label":"Command in Position 4:","format":"{{msg.payload}}","layout":"row-spread","x":1410,"y":3240,"wires":[]},{"id":"586b6af0.204454","type":"inject","z":"b017d628.55b3e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":3140,"wires":[["310aa357.ec268c","1f37528a.f4a3cd","255178c4.f57498","c9450be6.7d3418","53c17d80.572f44"]]},{"id":"1f37528a.f4a3cd","type":"change","z":"b017d628.55b3e8","name":"Command in Position 1","rules":[{"t":"set","p":"command","pt":"msg","to":"vaccumgripper2.commands.position_1.command","tot":"global"},{"t":"set","p":"position","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":3120,"wires":[["6bb5a5e6.97ccfc"]]},{"id":"255178c4.f57498","type":"change","z":"b017d628.55b3e8","name":"Command in Position 2","rules":[{"t":"set","p":"command","pt":"msg","to":"vaccumgripper2.commands.position_2.command","tot":"global"},{"t":"set","p":"position","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":3160,"wires":[["6bb5a5e6.97ccfc"]]},{"id":"c9450be6.7d3418","type":"change","z":"b017d628.55b3e8","name":"Command in Position 3","rules":[{"t":"set","p":"command","pt":"msg","to":"vaccumgripper2.commands.position_3.command","tot":"global"},{"t":"set","p":"position","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":3200,"wires":[["6bb5a5e6.97ccfc"]]},{"id":"53c17d80.572f44","type":"change","z":"b017d628.55b3e8","name":"Command in Position 4","rules":[{"t":"set","p":"command","pt":"msg","to":"vaccumgripper2.commands.position_4.command","tot":"global"},{"t":"set","p":"position","pt":"msg","to":"4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":3240,"wires":[["6bb5a5e6.97ccfc"]]},{"id":"310aa357.ec268c","type":"change","z":"b017d628.55b3e8","name":"Current Command","rules":[{"t":"set","p":"command","pt":"msg","to":"vaccumgripper2.commands.current_command.command","tot":"global"},{"t":"set","p":"position","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":3080,"wires":[["6bb5a5e6.97ccfc"]]},{"id":"a9be8b97.410b18","type":"comment","z":"b017d628.55b3e8","name":"---------- Display the current commands ----------","info":"The MES stores incomming commands in an array. The 5 first enties as well as the command currently being excecuted shoul be displayed at the dashbaord.","x":230,"y":3040,"wires":[]},{"id":"6bb5a5e6.97ccfc","type":"switch","z":"b017d628.55b3e8","name":"Switch on Command","property":"command","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"},{"t":"eq","v":"3","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":4,"x":680,"y":3160,"wires":[["1fe8c5bc.a72cda"],["463dd465.7ade4c"],["6d740a69.d4fa84"],["bd369f2d.41729"]]},{"id":"1fe8c5bc.a72cda","type":"change","z":"b017d628.55b3e8","name":"Slide 1","rules":[{"t":"set","p":"payload","pt":"msg","to":"Slide 1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":910,"y":3100,"wires":[["1f7a1f9f.524b8"]]},{"id":"463dd465.7ade4c","type":"change","z":"b017d628.55b3e8","name":"Slide 2","rules":[{"t":"set","p":"payload","pt":"msg","to":"Slide 2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":910,"y":3140,"wires":[["1f7a1f9f.524b8"]]},{"id":"6d740a69.d4fa84","type":"change","z":"b017d628.55b3e8","name":"Slide 3","rules":[{"t":"set","p":"payload","pt":"msg","to":"Slide 3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":910,"y":3180,"wires":[["1f7a1f9f.524b8"]]},{"id":"bd369f2d.41729","type":"change","z":"b017d628.55b3e8","name":"No Valid Command","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":3220,"wires":[["1f7a1f9f.524b8"]]},{"id":"1f7a1f9f.524b8","type":"switch","z":"b017d628.55b3e8","name":"Switch on Position","property":"position","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"},{"t":"eq","v":"3","vt":"str"},{"t":"eq","v":"4","vt":"str"}],"checkall":"true","repair":false,"outputs":5,"x":1170,"y":3160,"wires":[["9244559e.c1fee8"],["703b7d37.8224d4"],["50060565.a2b3cc"],["2d82d21c.51f1ae"],["255f900.9fcc97"]]},{"id":"d08e80e5.b4146","type":"function","z":"347bd197.17ccbe","name":"Drizzle","func":"msg.payload=\"rain\";\nreturn msg;","outputs":1,"noerr":0,"x":695.009765625,"y":517.75390625,"wires":[["d9fa3dae.a748b"]]},{"id":"ff8bb660.ff11e8","type":"function","z":"347bd197.17ccbe","name":"Drizzle","func":"msg.payload=\"rain\";\nreturn msg;","outputs":1,"noerr":0,"x":687.0097923278809,"y":799.7539253234863,"wires":[["711299ec.c367b8"]]},{"id":"5f3c656.e7db09c","type":"comment","z":"347bd197.17ccbe","name":"----------- Reset all the Values to get the plant in its initial position ------------","info":"There exist 2 differnt ways to reset the values currently stored in the MES (this Node-RED instance). First it is possible to send a cammad via the chatbot (and then the cloud functions and to IoT platform). Then an event is coming from the blue IoT node 'commands'. \nThe other possibility to reset the values is by clicking on the button on the dashboard\n\nOnece the values have been reset successfully, a notification pops up to inform the user that he has to reboot the Fischertechnik controllers","x":320,"y":1180,"wires":[]},{"id":"ca6e5e60.62387","type":"ui_button","z":"347bd197.17ccbe","name":"","group":"161f6a64.198246","order":0,"width":0,"height":0,"passthru":false,"label":"Reset","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"date","topic":"","x":150,"y":1280,"wires":[["fb3ef269.4adc5","ef0652c9.7649a"]]},{"id":"fb3ef269.4adc5","type":"link out","z":"347bd197.17ccbe","name":"Reset Plant","links":["c381d3e5.df4d2","e93d55a3.1b9328","d59b91ab.830bb","28a67e05.0d33c2","3527d9ea.43fd36","dee56586.eab3d8","919b330b.159b9","2e810e96.c7c692","2bf50242.518e2e","506b823d.2c4e1c","b464effd.c90c7"],"x":590,"y":1240,"wires":[],"l":true},{"id":"c381d3e5.df4d2","type":"link in","z":"fab27939.ff21e8","name":"Reset Plant","links":["fb3ef269.4adc5"],"x":153.384765625,"y":151.94922065734863,"wires":[["283a17f3.7b78f8"]],"l":true},{"id":"e93d55a3.1b9328","type":"link in","z":"5c83a1e8.ad766","name":"Reset Plant","links":["fb3ef269.4adc5"],"x":131.009765625,"y":257.00390625,"wires":[["6c25fd62.64bb04"]],"l":true},{"id":"28a67e05.0d33c2","type":"link in","z":"f04e2126.57d3","name":"Reset Plant","links":["fb3ef269.4adc5"],"x":111.009765625,"y":258.00390625,"wires":[["a3f7037c.3ed45"]],"l":true},{"id":"3527d9ea.43fd36","type":"link in","z":"b017d628.55b3e8","name":"Reset Plant","links":["fb3ef269.4adc5"],"x":150,"y":260,"wires":[["69e982ca.97e86c"]],"l":true},{"id":"dee56586.eab3d8","type":"link in","z":"ffdb110f.35e53","name":"Reset Plant","links":["fb3ef269.4adc5"],"x":150.009765625,"y":159.00390720367432,"wires":[["b5592efe.f8e09"]],"l":true},{"id":"5551d57d.d0e7ac","type":"delay","z":"545b40dd.1629b","name":"","pauseType":"delay","timeout":"15","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":490,"y":320,"wires":[["a4a378e0.e9db18","b4a489e5.312328"]]},{"id":"ef0652c9.7649a","type":"change","z":"347bd197.17ccbe","name":"Message","rules":[{"t":"set","p":"payload","pt":"msg","to":"The plant has been reset. Please remember to restart the controllers.","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":1280,"wires":[["d5f7c2df.6a393"]]},{"id":"d5f7c2df.6a393","type":"ui_toast","z":"347bd197.17ccbe","position":"top right","displayTime":"7","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","topic":"Info Message Plant","name":"Info Message","x":747.0000076293945,"y":1278.000015258789,"wires":[]},{"id":"38ed8815.b7caa8","type":"ibmiot in","z":"b017d628.55b3e8","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"cmd","logicalInterface":"","ruleId":"","deviceId":"","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Commands","service":"registered","allDevices":true,"allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":true,"allFormats":"","qos":0,"x":138.5,"y":2079,"wires":[["628d51c9.f0eec"]]},{"id":"628d51c9.f0eec","type":"switch","z":"b017d628.55b3e8","name":"Check if cmd is for VaccumGripper 2","property":"deviceId","propertyType":"msg","rules":[{"t":"eq","v":"vacuumgripper_2","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":210,"y":2140,"wires":[["9afb4181.9c6fa","3a0fd87c.5eb178","eddf6398.2da81"]]},{"id":"9afb4181.9c6fa","type":"switch","z":"b017d628.55b3e8","name":"Check Slide","property":"payload.slide","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"},{"t":"eq","v":"3","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":450,"y":2140,"wires":[["c8909a62.055bc8"],["c328db22.c32aa8"],["e2fa6bd2.a16488"]]},{"id":"c8909a62.055bc8","type":"function","z":"b017d628.55b3e8","name":"Slide 1","func":"msg.payload = {\n    \"controller\": 8,\n    \"subadress\": 0,\n    \"timestamp\": 1351824120,\n    \"command\": 1\n}\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":2060,"wires":[["b2c4f004.b716"]]},{"id":"c328db22.c32aa8","type":"function","z":"b017d628.55b3e8","name":"Slide 2","func":"msg.payload = {\n    \"controller\": 8,\n    \"subadress\": 0,\n    \"timestamp\": 1351824120,\n    \"command\": 2\n}\nreturn msg;","outputs":1,"noerr":0,"x":669,"y":2094,"wires":[["b2c4f004.b716"]]},{"id":"e2fa6bd2.a16488","type":"function","z":"b017d628.55b3e8","name":"Slide 3","func":"msg.payload = {\n    \"controller\": 8,\n    \"subadress\": 0,\n    \"timestamp\": 1351824120,\n    \"command\": 3\n}\nreturn msg;","outputs":1,"noerr":0,"x":669.0000019073486,"y":2128.0000190734863,"wires":[["b2c4f004.b716"]]},{"id":"eddf6398.2da81","type":"debug","z":"b017d628.55b3e8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":450,"y":2100,"wires":[]},{"id":"c885378f.77eb98","type":"function","z":"523571ab.a711b","name":"Position 11","func":"msg.position=11;\nreturn msg;","outputs":1,"noerr":0,"x":406.88891983032227,"y":2549.000100135803,"wires":[["226d5b8.dc5a9a4"]]},{"id":"f85139ba.1ead28","type":"function","z":"523571ab.a711b","name":"Position 12","func":"msg.position=12;\nreturn msg;","outputs":1,"noerr":0,"x":406,"y":2583.666748046875,"wires":[["226d5b8.dc5a9a4"]]},{"id":"1ddfee5a.fa1082","type":"function","z":"523571ab.a711b","name":"Position 13","func":"msg.position=13;\nreturn msg;","outputs":1,"noerr":0,"x":407.00000381469727,"y":2618.6667671203613,"wires":[["226d5b8.dc5a9a4"]]},{"id":"1039d7ec.5eabb8","type":"function","z":"523571ab.a711b","name":"Position 21","func":"msg.position=21;\nreturn msg;","outputs":1,"noerr":0,"x":411,"y":2662.666748046875,"wires":[["73279e49.48c51"]]},{"id":"65769ed1.bbcc8","type":"function","z":"523571ab.a711b","name":"Position 22","func":"msg.position=22;\nreturn msg;","outputs":1,"noerr":0,"x":410.11108016967773,"y":2697.333395957947,"wires":[["73279e49.48c51"]]},{"id":"61715229.1ad1fc","type":"function","z":"523571ab.a711b","name":"Position 23","func":"msg.position=23;\nreturn msg;","outputs":1,"noerr":0,"x":411.111083984375,"y":2732.333415031433,"wires":[["73279e49.48c51"]]},{"id":"16f89c26.e7ace4","type":"function","z":"523571ab.a711b","name":"Position 31","func":"msg.position=31;\nreturn msg;","outputs":1,"noerr":0,"x":412,"y":2780.666748046875,"wires":[["34d36e8c.6f6862"]]},{"id":"7e966612.c09148","type":"function","z":"523571ab.a711b","name":"Position 32","func":"msg.position=32;\nreturn msg;","outputs":1,"noerr":0,"x":411.11108016967773,"y":2815.333395957947,"wires":[["34d36e8c.6f6862"]]},{"id":"6a5ec404.f5b56c","type":"function","z":"523571ab.a711b","name":"Position 33","func":"msg.position=33;\nreturn msg;","outputs":1,"noerr":0,"x":412.111083984375,"y":2850.333415031433,"wires":[["34d36e8c.6f6862"]]},{"id":"919b330b.159b9","type":"link in","z":"523571ab.a711b","name":"Reset Plant","links":["fb3ef269.4adc5"],"x":184,"y":2710.666748046875,"wires":[["c885378f.77eb98","f85139ba.1ead28","1ddfee5a.fa1082","1039d7ec.5eabb8","65769ed1.bbcc8","61715229.1ad1fc","16f89c26.e7ace4","7e966612.c09148","6a5ec404.f5b56c"]],"l":true},{"id":"1f608fca.2aa97","type":"ui_template","z":"523571ab.a711b","group":"27d10585.56274a","name":"Available","order":2,"width":"3","height":"1","format":"Available","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":800,"y":3540,"wires":[["a619da52.1e29f8"]]},{"id":"a619da52.1e29f8","type":"ui_template","z":"523571ab.a711b","group":"27d10585.56274a","name":"Available","order":1,"width":"1","height":"1","format":"<img align=\"middle\" border=0 width=\"30px\" src={{msg.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":940.0000019073486,"y":3540,"wires":[[]]},{"id":"5fa515ce.58946c","type":"template","z":"523571ab.a711b","name":"Available","field":"active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/green-dot.png","x":633.9999980926514,"y":3526,"wires":[["1f608fca.2aa97"]]},{"id":"220ff9b8.4485c6","type":"template","z":"523571ab.a711b","name":"Not Available","field":"active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/grey-dot.png","x":644.9999980926514,"y":3562,"wires":[["1f608fca.2aa97"]]},{"id":"4289d27f.0377dc","type":"switch","z":"523571ab.a711b","name":"Check Warehouse 1 available","property":"warehouse1.available","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":408.9999942779541,"y":3539.999975204468,"wires":[["5fa515ce.58946c"],["220ff9b8.4485c6"]]},{"id":"c62c4d4d.8e815","type":"inject","z":"523571ab.a711b","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":183.8889102935791,"y":3539.555555343628,"wires":[["4289d27f.0377dc"]]},{"id":"26a1820e.efb2be","type":"comment","z":"523571ab.a711b","name":"----------- Display if the Warehouse is available or not ----------","info":"The MES knows if the warehouse_1 is available or not. This information should be shown the same way as the events (e.g. crane moving in x direction)","x":311.9999942779541,"y":3476.9999742507935,"wires":[]},{"id":"bb40478.e85edb8","type":"ui_template","z":"5c83a1e8.ad766","group":"8a3edafa.64c4b8","name":"Available","order":2,"width":"3","height":"1","format":"Available","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":780,"y":2460,"wires":[["82fb0f60.5a444"]]},{"id":"82fb0f60.5a444","type":"ui_template","z":"5c83a1e8.ad766","group":"8a3edafa.64c4b8","name":"Available","order":1,"width":"1","height":"1","format":"<img align=\"middle\" border=0 width=\"30px\" src={{msg.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":920,"y":2460,"wires":[[]]},{"id":"22265357.b0139c","type":"template","z":"5c83a1e8.ad766","name":"Available","field":"active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/green-dot.png","x":620,"y":2440,"wires":[["bb40478.e85edb8"]]},{"id":"e9d8de92.21cd1","type":"template","z":"5c83a1e8.ad766","name":"Not Available","field":"active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/grey-dot.png","x":630,"y":2480,"wires":[["bb40478.e85edb8"]]},{"id":"1b327da2.7df8c2","type":"switch","z":"5c83a1e8.ad766","name":"Check Vacuum Gripper 1 available","property":"vaccumgripper1.available","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":400,"y":2460,"wires":[["22265357.b0139c"],["e9d8de92.21cd1"]]},{"id":"a02802a5.e589c","type":"inject","z":"5c83a1e8.ad766","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":2460,"wires":[["1b327da2.7df8c2"]]},{"id":"43c2c7f2.6e07d8","type":"comment","z":"5c83a1e8.ad766","name":"----------- Display if the Vacuum Gripper is available or not ----------","info":"Displays the information if the vacuum gripper is available or not","x":301.9999942779541,"y":2416.9999742507935,"wires":[]},{"id":"2d6cfd9d.df2552","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Available","order":2,"width":"3","height":"1","format":"Available","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":980,"y":2020,"wires":[["d0372c8.4dfc6d"]]},{"id":"d0372c8.4dfc6d","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Available","order":1,"width":"1","height":"1","format":"<img align=\"middle\" border=0 width=\"30px\" src={{msg.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1120.0000019073486,"y":2020,"wires":[[]]},{"id":"dc25c5c.4dc4038","type":"template","z":"d5f5f57.d049b08","name":"Available","field":"active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/green-dot.png","x":800,"y":2005,"wires":[["2d6cfd9d.df2552"]]},{"id":"2749a64f.e9c7ba","type":"template","z":"d5f5f57.d049b08","name":"Not Available","field":"active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/grey-dot.png","x":810,"y":2036,"wires":[["2d6cfd9d.df2552"]]},{"id":"2d1d860f.ffb51a","type":"switch","z":"d5f5f57.d049b08","name":"Check Processing Station available","property":"processingstation.available","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":418.9999942779541,"y":2019.9999752044678,"wires":[["dc25c5c.4dc4038"],["2749a64f.e9c7ba"]]},{"id":"4caac1e.384844","type":"inject","z":"d5f5f57.d049b08","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":2100,"wires":[["2d1d860f.ffb51a","92305f3e.795be","9b8bd0c5.207a2"]]},{"id":"9653757f.724388","type":"comment","z":"d5f5f57.d049b08","name":"----------- Display if the Processing Station is available, ready for new workpiece and waiting for command---------","info":"The following nodes dilpay the informations about the module state. All these values are created by the MES system","x":471.9999942779541,"y":1956.9999742507935,"wires":[]},{"id":"d006fe85.6ed61","type":"ui_template","z":"b017d628.55b3e8","group":"575df9eb.ee16e8","name":"Available","order":2,"width":"3","height":"1","format":"Available","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":760,"y":3520,"wires":[["c4f6eb05.8190d8"]]},{"id":"c4f6eb05.8190d8","type":"ui_template","z":"b017d628.55b3e8","group":"575df9eb.ee16e8","name":"Available","order":1,"width":"1","height":"1","format":"<img align=\"middle\" border=0 width=\"30px\" src={{msg.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":900.0000019073486,"y":3520,"wires":[[]]},{"id":"deb89d94.b24c1","type":"template","z":"b017d628.55b3e8","name":"Available","field":"active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/green-dot.png","x":600,"y":3500,"wires":[["d006fe85.6ed61"]]},{"id":"f516c9de.bc4de8","type":"template","z":"b017d628.55b3e8","name":"Not Available","field":"active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/grey-dot.png","x":604.9999980926514,"y":3542,"wires":[["d006fe85.6ed61"]]},{"id":"6fd08089.8db1d","type":"switch","z":"b017d628.55b3e8","name":"Check Vacuum Gripper 2 available","property":"vaccumgripper2.available","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":378.9999942779541,"y":3519.999975204468,"wires":[["deb89d94.b24c1"],["f516c9de.bc4de8"]]},{"id":"e9e86ce6.72e92","type":"inject","z":"b017d628.55b3e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":143.8889102935791,"y":3519.555555343628,"wires":[["6fd08089.8db1d"]]},{"id":"da9d918.1542d7","type":"comment","z":"b017d628.55b3e8","name":"----------- Display if the Vacuum Gripper 2 is available or not ----------","info":"Display in the dasboard if the vacuum gripper is available or not","x":280,"y":3480,"wires":[]},{"id":"891856db.2a09b8","type":"ui_template","z":"c8561b10.574218","group":"59d5f9fe.0e3618","name":"Available","order":2,"width":"3","height":"1","format":"Available","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":824,"y":3068,"wires":[["7f570df8.4e2974"]]},{"id":"7f570df8.4e2974","type":"ui_template","z":"c8561b10.574218","group":"59d5f9fe.0e3618","name":"Available","order":1,"width":"1","height":"1","format":"<img align=\"middle\" border=0 width=\"30px\" src={{msg.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":964.0000019073486,"y":3068,"wires":[[]]},{"id":"209f15ae.7fcc5a","type":"template","z":"c8561b10.574218","name":"Available","field":"active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/green-dot.png","x":657.9999980926514,"y":3054,"wires":[["891856db.2a09b8"]]},{"id":"e8378d70.173e2","type":"template","z":"c8561b10.574218","name":"Not Available","field":"active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/grey-dot.png","x":668.9999980926514,"y":3090,"wires":[["891856db.2a09b8"]]},{"id":"7d4ee96c.4edc98","type":"switch","z":"c8561b10.574218","name":"Check Warehouse 1 available","property":"warehouse2.available","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":432.9999942779541,"y":3067.999975204468,"wires":[["209f15ae.7fcc5a"],["e8378d70.173e2"]]},{"id":"21eff56a.0bc79a","type":"inject","z":"c8561b10.574218","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":207.8889102935791,"y":3067.555555343628,"wires":[["7d4ee96c.4edc98"]]},{"id":"63c6947f.6b85ac","type":"comment","z":"c8561b10.574218","name":"----------- Display if the Warehouse 2 is available or not ----------","info":"The MES stores the information if the warehouse 2 is available or not. This should be shown in the dashboard","x":335.9999942779541,"y":3004.9999742507935,"wires":[]},{"id":"8b7d6993.1cd5a8","type":"ui_template","z":"f04e2126.57d3","group":"4d63af57.0056f","name":"Available","order":2,"width":"3","height":"1","format":"Available","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":780,"y":4860,"wires":[["1554fd4.dc37303"]]},{"id":"1554fd4.dc37303","type":"ui_template","z":"f04e2126.57d3","group":"4d63af57.0056f","name":"Available","order":1,"width":"1","height":"1","format":"<img align=\"middle\" border=0 width=\"30px\" src={{msg.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":920.0000019073486,"y":4860,"wires":[[]]},{"id":"9b64f022.fdc1f","type":"template","z":"f04e2126.57d3","name":"Available","field":"active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/green-dot.png","x":613.9999980926514,"y":4846,"wires":[["8b7d6993.1cd5a8"]]},{"id":"88a08a25.9a5148","type":"template","z":"f04e2126.57d3","name":"Not Available","field":"active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/grey-dot.png","x":624.9999980926514,"y":4882,"wires":[["8b7d6993.1cd5a8"]]},{"id":"69e6b8f4.dbafa8","type":"switch","z":"f04e2126.57d3","name":"Check Sorting Line available","property":"sortingline.available","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":378.9999942779541,"y":4859.999975204468,"wires":[["9b64f022.fdc1f"],["88a08a25.9a5148"]]},{"id":"b136bca1.30c6d","type":"inject","z":"f04e2126.57d3","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":163.8889102935791,"y":4859.555555343628,"wires":[["69e6b8f4.dbafa8"]]},{"id":"fc91ce48.86bae","type":"comment","z":"f04e2126.57d3","name":"----------- Display if the Sorting Line is available or not ----------","info":"The following nodes display the availability of the sorting line","x":291.9999942779541,"y":4816.9999742507935,"wires":[]},{"id":"2e801e70.86f6c2","type":"comment","z":"f04e2126.57d3","name":"----------- Check if Sorting Line is ready for a new command ---------","info":"Checks if the sorting line is currently available.\nWhen the sorting line starts to store a workpiece it is set unavailable. After the storing process, it is set available again","x":310,"y":4680,"wires":[]},{"id":"a2a8b9d8.4414e8","type":"switch","z":"f04e2126.57d3","name":"check if available","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"31","vt":"str"},{"t":"eq","v":"32","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":416.00000381469727,"y":4736.000136375427,"wires":[["8ef84580.023408"],["9398723f.cd8f"]]},{"id":"9398723f.cd8f","type":"change","z":"f04e2126.57d3","name":"set global not available","rules":[{"t":"set","p":"sortingline.available","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":669.0000152587891,"y":4750.000135421753,"wires":[["d10d6d92.73ae4"]]},{"id":"8ef84580.023408","type":"change","z":"f04e2126.57d3","name":"set global  available","rules":[{"t":"set","p":"sortingline.available","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":660.0000190734863,"y":4714.000136375427,"wires":[["d10d6d92.73ae4"]]},{"id":"1568039.6c1d4fc","type":"ibmiot in","z":"f04e2126.57d3","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"Sorting_Line_Munich","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Sorting_Line_Munich","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":170,"y":4736.000299453735,"wires":[["a2a8b9d8.4414e8"]]},{"id":"3919996e.351e56","type":"change","z":"545b40dd.1629b","name":"Reset Delay","rules":[{"t":"set","p":"reset","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":320,"wires":[["5551d57d.d0e7ac"]]},{"id":"83550b76.b0c708","type":"debug","z":"545b40dd.1629b","name":"Visual Recognition","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":510,"y":440,"wires":[]},{"id":"c57dbcfe.9d6a","type":"comment","z":"545b40dd.1629b","name":"Comment","info":"If the raspberry Pi takes more than 15 seconds to respond, the flow continues.\nThis is implemented to prevent the process from stopping due to a problem an the side of the visual recognition. If this happens an error message is send to the dashboard\n\nWhen we recieve an answer from the visual recognition, the timer is reset to prevent the flow from sending the command to continue twice","x":140,"y":280,"wires":[]},{"id":"83abf58b.831648","type":"switch","z":"545b40dd.1629b","name":"Check if Processing S. is waiting for a cmd","property":"processingstation.waiting_for_cmd","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":890,"y":480,"wires":[["e591e99e.b089c8"]]},{"id":"b4a489e5.312328","type":"change","z":"545b40dd.1629b","name":"Error","rules":[{"t":"set","p":"payload","pt":"msg","to":"Visual Recognition \"No Valable Answer\". Process has been continued","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":320,"wires":[["9ac8c55b.f47c68"]]},{"id":"9ac8c55b.f47c68","type":"ui_toast","z":"545b40dd.1629b","position":"top right","displayTime":"7","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","topic":"Error Message Processing Station","name":"Error Message","x":840,"y":320,"wires":[]},{"id":"f0d6e9bd.848d38","type":"ui_text","z":"545b40dd.1629b","group":"3139555e.e3966a","order":0,"width":0,"height":0,"name":"Class","label":"Class: ","format":"{{msg.payload.result}}","layout":"row-spread","x":770,"y":400,"wires":[]},{"id":"e57da11e.e1f3f","type":"ui_text","z":"545b40dd.1629b","group":"3139555e.e3966a","order":0,"width":0,"height":0,"name":"Score","label":"Score: ","format":"{{msg.payload.score}}","layout":"row-spread","x":770,"y":440,"wires":[]},{"id":"a6a86f66.5fb1e","type":"ui_template","z":"347bd197.17ccbe","group":"67840e50.8420f","name":"Button","order":0,"width":0,"height":0,"format":"<html>\n    <button type=\"button\" onClick=\"parent.location='http://9.236.65.232/html/min.php'\"> Go to Live-Stream </button>\n</html>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":350,"y":1100,"wires":[["eac15952.3eac78"]]},{"id":"eac15952.3eac78","type":"debug","z":"347bd197.17ccbe","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":530,"y":1100,"wires":[]},{"id":"66d06e56.0c2c6","type":"ibmiot in","z":"347bd197.17ccbe","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"cmd","logicalInterface":"","ruleId":"","deviceId":"","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Commands","service":"registered","allDevices":true,"allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":true,"allFormats":"","qos":0,"x":130,"y":1240,"wires":[["6be5f1d0.7d1bc"]]},{"id":"6be5f1d0.7d1bc","type":"switch","z":"347bd197.17ccbe","name":"Commands for Node-Red","property":"deviceId","propertyType":"msg","rules":[{"t":"eq","v":"nodered","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":327.5,"y":1240,"wires":[["fb3ef269.4adc5","ef0652c9.7649a"]]},{"id":"92305f3e.795be","type":"switch","z":"d5f5f57.d049b08","name":"Check Processing Station ready_for_new_workpiece","property":"processingstation.ready_for_new_workpiece","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":480,"y":2100,"wires":[["2650b5f.8d9724a"],["6210922c.1d58fc"]]},{"id":"9b8bd0c5.207a2","type":"switch","z":"d5f5f57.d049b08","name":"Check Processing Station waiting_for_cmd","property":"processingstation.waiting_for_cmd","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":450,"y":2180,"wires":[["e0e63b03.c98528"],["1ac654ef.cb719b"]]},{"id":"d8e8b5a2.cd9488","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Ready for WP","order":4,"width":"3","height":"1","format":"Ready for WP","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1000,"y":2100,"wires":[["75ca166d.dcdaf8"]]},{"id":"75ca166d.dcdaf8","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Ready for WP","order":3,"width":"1","height":"1","format":"<img align=\"middle\" border=0 width=\"30px\" src={{msg.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1180,"y":2100,"wires":[[]]},{"id":"2650b5f.8d9724a","type":"template","z":"d5f5f57.d049b08","name":"Available","field":"active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/green-dot.png","x":800,"y":2085,"wires":[["d8e8b5a2.cd9488"]]},{"id":"6210922c.1d58fc","type":"template","z":"d5f5f57.d049b08","name":"Not Available","field":"active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/grey-dot.png","x":810,"y":2116,"wires":[["d8e8b5a2.cd9488"]]},{"id":"747ca428.9d9e4c","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Waiting for cmd","order":6,"width":"3","height":"1","format":"Waiting for cmd","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1000,"y":2180,"wires":[["154f9a07.31feb6"]]},{"id":"154f9a07.31feb6","type":"ui_template","z":"d5f5f57.d049b08","group":"bfd94b3.00ef4b8","name":"Waiting for cmd","order":5,"width":"1","height":"1","format":"<img align=\"middle\" border=0 width=\"30px\" src={{msg.active}}>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1180,"y":2180,"wires":[[]]},{"id":"e0e63b03.c98528","type":"template","z":"d5f5f57.d049b08","name":"Available","field":"active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/green-dot.png","x":800,"y":2165,"wires":[["747ca428.9d9e4c"]]},{"id":"1ac654ef.cb719b","type":"template","z":"d5f5f57.d049b08","name":"Not Available","field":"active","fieldType":"msg","format":"html","syntax":"plain","template":"http://auberger.eu/IndustrialIoT/grey-dot.png","x":810,"y":2196,"wires":[["747ca428.9d9e4c"]]},{"id":"9f1bd6f.1ae6128","type":"switch","z":"b017d628.55b3e8","name":"Decode Command","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"25","vt":"str"},{"t":"eq","v":"27","vt":"str"},{"t":"eq","v":"29","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":430,"y":2240,"wires":[["c8909a62.055bc8"],["c328db22.c32aa8"],["e2fa6bd2.a16488"]]},{"id":"eb5da1f0.e9263","type":"ibmiot in","z":"b017d628.55b3e8","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"Sorting_Line_Munich","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Sorting_Line_Munich","service":"registered","allDevices":false,"allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":220,"y":2240,"wires":[["9f1bd6f.1ae6128"]]},{"id":"46a14f48.d3a42","type":"comment","z":"b017d628.55b3e8","name":"---------- start command if light barrier activated ----------","info":"","x":320,"y":2200,"wires":[]},{"id":"3c7f6723.cb3f78","type":"comment","z":"5c83a1e8.ad766","name":"----------- Vacuum Gripper is only allowed to drop a workpiece at the Processing Station, if this one is ready ----------","info":"When the Vacuum Gripper is ready to drop a workpiece at the processing station, it first checks if the processing station is ready to pick up a new workpiece or if there is still a workpiece on the moving tray of the oven","x":453,"y":2540,"wires":[]},{"id":"b6586e4.6bc249","type":"function","z":"5c83a1e8.ad766","name":"Crane is ready to put a workpiece at the processing station","func":"msg.payload=\n{\n    \"msg\": \"Crane is ready to put a workpiece at the processing station\",\n    \"command\": msg.payload.data\n}\nreturn msg;","outputs":1,"noerr":0,"x":820,"y":1500,"wires":[["4eb717c9.82c238"]]},{"id":"ca7d55fb.04e208","type":"switch","z":"5c83a1e8.ad766","name":"Check if Vaccum Gripper ready at Processing station","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"41","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":520,"y":2580,"wires":[["3265a0e9.c9cfa"]]},{"id":"8c66cc9b.7097a","type":"ibmiot in","z":"5c83a1e8.ad766","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"VacuumGripperMunich_1","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"VacuumGripperMunich_1","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":190,"y":2580,"wires":[["ca7d55fb.04e208"]]},{"id":"3265a0e9.c9cfa","type":"switch","z":"5c83a1e8.ad766","name":"Check Processing Station ready_for_new_workpiece","property":"processingstation.ready_for_new_workpiece","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":520,"y":2640,"wires":[["aab2dd74.8e5f1"],["fe075a1d.7299a8"]]},{"id":"22cbfd3a.6ed082","type":"function","z":"5c83a1e8.ad766","name":"send command","func":"msg.payload={\n    \"controller\": 8,\n    \"subadress\": 8,\n    \"timestamp\": 1351824120,\n    \"command\": 14\n}\nreturn msg;","outputs":1,"noerr":0,"x":880,"y":2700,"wires":[["5a0dafa5.8f8a4"]]},{"id":"aab2dd74.8e5f1","type":"change","z":"5c83a1e8.ad766","name":"Delete msg content","rules":[{"t":"set","p":"topic","pt":"msg","to":"\"\"","tot":"str"},{"t":"delete","p":"deviceId","pt":"msg"},{"t":"delete","p":"deviceType","pt":"msg"},{"t":"delete","p":"eventType","pt":"msg"},{"t":"delete","p":"format","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":2640,"wires":[["22cbfd3a.6ed082"]]},{"id":"5a0dafa5.8f8a4","type":"ibmiot out","z":"5c83a1e8.ad766","authentication":"apiKey","apiKey":"6b68196b.a83528","outputType":"cmd","deviceId":"VacuumGripperMunich_1","deviceType":"0.20.7","eventCommandType":"command","format":"json","data":"{}","qos":0,"name":"VacuumGripperMunich_1","service":"registered","x":1090,"y":2700,"wires":[]},{"id":"fe075a1d.7299a8","type":"delay","z":"5c83a1e8.ad766","name":"Delay 1s","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":520,"y":2700,"wires":[["3265a0e9.c9cfa"]]},{"id":"10e0f76a.c3c0d9","type":"inject","z":"373140ce.a3fbf","name":"Initialise","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":140,"y":140,"wires":[["6ce7ff7a.8f60e"]]},{"id":"c0f9445c.7c4368","type":"comment","z":"373140ce.a3fbf","name":"---------- Set the global variables for the processing station ----------","info":"The MES system stores his information in gloabal vaiables. After a restart of the MES (be this after a new deployment of the Node-RED or after a reset command) the values should be reset (bring them to an initial state)","x":310,"y":100,"wires":[]},{"id":"6ce7ff7a.8f60e","type":"change","z":"373140ce.a3fbf","name":"Set initial values to processing station","rules":[{"t":"set","p":"processingstation","pt":"global","to":"{\"commands\":{\"current_command\":\"\",\"position_1\":\"\",\"position_2\":\"\",\"position_3\":\"\",\"position_4\":\"\",\"position_5\":\"\",\"position_6\":\"\",\"position_7\":\"\",\"position_8\":\"\",\"position_9\":\"\"},\"available\":false,\"current_workpiece\":{},\"current_workpiece_2\":{},\"handover_workpiece\":{},\"waiting_for_cmd\":false,\"ready_for_new_workpiece\":false}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":140,"wires":[[]]},{"id":"e5416492.d9d1d8","type":"inject","z":"373140ce.a3fbf","name":"Read Processing Station Content","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":210,"y":280,"wires":[["86589e20.76299"]]},{"id":"86589e20.76299","type":"change","z":"373140ce.a3fbf","name":"get Josn Object","rules":[{"t":"set","p":"payload","pt":"msg","to":"processingstation","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":280,"wires":[["4a225853.2d0488"]]},{"id":"4a225853.2d0488","type":"debug","z":"373140ce.a3fbf","name":"Processing Station","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":630,"y":280,"wires":[]},{"id":"477a191.158c3e8","type":"comment","z":"373140ce.a3fbf","name":"----------- Read the gloabal variables of the processing station ----------","info":"The following nodes can be usd for debugging. When injecting a message using the 'Read Processing Station Conten' node the current values stored by the MES are emitted in the debugging window","x":320,"y":240,"wires":[]},{"id":"506b823d.2c4e1c","type":"link in","z":"373140ce.a3fbf","name":"Reset Plant","links":["fb3ef269.4adc5"],"x":130,"y":180,"wires":[["6ce7ff7a.8f60e"]],"l":true},{"id":"f0228948.8cdf68","type":"ibmiot in","z":"373140ce.a3fbf","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"Processing_Station_Munich","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Processing_Station_Munich","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":200,"y":560,"wires":[["3fa0d48.62b242c","3ddfe9e4.7fc1e6"]]},{"id":"3fa0d48.62b242c","type":"switch","z":"373140ce.a3fbf","name":"Check ID","property":"payload.NFC_ID","propertyType":"msg","rules":[{"t":"eq","v":"045cc74a616081","vt":"str"},{"t":"eq","v":"0416c64a616081","vt":"str"},{"t":"eq","v":"0417c64a616081","vt":"str"},{"t":"eq","v":"0452c64a616081","vt":"str"},{"t":"eq","v":"0434c64a616081","vt":"str"},{"t":"eq","v":"04f8c64a616080","vt":"str"},{"t":"eq","v":"041ec74a616081","vt":"str"},{"t":"eq","v":"044ac74a616080","vt":"str"},{"t":"eq","v":"047ac74a616081","vt":"str"},{"t":"eq","v":"045bc74a616081","vt":"str"},{"t":"eq","v":"043cc74a616081","vt":"str"},{"t":"eq","v":"0467c74a616080","vt":"str"}],"checkall":"true","repair":false,"outputs":12,"x":466.6666717529297,"y":560.0000152587891,"wires":[["84fdc5cd.1d8ac8"],["c42a7426.b52d18"],["1b051cb8.8a14e3"],["e399c279.89f13"],["31e17a2a.8963c6"],["a56597be.59acc8"],["4a7b5966.5f53b8"],["53eb7190.3eef5"],["3147c14c.55859e"],["6f479361.4ed15c"],["97e851c5.f65f5"],["48f0a176.5fd74"]]},{"id":"cffb5278.7763e","type":"comment","z":"373140ce.a3fbf","name":"---------- Store the NFC Id of every Workpiece which is travelling under the NFC Reader","info":"When a new workpiece has been recognized by the NFC-reader, the informations (NFC ID and the name) should be stored in the MES","x":367.6666717529297,"y":338.00001525878906,"wires":[]},{"id":"3ddfe9e4.7fc1e6","type":"switch","z":"373140ce.a3fbf","name":"light sensor exit rising","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"26","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":469,"y":871.0000152587891,"wires":[["b3e5fc97.3ed65"]]},{"id":"48f0a176.5fd74","type":"change","z":"373140ce.a3fbf","name":"Blue Workpiece N4","rules":[{"t":"set","p":"processingstation.current_workpiece.color","pt":"global","to":"Blue Workpiece N4","tot":"str"},{"t":"set","p":"processingstation.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":696.6666717529297,"y":820.0000152587891,"wires":[[]]},{"id":"97e851c5.f65f5","type":"change","z":"373140ce.a3fbf","name":"Blue Workpiece N3","rules":[{"t":"set","p":"processingstation.current_workpiece.color","pt":"global","to":"Blue Workpiece N3","tot":"str"},{"t":"set","p":"processingstation.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":696.6666717529297,"y":780.0000152587891,"wires":[[]]},{"id":"6f479361.4ed15c","type":"change","z":"373140ce.a3fbf","name":"Blue Workpiece N2","rules":[{"t":"set","p":"processingstation.current_workpiece.color","pt":"global","to":"Blue Workpiece N2","tot":"str"},{"t":"set","p":"processingstation.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":696.6666717529297,"y":740.0000152587891,"wires":[[]]},{"id":"4a7b5966.5f53b8","type":"change","z":"373140ce.a3fbf","name":"Blue Workpiece N1","rules":[{"t":"set","p":"processingstation.current_workpiece.color","pt":"global","to":"Blue Workpiece N1","tot":"str"},{"t":"set","p":"processingstation.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":696.6666717529297,"y":700.0000152587891,"wires":[[]]},{"id":"31e17a2a.8963c6","type":"change","z":"373140ce.a3fbf","name":"Red Workpiece N1","rules":[{"t":"set","p":"processingstation.current_workpiece.color","pt":"global","to":"Red Workpiece N1","tot":"str"},{"t":"set","p":"processingstation.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":696.6666717529297,"y":540.0000152587891,"wires":[[]]},{"id":"a56597be.59acc8","type":"change","z":"373140ce.a3fbf","name":"Red Workpiece N2","rules":[{"t":"set","p":"processingstation.current_workpiece.color","pt":"global","to":"Red Workpiece N2","tot":"str"},{"t":"set","p":"processingstation.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":696.6666717529297,"y":580.0000152587891,"wires":[[]]},{"id":"3147c14c.55859e","type":"change","z":"373140ce.a3fbf","name":"Red Workpiece N3","rules":[{"t":"set","p":"processingstation.current_workpiece.color","pt":"global","to":"Red Workpiece N3","tot":"str"},{"t":"set","p":"processingstation.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":696.6666717529297,"y":620.0000152587891,"wires":[[]]},{"id":"53eb7190.3eef5","type":"change","z":"373140ce.a3fbf","name":"Red Workpiece N4","rules":[{"t":"set","p":"processingstation.current_workpiece.color","pt":"global","to":"Red Workpiece N4","tot":"str"},{"t":"set","p":"processingstation.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":696.6666717529297,"y":660.0000152587891,"wires":[[]]},{"id":"84fdc5cd.1d8ac8","type":"change","z":"373140ce.a3fbf","name":"White Workpiece N1","rules":[{"t":"set","p":"processingstation.current_workpiece.color","pt":"global","to":"White Workpiece N1","tot":"str"},{"t":"set","p":"processingstation.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":706.6666717529297,"y":380.00001525878906,"wires":[[]]},{"id":"c42a7426.b52d18","type":"change","z":"373140ce.a3fbf","name":"White Workpiece N2","rules":[{"t":"set","p":"processingstation.current_workpiece.color","pt":"global","to":"White Workpiece N2","tot":"str"},{"t":"set","p":"processingstation.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":706.6666717529297,"y":420.00001525878906,"wires":[[]]},{"id":"1b051cb8.8a14e3","type":"change","z":"373140ce.a3fbf","name":"White Workpiece N3","rules":[{"t":"set","p":"processingstation.current_workpiece.color","pt":"global","to":"White Workpiece N3","tot":"str"},{"t":"set","p":"processingstation.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":706.6666717529297,"y":460.00001525878906,"wires":[[]]},{"id":"e399c279.89f13","type":"change","z":"373140ce.a3fbf","name":"White Workpiece N4","rules":[{"t":"set","p":"processingstation.current_workpiece.color","pt":"global","to":"White Workpiece N4","tot":"str"},{"t":"set","p":"processingstation.current_workpiece.nfc_id","pt":"global","to":"payload.NFC_ID","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":706.6666717529297,"y":500.00001525878906,"wires":[[]]},{"id":"b3e5fc97.3ed65","type":"change","z":"373140ce.a3fbf","name":"Workpiece is given to the Sorting Line","rules":[{"t":"set","p":"sortingline.handover_workpiece.color","pt":"global","to":"processingstation.current_workpiece.color","tot":"global"},{"t":"set","p":"sortingline.handover_workpiece.nfc_id","pt":"global","to":"processingstation.current_workpiece.nfc_id","tot":"global"},{"t":"set","p":"processingstation.current_workpiece.color","pt":"global","to":"","tot":"str"},{"t":"set","p":"processingstation.current_workpiece.nfc_id","pt":"global","to":"","tot":"str"},{"t":"set","p":"processingstation.handover_workpiece.color","pt":"global","to":"","tot":"str"},{"t":"set","p":"processingstation.handover_workpiece.nfc_id","pt":"global","to":"","tot":"str"},{"t":"set","p":"processingstation.commands.current_command","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":755.6666717529297,"y":871.0000152587891,"wires":[[]]},{"id":"e1bc4d63.9efae","type":"comment","z":"373140ce.a3fbf","name":"----------- Store commans in the MES ----------","info":"Incomming commands should be stored in a list. the first come first serve principle is applied.\n\nThese commands can be given by clicking on a button in the dashbaord or by sending a command via chatbot.","x":270,"y":940,"wires":[]},{"id":"16946c8a.855463","type":"ui_button","z":"373140ce.a3fbf","name":"Do only painting","group":"6ecc650d.ac502c","order":0,"width":0,"height":0,"passthru":false,"label":"Do only painting","tooltip":"","color":"","bgcolor":"","icon":"","payload":"{\"controller\":8,\"subadress\":4,\"timestamp\":1351824120,\"command\":10}","payloadType":"json","topic":"","x":380,"y":980,"wires":[["a8572201.f1038","8805f118.fac37"]]},{"id":"8b44e6f9.4e3418","type":"ui_button","z":"373140ce.a3fbf","name":"Do only polishing","group":"6ecc650d.ac502c","order":0,"width":0,"height":0,"passthru":false,"label":"Do only polishing","tooltip":"","color":"","bgcolor":"","icon":"","payload":"{\"controller\":8,\"subadress\":4,\"timestamp\":1351824120,\"command\":11}","payloadType":"json","topic":"","x":388.11111068725586,"y":1018.6666488647461,"wires":[["a8572201.f1038","8805f118.fac37"]]},{"id":"a41b7e73.f35a1","type":"ui_button","z":"373140ce.a3fbf","name":"Do painting and polishing","group":"6ecc650d.ac502c","order":0,"width":0,"height":0,"passthru":false,"label":"Do painting and polishing","tooltip":"","color":"","bgcolor":"","icon":"","payload":"{\"controller\":8,\"subadress\":4,\"timestamp\":1351824120,\"command\":12}","payloadType":"json","topic":"","x":407.11111068725586,"y":1056.666648864746,"wires":[["a8572201.f1038","8805f118.fac37"]]},{"id":"dadda5eb.297818","type":"ui_button","z":"373140ce.a3fbf","name":"Do no processing","group":"6ecc650d.ac502c","order":0,"width":0,"height":0,"passthru":false,"label":"Do no processing","tooltip":"","color":"","bgcolor":"","icon":"","payload":"{\"controller\":8,\"subadress\":4,\"timestamp\":1351824120,\"command\":13}","payloadType":"json","topic":"","x":390,"y":1100,"wires":[["a8572201.f1038","8805f118.fac37"]]},{"id":"fb6eb30b.5540d","type":"switch","z":"373140ce.a3fbf","name":"Commands for Processing Station","property":"deviceId","propertyType":"msg","rules":[{"t":"eq","v":"processingstation","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":340,"y":1160,"wires":[["8805f118.fac37","634c6c86.9b8894"]]},{"id":"634c6c86.9b8894","type":"switch","z":"373140ce.a3fbf","name":"Job","property":"payload.command","propertyType":"msg","rules":[{"t":"eq","v":"10","vt":"num"},{"t":"eq","v":"11","vt":"num"},{"t":"eq","v":"12","vt":"num"},{"t":"eq","v":"13","vt":"str"}],"checkall":"true","repair":false,"outputs":4,"x":310,"y":1280,"wires":[["d709429e.8098f"],["cc2464f0.f5fd88"],["22325473.1ccd1c"],["e17f421e.f08bf"]]},{"id":"d709429e.8098f","type":"function","z":"373140ce.a3fbf","name":"paint","func":"msg.payload = {\n    \"controller\": 8,\n    \"subadress\": 4,\n    \"timestamp\": 1351824120,\n    \"command\": 10\n}\nreturn msg;","outputs":1,"noerr":0,"x":456,"y":1230,"wires":[["a8572201.f1038"]]},{"id":"cc2464f0.f5fd88","type":"function","z":"373140ce.a3fbf","name":"polish","func":"msg.payload = {\n    \"controller\": 8,\n    \"subadress\": 4,\n    \"timestamp\": 1351824120,\n    \"command\": 11\n}\nreturn msg;","outputs":1,"noerr":0,"x":455,"y":1262,"wires":[["a8572201.f1038"]]},{"id":"22325473.1ccd1c","type":"function","z":"373140ce.a3fbf","name":"paint and polish","func":"msg.payload = {\n    \"controller\": 8,\n    \"subadress\": 4,\n    \"timestamp\": 1351824120,\n    \"command\": 12\n}\nreturn msg;","outputs":1,"noerr":0,"x":485,"y":1295,"wires":[["a8572201.f1038"]]},{"id":"e17f421e.f08bf","type":"function","z":"373140ce.a3fbf","name":"no processing","func":"msg.payload = {\n    \"controller\": 8,\n    \"subadress\": 4,\n    \"timestamp\": 1351824120,\n    \"command\": 13\n}\nreturn msg;","outputs":1,"noerr":0,"x":485,"y":1328,"wires":[["a8572201.f1038"]]},{"id":"49e49916.09f928","type":"ibmiot in","z":"373140ce.a3fbf","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"cmd","logicalInterface":"","ruleId":"","deviceId":"","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Commands","service":"registered","allDevices":true,"allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":true,"allFormats":"","qos":0,"x":110,"y":1160,"wires":[["fb6eb30b.5540d"]]},{"id":"a8572201.f1038","type":"switch","z":"373140ce.a3fbf","name":"Check if cmd pos1 is free","property":"processingstation.commands.position_1","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":1020,"wires":[["69002b2e.138ee4"],["c1e15dc.4f9e5a"]]},{"id":"c1e15dc.4f9e5a","type":"switch","z":"373140ce.a3fbf","name":"Check if cmd pos2 is free","property":"processingstation.commands.position_2","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":1060,"wires":[["b20a68bb.4f7e98"],["1d572b73.1f45e5"]]},{"id":"1d572b73.1f45e5","type":"switch","z":"373140ce.a3fbf","name":"Check if cmd pos3 is free","property":"processingstation.commands.position_3","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":1100,"wires":[["37452fd9.66be9"],["af96c17e.10582"]]},{"id":"af96c17e.10582","type":"switch","z":"373140ce.a3fbf","name":"Check if cmd pos4 is free","property":"processingstation.commands.position_4","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":1140,"wires":[["16ef9728.2a3639"],["6c8743bd.215aac"]]},{"id":"6c8743bd.215aac","type":"switch","z":"373140ce.a3fbf","name":"Check if cmd pos5 is free","property":"processingstation.commands.position_5","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":1180,"wires":[["29bc81ec.ff02be"],["ca749813.0081e8"]]},{"id":"ca749813.0081e8","type":"switch","z":"373140ce.a3fbf","name":"Check if cmd pos6 is free","property":"processingstation.commands.position_6","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":1220,"wires":[["4253a940.2dc4a8"],["2a956919.a32e86"]]},{"id":"2a956919.a32e86","type":"switch","z":"373140ce.a3fbf","name":"Check if cmd pos7 is free","property":"processingstation.commands.position_7","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":1260,"wires":[["2d72368e.0ce53a"],["9bfb6af6.99db98"]]},{"id":"9bfb6af6.99db98","type":"switch","z":"373140ce.a3fbf","name":"Check if cmd pos8 is free","property":"processingstation.commands.position_8","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":1300,"wires":[["e0b6431f.4f202"],["7934e391.3c3cec"]]},{"id":"7934e391.3c3cec","type":"switch","z":"373140ce.a3fbf","name":"Check if cmd pos9 is free","property":"processingstation.commands.position_9","propertyType":"global","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":1340,"wires":[["19d249a9.12e376"],["868af0c9.0386b"]]},{"id":"868af0c9.0386b","type":"change","z":"373140ce.a3fbf","name":"Can' take an other cmd","rules":[{"t":"set","p":"payload","pt":"msg","to":"No fruther command can be stored. Storage exceeded","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":790,"y":1400,"wires":[["e0a6ce33.a4c99"]]},{"id":"69002b2e.138ee4","type":"change","z":"373140ce.a3fbf","name":"Store command in 1st Position","rules":[{"t":"set","p":"processingstation.commands.position_1","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1110,"y":1020,"wires":[[]]},{"id":"b20a68bb.4f7e98","type":"change","z":"373140ce.a3fbf","name":"Store command in 2nd Position","rules":[{"t":"set","p":"processingstation.commands.position_2","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1110,"y":1060,"wires":[[]]},{"id":"37452fd9.66be9","type":"change","z":"373140ce.a3fbf","name":"Store command in 3rd Position","rules":[{"t":"set","p":"processingstation.commands.position_3","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1110,"y":1100,"wires":[[]]},{"id":"16ef9728.2a3639","type":"change","z":"373140ce.a3fbf","name":"Store command in 4th Position","rules":[{"t":"set","p":"processingstation.commands.position_4","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1110,"y":1140,"wires":[[]]},{"id":"29bc81ec.ff02be","type":"change","z":"373140ce.a3fbf","name":"Store command in 5th Position","rules":[{"t":"set","p":"processingstation.commands.position_5","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1110,"y":1180,"wires":[[]]},{"id":"4253a940.2dc4a8","type":"change","z":"373140ce.a3fbf","name":"Store command in 6th Position","rules":[{"t":"set","p":"processingstation.commands.position_6","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1110,"y":1220,"wires":[[]]},{"id":"2d72368e.0ce53a","type":"change","z":"373140ce.a3fbf","name":"Store command in 7th Position","rules":[{"t":"set","p":"processingstation.commands.position_7","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1110,"y":1260,"wires":[[]]},{"id":"e0b6431f.4f202","type":"change","z":"373140ce.a3fbf","name":"Store command in 8th Position","rules":[{"t":"set","p":"processingstation.commands.position_8","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1110,"y":1300,"wires":[[]]},{"id":"19d249a9.12e376","type":"change","z":"373140ce.a3fbf","name":"Store command in 9th Position","rules":[{"t":"set","p":"processingstation.commands.position_9","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1110,"y":1340,"wires":[[]]},{"id":"e0a6ce33.a4c99","type":"ui_toast","z":"373140ce.a3fbf","position":"top right","displayTime":"7","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","topic":"Error Message Processing Station","name":"Error Message","x":1040,"y":1400,"wires":[]},{"id":"c1674670.661388","type":"change","z":"373140ce.a3fbf","name":"Send Notification","rules":[{"t":"set","p":"payload","pt":"msg","to":"The processing station is currently not available. The command is stored and excecuted as soon ass possible","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1130,"y":980,"wires":[["c523d1c9.ff6ee"]]},{"id":"c523d1c9.ff6ee","type":"ui_toast","z":"373140ce.a3fbf","position":"top right","displayTime":"7","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","topic":"Notification Warehouse 1","name":"Notification","x":1330,"y":980,"wires":[]},{"id":"8805f118.fac37","type":"switch","z":"373140ce.a3fbf","name":"Check if processingstation is NOT available","property":"processingstation.available","propertyType":"global","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":850,"y":982,"wires":[["c1674670.661388"]]},{"id":"9046cdbb.3150e","type":"switch","z":"373140ce.a3fbf","name":"Check if Vaccum Gripper delivered a workpiece","property":"processingstation.handover_workpiece.color","propertyType":"global","rules":[{"t":"neq","v":"","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":440,"y":1580,"wires":[["a3b05b81.ac2008"]]},{"id":"dd2eef8a.fe8f6","type":"link out","z":"373140ce.a3fbf","name":"","links":["15a4b3ef.dce07c","2c7574f1.633efc"],"x":755,"y":1620,"wires":[]},{"id":"fddf6161.70ec4","type":"comment","z":"373140ce.a3fbf","name":"----------- Check if the processing station is available and send the command to the plant ----------","info":"If the processing station is available (not producing any other workpiece) and the vacuum gripper has delivered a workpiece (workpiece has not been lost). these flows check if there is a new command which can be send to the plant. If this is the case, the command is stored under 'current command' and it is send to the processing station.\nall the ohter command in the list can now move up","x":430,"y":1480,"wires":[]},{"id":"9ec8e37c.d432c","type":"inject","z":"373140ce.a3fbf","name":"Inject","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":1540,"wires":[["5bcee359.6f034c"]]},{"id":"a3b05b81.ac2008","type":"switch","z":"373140ce.a3fbf","name":"Check if there is a cmd in pos 1","property":"processingstation.commands.position_1","propertyType":"global","rules":[{"t":"neq","v":"","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":390,"y":1620,"wires":[["71cfe299.fcb9fc"]]},{"id":"71cfe299.fcb9fc","type":"change","z":"373140ce.a3fbf","name":"Run the first cmd","rules":[{"t":"set","p":"payload","pt":"msg","to":"processingstation.commands.position_1","tot":"global"},{"t":"set","p":"processingstation.commands.current_command","pt":"global","to":"processingstation.commands.position_1","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":1660,"wires":[["f1098e46.fbb36","f64c4d29.6ddbe","dd2eef8a.fe8f6","11a46f79.3b8b71"]]},{"id":"f1098e46.fbb36","type":"change","z":"373140ce.a3fbf","name":"Move pos2 to pos1","rules":[{"t":"set","p":"processingstation.commands.position_1","pt":"global","to":"processingstation.commands.position_2","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":1700,"wires":[["78dc67f0.bbba78"]]},{"id":"78dc67f0.bbba78","type":"change","z":"373140ce.a3fbf","name":"Move pos3 to pos2","rules":[{"t":"set","p":"processingstation.commands.position_2","pt":"global","to":"processingstation.commands.position_3","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":1740,"wires":[["96222440.58f0c8"]]},{"id":"96222440.58f0c8","type":"change","z":"373140ce.a3fbf","name":"Move pos4 to pos3","rules":[{"t":"set","p":"processingstation.commands.position_3","pt":"global","to":"processingstation.commands.position_4","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":1780,"wires":[["4816974e.893118"]]},{"id":"4816974e.893118","type":"change","z":"373140ce.a3fbf","name":"Move pos5 to pos4","rules":[{"t":"set","p":"processingstation.commands.position_4","pt":"global","to":"processingstation.commands.position_5","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":1820,"wires":[["8fddfaa4.426fb8"]]},{"id":"8fddfaa4.426fb8","type":"change","z":"373140ce.a3fbf","name":"Move pos6 to pos5","rules":[{"t":"set","p":"processingstation.commands.position_5","pt":"global","to":"processingstation.commands.position_6","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":1860,"wires":[["f72c7e61.d7b41"]]},{"id":"f72c7e61.d7b41","type":"change","z":"373140ce.a3fbf","name":"Move pos7 to pos6","rules":[{"t":"set","p":"processingstation.commands.position_6","pt":"global","to":"processingstation.commands.position_7","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":1900,"wires":[["740b801a.8065b"]]},{"id":"740b801a.8065b","type":"change","z":"373140ce.a3fbf","name":"Move pos8 to pos7","rules":[{"t":"set","p":"processingstation.commands.position_7","pt":"global","to":"processingstation.commands.position_8","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":1940,"wires":[["ce9b7a9b.aaef58"]]},{"id":"ce9b7a9b.aaef58","type":"change","z":"373140ce.a3fbf","name":"Move pos9 to pos8","rules":[{"t":"set","p":"processingstation.commands.position_8","pt":"global","to":"processingstation.commands.position_9","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":1980,"wires":[["39308b08.072964"]]},{"id":"39308b08.072964","type":"change","z":"373140ce.a3fbf","name":"Delete pos9","rules":[{"t":"set","p":"processingstation.commands.position_9","pt":"global","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":330,"y":2020,"wires":[[]]},{"id":"5bcee359.6f034c","type":"switch","z":"373140ce.a3fbf","name":"Check Processing Station available","property":"processingstation.available","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":400,"y":1540,"wires":[["9046cdbb.3150e"]]},{"id":"f64c4d29.6ddbe","type":"ibmiot out","z":"373140ce.a3fbf","authentication":"apiKey","apiKey":"6b68196b.a83528","outputType":"cmd","deviceId":"Processing_Station_Munich","deviceType":"0.20.7","eventCommandType":"command","format":"json","data":"{}","qos":0,"name":"Processing_Station_Munich","service":"registered","x":840,"y":1660,"wires":[]},{"id":"11a46f79.3b8b71","type":"debug","z":"373140ce.a3fbf","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":788.8888931274414,"y":1712.777723312378,"wires":[]},{"id":"18dff7ff.566cb8","type":"comment","z":"373140ce.a3fbf","name":"---------- Check if the ID provided by the Vacuum Gripper mateches the one of the NFC reader -----------","info":"When a net workpiece (NFC Tag) has beeen recognised \nby the NFC Reader, the identified Id is compared\nto the one deliveren by the processing station stored\nin the global variable global.processingstation.handover_workpiece","x":430,"y":2100,"wires":[]},{"id":"6051c1f.f6fb24","type":"switch","z":"373140ce.a3fbf","name":"Check for different ID","property":"processingstation.current_workpiece.nfc_id","propertyType":"global","rules":[{"t":"neq","v":"processingstation.handover_workpiece.nfc_id","vt":"global"}],"checkall":"true","repair":false,"outputs":1,"x":320,"y":2140,"wires":[["2b3c826c.a1913e"]]},{"id":"2b3c826c.a1913e","type":"change","z":"373140ce.a3fbf","name":"Set msg","rules":[{"t":"set","p":"payload","pt":"msg","to":"The NFC ID of the new workpiece doesn't match","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":520,"y":2140,"wires":[["7f0e06a4.f00e78"]]},{"id":"7f0e06a4.f00e78","type":"ui_toast","z":"373140ce.a3fbf","position":"top right","displayTime":"7","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Error Message Processing Station","name":"Error Message","x":680,"y":2140,"wires":[]},{"id":"2c7574f1.633efc","type":"link in","z":"373140ce.a3fbf","name":"","links":["95cf9ffd.87e5b","dd2eef8a.fe8f6"],"x":100,"y":2140,"wires":[["6051c1f.f6fb24"]]},{"id":"982d9997.155748","type":"comment","z":"373140ce.a3fbf","name":"----------- Check if Processing Station ia available ---------","info":"When the plant sends the event 2 it has finished its reference run and is available.\nAfter dropping a piece to the sorting line with the event 18 the plant is available again\n\nWehen sending the event 47 the plant is busy","x":280,"y":2220,"wires":[]},{"id":"33f58710.266b38","type":"switch","z":"373140ce.a3fbf","name":"check if available","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"2","vt":"str"},{"t":"eq","v":"18","vt":"str"},{"t":"eq","v":"47","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":430,"y":2260,"wires":[["8ec6c5e9.7a8958"],["8ec6c5e9.7a8958"],["49b7d7c5.958198"]]},{"id":"49b7d7c5.958198","type":"change","z":"373140ce.a3fbf","name":"set global not available","rules":[{"t":"set","p":"processingstation.available","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":2300,"wires":[["aaa88da1.acb0f"]]},{"id":"8ec6c5e9.7a8958","type":"change","z":"373140ce.a3fbf","name":"set global  available","rules":[{"t":"set","p":"processingstation.available","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":2260,"wires":[["aaa88da1.acb0f"]]},{"id":"cf7db010.4a059","type":"ibmiot in","z":"373140ce.a3fbf","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"Processing_Station_Munich","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Processing_Station_Munich","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":200,"y":2260,"wires":[["33f58710.266b38"]]},{"id":"fc260f7b.3e8ec","type":"ibmiot in","z":"373140ce.a3fbf","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"Processing_Station_Munich","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Processing_Station_Munich","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":200,"y":2600,"wires":[["626142a3.13676c"]]},{"id":"626142a3.13676c","type":"switch","z":"373140ce.a3fbf","name":"switch","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"46","vt":"str"},{"t":"eq","v":"47","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":390,"y":2600,"wires":[["94692c14.c7f4b"],["4d30df77.2464e"]]},{"id":"94692c14.c7f4b","type":"change","z":"373140ce.a3fbf","name":"Processing Station waiting for cmd","rules":[{"t":"set","p":"processingstation.waiting_for_cmd","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":640,"y":2580,"wires":[[]]},{"id":"4d30df77.2464e","type":"change","z":"373140ce.a3fbf","name":"Processing Station recieved cmd","rules":[{"t":"set","p":"processingstation.waiting_for_cmd","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":640,"y":2620,"wires":[[]]},{"id":"7e8ad750.280648","type":"comment","z":"373140ce.a3fbf","name":"----------- Check if Processing Station is waiting for a new command ---------","info":"If the processing station is waiting for a command it sends the event 46 and if it has recieve an command it send the event 47","x":340,"y":2540,"wires":[]},{"id":"ecf777be.add508","type":"comment","z":"373140ce.a3fbf","name":"----------- Check if Processing Station is ready for a new workpiece ---------","info":"We want to know if the moving tray of the oven is free (no workpiece placed there).\nOnly if this table is not occupied, the vacuum gripper 1 is allowed to place a workpiece.\n\nThis information is stored in the global variable 'gloabal.processingstation.ready_for_new_workpiece'\n\n\nThe tray is emty after a reference run (event 2) or after the crane of the processing station has moved a workpece to the turning table (event 8).\nThe tray is occupied after the vacuum gripper has dropped a workpiece at the processing station","x":340,"y":2360,"wires":[]},{"id":"e6b614e9.b14418","type":"switch","z":"373140ce.a3fbf","name":"check events","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"2","vt":"str"},{"t":"eq","v":"8","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":410,"y":2400,"wires":[["ef89d409.cd28a8"],["ef89d409.cd28a8"]]},{"id":"de1ec10.333294","type":"change","z":"373140ce.a3fbf","name":"set global not ready_for_new_workpiece","rules":[{"t":"set","p":"processingstation.ready_for_new_workpiece","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":2460,"wires":[[]]},{"id":"ef89d409.cd28a8","type":"change","z":"373140ce.a3fbf","name":"set global  ready_for_new_workpiece","rules":[{"t":"set","p":"processingstation.ready_for_new_workpiece","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":2400,"wires":[[]]},{"id":"8247e2c0.dd0fb","type":"ibmiot in","z":"373140ce.a3fbf","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"Processing_Station_Munich","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Processing_Station_Munich","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":200,"y":2400,"wires":[["e6b614e9.b14418"]]},{"id":"47943a2a.f5db14","type":"comment","z":"347bd197.17ccbe","name":"----------- Ping the IoT platform and send error message if no response ------------","info":"We are using a lite plan for the IoT platform. This one is deleted after 30 days on inactivity. Therefore the Cloud Node-RED should ping the IoT platform in regular intervals (e.g. every 24 h). So there is an activity.\nIn case that the Iot Platform has been deleted anyway a mail should be send by send to Jakob K. and Michael M. after 2 failed pings to inform them that something is not ok","x":340,"y":1360,"wires":[]},{"id":"8d09ff2e.2dff3","type":"inject","z":"347bd197.17ccbe","name":"Repeat every 24h","topic":"","payload":"","payloadType":"date","repeat":"86400","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":1460,"wires":[["b15461d2.d2e25","e16208f3.1ef448"]]},{"id":"b15461d2.d2e25","type":"ibmiot out","z":"347bd197.17ccbe","authentication":"apiKey","apiKey":"6b68196b.a83528","outputType":"evt","deviceId":"Ping_IoT_Platform","deviceType":"0.20.7","eventCommandType":"event","format":"json","data":"{}","qos":0,"name":"Ping_IoT_Platform","service":"registered","x":570,"y":1460,"wires":[]},{"id":"e16208f3.1ef448","type":"trigger","z":"347bd197.17ccbe","op1":"","op2":"true","op1type":"nul","op2type":"bool","duration":"1","extend":false,"units":"s","reset":"","bytopic":"all","name":"Wait for Response","x":570,"y":1520,"wires":[["7b405079.bcd2c","74ab500f.9c31a"]]},{"id":"2aa91fe3.03f37","type":"ibmiot in","z":"347bd197.17ccbe","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"Ping_IoT_Platform","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"Ping_IoT_Platform","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":"","allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":150,"y":1520,"wires":[["3ef4dfd4.d5408"]]},{"id":"3ef4dfd4.d5408","type":"change","z":"347bd197.17ccbe","name":"reset timer","rules":[{"t":"set","p":"reset","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":330,"y":1520,"wires":[["e16208f3.1ef448","70e1732.a43188c"]]},{"id":"a7a60fa3.2414a","type":"e-mail","z":"347bd197.17ccbe","server":"smtp.gmail.com","port":"465","secure":true,"tls":true,"name":"patrick.holstein@outlook.com","dname":"Mail to Patrick outlook","x":780,"y":1680,"wires":[]},{"id":"73158076.cd16b","type":"inject","z":"347bd197.17ccbe","name":"Send Test Mail","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":1680,"wires":[["3ff30b3b.1b8c84"]]},{"id":"3ff30b3b.1b8c84","type":"change","z":"347bd197.17ccbe","name":"Set Mail Topic","rules":[{"t":"set","p":"topic","pt":"msg","to":"Fischertechnik Plant Error","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":1680,"wires":[["e79b582c.028d88","f805d96c.6c2e88","537da36e.fd8bbc","f3bb652b.1da4c8"]]},{"id":"e79b582c.028d88","type":"change","z":"347bd197.17ccbe","name":"Set Mail MSG","rules":[{"t":"set","p":"payload","pt":"msg","to":"Guten Tag Patrick. Bei der Fischertechnik Anlage wurde ein Fehler festgestellt. Der Versuch die IoT zu erreichen ist leider fehlgeschlagen. Kannst du bitte mal nachschauen woran dies liegen knnte. Vielleicht wurde die IoT einfach nur nach 30 Tagen Inaktivitt gelscht. Um dis zu berprfen musst du einfach in der Ressourcenliste der IBM Cloud (der practice) nach 'IoT Platform Fischertechnik Munich' suchen.","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":1680,"wires":[["a5e92958.9b4e18","c8cd40c.266b1c","a7a60fa3.2414a"]]},{"id":"537da36e.fd8bbc","type":"change","z":"347bd197.17ccbe","name":"Set Mail MSG","rules":[{"t":"set","p":"payload","pt":"msg","to":"Guten Tag Jakob. Bei der Fischertechnik Anlage wurde ein Fehler festgestellt. Der Versuch die IoT zu erreichen ist leider fehlgeschlagen. Kannst du bitte mal nachschauen woran dies liegen knnte. Vielleicht wurde die IoT einfach nur nach 30 Tagen Inaktivitt gelscht. Um dis zu berprfen musst du einfach in der Ressourcenliste der IBM Cloud (der practice) nach 'IoT Platform Fischertechnik Munich' suchen.","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":1760,"wires":[["96fc8053.9db2f"]]},{"id":"f3bb652b.1da4c8","type":"change","z":"347bd197.17ccbe","name":"Set Mail MSG","rules":[{"t":"set","p":"payload","pt":"msg","to":"Guten Tag Michael. Bei der Fischertechnik Anlage wurde ein Fehler festgestellt. Der Versuch die IoT zu erreichen ist leider fehlgeschlagen. Kannst du bitte mal nachschauen woran dies liegen knnte. Vielleicht wurde die IoT einfach nur nach 30 Tagen Inaktivitt gelscht","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":1800,"wires":[[]]},{"id":"96fc8053.9db2f","type":"e-mail","z":"347bd197.17ccbe","server":"smtp.gmail.com","port":"465","secure":true,"tls":true,"name":"Jakob.Kinghorst@ibm.com","dname":"Mail to Jakob","x":750,"y":1760,"wires":[]},{"id":"84cd6574.2743e8","type":"e-mail","z":"347bd197.17ccbe","server":"smtp.gmail.com","port":"465","secure":true,"tls":true,"name":"MMONGER@de.ibm.com","dname":"Mail to Michael","x":760,"y":1800,"wires":[]},{"id":"c8cd40c.266b1c","type":"e-mail","z":"347bd197.17ccbe","server":"smtp.gmail.com","port":"465","secure":true,"tls":true,"name":"patrick.holstein@ibm.com","dname":"Mail to Patrick IBM","x":770,"y":1720,"wires":[]},{"id":"76465875.56e118","type":"inject","z":"347bd197.17ccbe","name":"init","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":110,"y":1420,"wires":[["3d049b9d.f7d534"]]},{"id":"3d049b9d.f7d534","type":"change","z":"347bd197.17ccbe","name":"Set Variable first_ping_failed","rules":[{"t":"set","p":"first_ping_failed","pt":"global","to":"false","tot":"bool"},{"t":"set","p":"mail_send","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":1420,"wires":[[]]},{"id":"1b761587.972fca","type":"change","z":"347bd197.17ccbe","name":"Set first_ping_failed to true","rules":[{"t":"set","p":"first_ping_failed","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":960,"y":1500,"wires":[[]]},{"id":"7b405079.bcd2c","type":"switch","z":"347bd197.17ccbe","name":"Check if first ping failed already","property":"first_ping_failed","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":850,"y":1540,"wires":[["1b2b28d0.3bb387"]]},{"id":"70e1732.a43188c","type":"change","z":"347bd197.17ccbe","name":"Reset first_ping_failed","rules":[{"t":"set","p":"first_ping_failed","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":1560,"wires":[[]]},{"id":"74ab500f.9c31a","type":"delay","z":"347bd197.17ccbe","name":"delay","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":770,"y":1500,"wires":[["1b761587.972fca"]]},{"id":"1b2b28d0.3bb387","type":"switch","z":"347bd197.17ccbe","name":"Check if a mail has already be send","property":"mail_send","propertyType":"global","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":420,"y":1620,"wires":[["3ff30b3b.1b8c84"]]},{"id":"f805d96c.6c2e88","type":"change","z":"347bd197.17ccbe","name":"Set mail_send to true","rules":[{"t":"set","p":"mail_send","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":1740,"wires":[[]]},{"id":"a5e92958.9b4e18","type":"debug","z":"347bd197.17ccbe","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":730,"y":1640,"wires":[]},{"id":"79f04ac7.97b484","type":"comment","z":"347bd197.17ccbe","name":"Comment about this flow","info":"this flow is partially responsible for the content of the first page of the Node-Red dashboard like the location, weather, ...\nFurthermore the MES takes over some tasks that cant directly be assined to a unique model","x":170,"y":40,"wires":[]},{"id":"d2b914ec.f81378","type":"comment","z":"523571ab.a711b","name":"Comment about this flow","info":"The following flow 'Warehouse_1_Display' (as the name already suggests) is responsible for the content of the warehouse_1 dasboard page.\nNext to an image of the warehouse, current sensor values, an event log and the occupancy of the warehouse is displayed. ","x":210,"y":30,"wires":[]},{"id":"590a7d70.d7cdc4","type":"comment","z":"fab27939.ff21e8","name":"Comment about this flow","info":"The following flow 'Warehouse 1 Control' (as the name already suggests) is responsible for the controlling of the warehouse and to update the values in the MES system.\nIt works hand in hand with the previous flow 'Warehouse 1 Display'. Some of the values that are created here (the availability of the module) are then shown in the \"Display Flow\"","x":210,"y":20,"wires":[]},{"id":"2a5bc096.6df6b","type":"ibmiot in","z":"373140ce.a3fbf","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"VacuumGripperMunich_1","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"VacuumGripperMunich_1","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":190,"y":2460,"wires":[["c9e99163.781f1"]]},{"id":"c9e99163.781f1","type":"switch","z":"373140ce.a3fbf","name":"Wait for Drop off","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"30","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":420,"y":2460,"wires":[["de1ec10.333294"]]},{"id":"4e88d9d8.bba738","type":"comment","z":"5c83a1e8.ad766","name":"Comment about this flow","info":"The following flow 'Vacuumgripper_1' is responsible for the controlling an diplay the events of the first vacuum gripper (used to transport workpieces from warehouse to processing station)","x":190,"y":40,"wires":[]},{"id":"7a5e7253.e1014c","type":"comment","z":"5c83a1e8.ad766","name":"----------- Check if the vacuum gripper has lost a workpiece -----------","info":"These nodes check if the vacuum gripper has lost a workpiece. therefore it checks first if the pressure value is below a abov threshold. Then it checks if the MES says, that the vacuum gripper should be moving a workpiece and is not only in IDLE mode.\n\nNow if the vacuum gripper should be transporting a workpiece and the vacuum is to low to hold a workpiece, a message should be deployed to inform the user. Furthermore, the workpiece is deleted out of the module MES informations. So we can ensure, that the next module does not start.","x":320,"y":2140,"wires":[]},{"id":"da8ffaf9.587458","type":"comment","z":"d5f5f57.d049b08","name":"Comment about this flow","info":"The following flow 'Pro_Station_Display' is responsible for displaying the informations of the processing station ","x":190,"y":40,"wires":[]},{"id":"a9f0914f.08738","type":"comment","z":"373140ce.a3fbf","name":"Comment about this flow","info":"The following flow 'Pro_Station_Control' is responsible for the MES and controlling of the processing station. Some of the values created here are displaed in the 'Pro_Station_Display'-Flow","x":190,"y":40,"wires":[]},{"id":"55ada242.2bd2bc","type":"comment","z":"373140ce.a3fbf","name":"Comment","info":"If the workpiece leaves the processing station via the conveyor belt, the values of the workpiece should also be deleted","x":427,"y":840,"wires":[]},{"id":"3abd2680.6e963a","type":"comment","z":"545b40dd.1629b","name":"Comment about this flow","info":"The following flow 'Visual Recognition' is responsible launching the Visual recognition at the raspberry pi and to continue the process at the processing station sfter the visual recognition has been finished","x":190,"y":40,"wires":[]},{"id":"1a9f0f09.7cdd81","type":"comment","z":"f04e2126.57d3","name":"Comment about this flow","info":"The following flow 'Sorting_Line' is responsible for displaing the events happening at the sorting line.\n\nThe sorting line doesn't accept commands. It acts completely independent. So the MEs does not take any controlling jobs. Hoever we are checking the NFC ID and so on.","x":170,"y":40,"wires":[]},{"id":"9f416aa8.c143e8","type":"comment","z":"b017d628.55b3e8","name":"Comment about this flow","info":"The following flow 'Vacuumgripper_2' is responsible for the controlling an diplay the events of the first vacuum gripper (used to transport workpieces from warehouse to processing station)","x":190,"y":40,"wires":[]},{"id":"9fd1a600.56ab28","type":"comment","z":"b017d628.55b3e8","name":"----------- Check if Vaccum Gripper 1 is available ---------","info":"If the plant is waiting for a command it sends the event 8.\nWhen it has recieved a command it sends the event 9","x":260,"y":3320,"wires":[]},{"id":"edba087d.489bc8","type":"switch","z":"b017d628.55b3e8","name":"check if available","property":"payload.data","propertyType":"msg","rules":[{"t":"eq","v":"8","vt":"str"},{"t":"eq","v":"9","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":370,"y":3360,"wires":[["bb8b3e55.e62dc"],["7ce1a21d.978b7c"]]},{"id":"7ce1a21d.978b7c","type":"change","z":"b017d628.55b3e8","name":"set global not available","rules":[{"t":"set","p":"vaccumgripper2.available","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":620,"y":3400,"wires":[["9a07b38c.d8d8d"]]},{"id":"bb8b3e55.e62dc","type":"change","z":"b017d628.55b3e8","name":"set global  available","rules":[{"t":"set","p":"vaccumgripper2.available","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":3360,"wires":[["9a07b38c.d8d8d"]]},{"id":"a5a7c6c5.f4ca58","type":"ibmiot in","z":"b017d628.55b3e8","authentication":"apiKey","apiKey":"6b68196b.a83528","inputType":"evt","logicalInterface":"","ruleId":"","deviceId":"VacuumGripperMunich_2","applicationId":"","deviceType":"+","eventType":"+","commandType":"","format":"json","name":"VacuumGripperMunich_2","service":"registered","allDevices":"","allApplications":"","allDeviceTypes":true,"allLogicalInterfaces":false,"allEvents":true,"allCommands":"","allFormats":"","qos":0,"x":150,"y":3360,"wires":[["edba087d.489bc8"]]},{"id":"d6d709a9.52f188","type":"comment","z":"b017d628.55b3e8","name":"comment","info":"when the vacuum gripper is started, the warehouse 2 should start as well","x":1120,"y":2800,"wires":[]},{"id":"8802229d.36ead","type":"comment","z":"c8561b10.574218","name":"Comment about this flow","info":"The following flow 'Warehouse_2_Display' (as the name already suggests) is responsible for the content of the warehouse_1 dasboard page.\nNext to an image of the warehouse, current sensor values, an event log and the occupancy of the warehouse is displayed. ","x":190,"y":40,"wires":[]},{"id":"a4ee65bd.243408","type":"comment","z":"c8561b10.574218","name":"------------ Get the picture of the hight bay warehouse ------------","info":"These 2 nodes call the URL to get the image (stored in the IBM Cloud Object Storage) of the warehouse after a restart of the Node-RED instance. This image is then shown in the warehouse-page of the dashboard","x":300,"y":80,"wires":[]},{"id":"aceb8029.f26aa","type":"comment","z":"c8561b10.574218","name":"----------- Display Sensor Values ----------","info":"The next nodes display some sensor values of the warehouse. E.g. when the crane is moving in one direction, this should be shown with a green dot.\n\nThe display is always initialised as NOT active","x":230,"y":180,"wires":[]},{"id":"bd9311c9.f53e5","type":"comment","z":"c8561b10.574218","name":"----------- Creating an event log of all incoming evens ----------","info":"First incoming events are decoded (the meaning of the numbers is added). \nThen the values are stored in an event log and the last 10 enties are displayed in the dashboard.","x":320,"y":540,"wires":[]},{"id":"c9f8d3cf.2f5e4","type":"comment","z":"ffdb110f.35e53","name":"---------- Set the initial Values of Warehouse 2 ----------","info":"The MES system stores his information in gloabal vaiables. After a restart of the MES (be this after a new deployment of the Node-RED or after a reset command) the values should be reset (bring them to an initial state)","x":270,"y":80,"wires":[]},{"id":"119f13a4.fa3bcc","type":"comment","z":"ffdb110f.35e53","name":"Comment about this flow","info":"The following flow 'Warehouse 1 Control' (as the name already suggests) is responsible for the controlling of the warehouse and to update the values in the MES system.\nIt works hand in hand with the previous flow 'Warehouse 1 Display'. Some of the values that are created here (the availability of the module) are then shown in the \"Display Flow\"","x":190,"y":32,"wires":[]},{"id":"da3370ec.a1266","type":"comment","z":"347bd197.17ccbe","name":"----------- Check if all Modules of the Plant are available ------------","info":"Every module has one global variable which indicates if the module is currently available.\nIf one moudle changes it's availablity, the avalablity of the whole plant should be checked and stored in the cloudant datatabase","x":310,"y":1880,"wires":[]},{"id":"5d71879f.6f6088","type":"link in","z":"347bd197.17ccbe","name":"Check Plant Availability","links":["4b50058f.2d5d3c","dd042729.4cd988","aaa88da1.acb0f","d10d6d92.73ae4","9a07b38c.d8d8d","36b7dd20.fc43a2"],"x":160,"y":1920,"wires":[["75193550.b4297c"]],"l":true},{"id":"4b50058f.2d5d3c","type":"link out","z":"fab27939.ff21e8","name":"Check Plant Availability","links":["5d71879f.6f6088"],"x":1010,"y":1640,"wires":[],"l":true},{"id":"dd042729.4cd988","type":"link out","z":"5c83a1e8.ad766","name":"Check Plant Availability","links":["5d71879f.6f6088"],"x":910,"y":2340,"wires":[],"l":true},{"id":"aaa88da1.acb0f","type":"link out","z":"373140ce.a3fbf","name":"Check Plant Availability","links":["5d71879f.6f6088"],"x":990,"y":2280,"wires":[],"l":true},{"id":"d10d6d92.73ae4","type":"link out","z":"f04e2126.57d3","name":"Check Plant Availability","links":["5d71879f.6f6088"],"x":970,"y":4740,"wires":[],"l":true},{"id":"9a07b38c.d8d8d","type":"link out","z":"b017d628.55b3e8","name":"Check Plant Availability","links":["5d71879f.6f6088"],"x":930,"y":3380,"wires":[],"l":true},{"id":"36b7dd20.fc43a2","type":"link out","z":"ffdb110f.35e53","name":"Check Plant Availability","links":["5d71879f.6f6088"],"x":1050,"y":920,"wires":[],"l":true},{"id":"2aa4a08f.031b2","type":"switch","z":"347bd197.17ccbe","name":"Check if Warehouse 1 is available","property":"warehouse1.available","propertyType":"global","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":640,"y":1920,"wires":[["313283ae.0af8fc"],["7041735.63abb8c"]]},{"id":"7041735.63abb8c","type":"switch","z":"347bd197.17ccbe","name":"Check if Vacuum Gripper 1 is available","property":"vaccumgripper1.available","propertyType":"global","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":650,"y":1960,"wires":[["313283ae.0af8fc"],["3727be30.32c482"]]},{"id":"3727be30.32c482","type":"switch","z":"347bd197.17ccbe","name":"Check if Processing Station is available","property":"processingstation.available","propertyType":"global","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":660,"y":2000,"wires":[["313283ae.0af8fc"],["e08d3ea9.be527"]]},{"id":"e08d3ea9.be527","type":"switch","z":"347bd197.17ccbe","name":"Check if Sorting Line is available","property":"sortingline.available","propertyType":"global","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":630,"y":2040,"wires":[["313283ae.0af8fc"],["59a57070.11bbf"]]},{"id":"be2c4fbb.cbbeb","type":"switch","z":"347bd197.17ccbe","name":"Check if Warehouse 2 is available","property":"warehouse2.available","propertyType":"global","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":640,"y":2120,"wires":[["313283ae.0af8fc"],["e317d3c0.0fbcf"]]},{"id":"59a57070.11bbf","type":"switch","z":"347bd197.17ccbe","name":"Check if Vacuum Gripper 2 is available","property":"vaccumgripper2.available","propertyType":"global","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":650,"y":2080,"wires":[["313283ae.0af8fc"],["be2c4fbb.cbbeb"]]},{"id":"44fb1937.414ec8","type":"ibmiot out","z":"347bd197.17ccbe","authentication":"apiKey","apiKey":"6b68196b.a83528","outputType":"evt","deviceId":"PlantMunich","deviceType":"0.20.7","eventCommandType":"event","format":"json","data":"{}","qos":0,"name":"PlantMunich","service":"registered","x":1270,"y":2040,"wires":[]},{"id":"f2dbdbd2.b57a78","type":"inject","z":"347bd197.17ccbe","name":"Init","topic":"","payload":"","payloadType":"date","repeat":"7200","crontab":"","once":true,"onceDelay":"0.2","x":130,"y":2020,"wires":[["2aa4a08f.031b2"]]},{"id":"313283ae.0af8fc","type":"function","z":"347bd197.17ccbe","name":"Plant NOT available","func":"msg.payload={\n    \"controller\": 0,\n    \"subadress\": 0,\n    \"timestamp\":  Math.round(+new Date()),\n    \"data\": 1\n}\nreturn msg;","outputs":1,"noerr":0,"x":1060,"y":2020,"wires":[["b175b04f.1c7b9","44fb1937.414ec8"]]},{"id":"e317d3c0.0fbcf","type":"function","z":"347bd197.17ccbe","name":"Plant IS available","func":"msg.payload={\n    \"controller\": 0,\n    \"subadress\": 0,\n    \"timestamp\":  Math.round(+new Date()),\n    \"data\": 2\n}\nreturn msg;","outputs":1,"noerr":0,"x":1050,"y":2060,"wires":[["b175b04f.1c7b9","44fb1937.414ec8"]]},{"id":"b175b04f.1c7b9","type":"debug","z":"347bd197.17ccbe","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1230,"y":1960,"wires":[]},{"id":"75193550.b4297c","type":"change","z":"347bd197.17ccbe","name":"Delete msg content","rules":[{"t":"set","p":"topic","pt":"msg","to":"\"\"","tot":"str"},{"t":"delete","p":"deviceId","pt":"msg"},{"t":"delete","p":"deviceType","pt":"msg"},{"t":"delete","p":"eventType","pt":"msg"},{"t":"delete","p":"format","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":1920,"wires":[["2aa4a08f.031b2"]]},{"id":"b464effd.c90c7","type":"link in","z":"347bd197.17ccbe","name":"Reset Plant","links":["fb3ef269.4adc5"],"x":130,"y":1960,"wires":[["75193550.b4297c"]],"l":true}]